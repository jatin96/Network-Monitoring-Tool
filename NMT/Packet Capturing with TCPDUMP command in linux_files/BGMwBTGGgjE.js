if (self.CavalryLogger) { CavalryLogger.start_js(["mO5o8"]); }

__d("ActorSelectorNuxTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};},null);
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null);
__d("ReactionNuxTypeEnum",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",NOTIFICATION:"notification",VIEWPORT:"viewport"};},null);
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INSTANCE:{CHANGE_ORDER_MODE:"story_change_order_mode",TOGGLE_COMMENTS:"story_toggle_comments"},STORY:{COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing"},COMMENT:{CHANGE_REACTION:"comment_change_reaction",EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_PIN:"comment_toggle_pin",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate",EMBED:"embed",SHOW_CONSTITUENT_TITLE:"comment_show_constituent_title",HIDE_CONSTITUENT_TITLE:"comment_hide_constituent_title"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"},FEEDBACK:{FETCH_REQUEST:"feedback_fetch_request",FETCHED_TARGET:"feedback_fetched_target"}};},null);
__d("UserHovercardLocation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INVALID:"unknown",NONE:"none",HC_FRIEND_BROWSER:"hc_friend_browser",HC_FRIENDS_TAB:"hc_friends_tab",HC_PROFILE_BROWSER:"hc_profile_browser",HC_STREAM:"hc_stream",HC_TIMELINE:"hc_timeline",HC_UFI:"hc_ufi",HC_REMINDER_POKE:"hc_reminder_poke",HC_REMINDER_BIRTHDAY:"hc_reminder_birthday",HC_EVENT_GUEST:"hc_event_guest",HC_UNKNOWN:"hc_unknown",HC_NUX:"hc_nux_page_suggestion",FRIEND_BROWSER:"friend_browser",FRIENDS_TAB:"friends_tab",PROFILE_BROWSER:"profile_browser",STREAM:"stream",TIMELINE:"timeline",UFI:"ufi",UFI_ADMIN:"ufi_admin",REMINDER_POKE:"reminder_poke",REMINDER_BIRTHDAY:"reminder_birthday",REMINDER_FACEVERSARY:"reminder_faceversary",REMINDER_NAMEDAY:"reminder_nameday",REMINDER_WORK_ANNIVERSARY:"reminder_work_anniversary",EVENT_GUEST:"event_guest",NUX_PAGE_SUGGESTION:"hc_nux_page_suggestion",TIMELINE_FRIENDS_BOX:"tl_fr_box",CHAT:"chat"};},null);
__d('PageVoiceDropdownSelector.react',['cx','BootloadedComponent.react','Image.react','JSResource','React','XUIPopoverButton.react','XUISpinner.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'PageVoiceDropdownSelector',propTypes:{disabled:i.bool,loading:i.bool,maxWidth:i.number,pages:i.object.isRequired,selectedActorID:i.string,showPageName:i.bool,suppressed:i.bool.isRequired,user:i.object.isRequired,onChange:i.func.isRequired,onClick:i.func.isRequired},getDefaultProps:function(){return {disabled:false,showPageName:false};},getInitialState:function(){return {dialogShown:false,bootloadFinished:false};},_onChangeActor:function(k){this.props.onChange(k);this.setState({dialogShown:false});},_getDialogContextRef:function(){return this.refs['open-menu-button'];},_onBootloadFinished:function(){this.setState({bootloadFinished:true});},render:function(){var k=null;if(this.state.dialogShown)k=c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('PageVoiceDropdownSelectorMenu.react').__setRef('PageVoiceDropdownSelector.react'),bootloadPlaceholder:c('React').createElement('div',null),onComponentLoad:this._onBootloadFinished},this.props,{contextRef:this._getDialogContextRef,shown:true,shownBusinessID:this.state.shownBusinessID,onChange:this._onChangeActor,onToggle:this._onToggle}));var l=this.state.dialogShown&&!this.state.bootloadFinished,m=this.props.loading||l,n=null,o=null;if(m){o=c('React').createElement('span',{className:"_2wk7"},c('React').createElement(c('XUISpinner.react'),null));}else n=c('React').createElement(c('Image.react'),{className:"_6vg",height:16,src:this._getSelectedImageSource(),width:16});return (c('React').createElement('span',null,c('React').createElement(c('XUIPopoverButton.react'),{className:"_4z8-",disabled:this.props.disabled,image:c('React').createElement('span',null,n,o),label:this.props.showPageName?this._getSelectedActorName():'',maxwidth:this.props.maxwidth,ref:'open-menu-button',suppressed:this.props.suppressed,type:'button',onClick:this._onButtonClick}),k));},_onButtonClick:function(event){this.setState({dialogShown:!this.state.dialogShown,shownBusinessID:this.state.defaultBusinessID},function(){return this.props.onClick(event);}.bind(this));},_onToggle:function(k){this.setState({dialogShown:k});},_getSelectedImageSource:function(){var k=this.props.selectedActorID;if(!k)return '';if(k===this.props.user.id)return this.props.user.thumbSrc||'';return this.props.pages[k].thumbSrc||'';},_getSelectedActorName:function(){var k=this.props.selectedActorID;if(!k)return '';if(k===this.props.user.id)return this.props.user.name||'';return this.props.pages[k].name||'';}});f.exports=j;},null);
__d('ActorSelector.react',['cx','BizSiteIdentifier.brands','BootloadedComponent.react','Bootloader','Event','JSResource','PageVoiceDropdownSelector.react','React','ReactDOM','ShortProfiles','TooltipData','emptyFunction','getObjectValues','goURI','joinClasses','tidyEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=500,k=c('React').createClass({displayName:'ActorSelector',propTypes:{actorIDs:i.array.isRequired,disabled:i.bool,loading:i.bool,nuxBody:i.node,nuxEnabled:i.bool,nuxHoverContext:i.object,nuxShowWithoutHover:i.bool,onChange:i.func.isRequired,onCompleteNux:i.func,onShowNux:i.func,selectedActorID:i.string,settingsURI:i.string,showName:i.bool,showNameMaxWidth:i.number,suppressed:i.bool,tooltipConstructor:i.func},getDefaultProps:function(){return {disabled:false,suppressed:true};},getInitialState:function(){return {actorData:{},nuxShown:false};},componentWillMount:function(){this._canSetState=true;this._fetchActorData();},_getNUXContextRef:function(){return this.refs.selector;},render:function(){if(!this.props.selectedActorID||!this.state.actorData[this.props.selectedActorID])return c('React').createElement('div',null);if(this.props.actorIDs.length===0)return c('React').createElement('div',null);var l=null;if(this.state.nuxShown)l=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ActorSelectorNUXLayer.react').__setRef('ActorSelector.react'),bootloadPlaceholder:c('React').createElement('span',null),onCompleteNux:this._onCompleteNux,onClickSettings:this._onClickSettings,settingsURI:this.props.settingsURI,shown:true,contextRef:this._getNUXContextRef,nuxBody:this.props.nuxBody});return (c('React').createElement('span',{className:c('joinClasses')("_6vh",this.props.className)},c('React').createElement('span',{ref:'selector'},c('React').createElement(c('PageVoiceDropdownSelector.react'),{disabled:this.props.disabled,loading:this.props.loading,pages:this.state.actorData,onChange:this.props.onChange,onClick:this._onClickSelector,selectedActorID:this.props.selectedActorID,searchBarVisible:true,showBusinessPages:false,showPageName:this.props.showName,showNameMaxWidth:this.props.showNameMaxWidth,showPersonalPagesInRoot:!c('BizSiteIdentifier.brands').isBizSite(),suppressed:this.props.suppressed,user:c('getObjectValues')(this.state.actorData)[0]})),l));},componentDidMount:function(){this._setNux();this._setTooltip();},componentDidUpdate:function(l,m){if(this.props.actorIDs.toString()!==l.actorIDs.toString())this._fetchActorData();this._setNux();this._setTooltip();if(this.state.nuxShown&&!m.nuxShown&&this.props.onShowNux)this.props.onShowNux();},componentWillUnmount:function(){this._canSetState=false;},_fetchActorData:function(){c('ShortProfiles').getMulti(this.props.actorIDs,function(l){if(this._canSetState)this.setState({actorData:l});}.bind(this));},_onClickSelector:function(){if(this.state.nuxShown)this._onCompleteNux();},_onClickSettings:function(){this._onCompleteNux();c('goURI')(this.props.settingsURI);},_onCompleteNux:function(){this.setState({nuxShown:false});if(this.props.onCompleteNux)this.props.onCompleteNux();},_setNux:function(){if(!this.props.nuxEnabled)return;if(this.props.showNuxWithoutHover){this.setState({nuxShown:true});}else if(this.props.nuxHoverContext&&!this._hoverListener)this._hoverListener=c('tidyEvent')(c('Event').listen(this.props.nuxHoverContext,'mouseenter',function(){c('Bootloader').loadModules(["ActorSelectorNUXLayer.react"],c('emptyFunction'),'ActorSelector.react');var l=setTimeout(function(){this._hoverListener.remove();if(this.props.nuxEnabled)this.setState({nuxShown:true});}.bind(this),j),m=c('tidyEvent')(c('Event').listen(this.props.nuxHoverContext,'mouseleave',function(){clearTimeout(l);m.remove();}));}.bind(this)));},_setTooltip:function(){if(!this.refs.selector)return;var l=this.state.actorData[this.props.selectedActorID];if(!l)return;if(!this.props.tooltipConstructor)return;c('TooltipData').set(c('ReactDOM').findDOMNode(this.refs.selector),this.props.tooltipConstructor(l.name),'above','right');}});f.exports=k;},null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;},null);
__d('UFICommentLogger',['UFICommentTypedLogger'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(l,m){c('MarauderLogger').log('comment_vpv',undefined,null,'comment',m);if(!h.has(l))h.set(l,new (c('Set'))());h.get(l).add(m);}function j(l,m){if(h.has(l))return h.get(l).has(m);return false;}var k={logVPV:i,hasLoggedVPV:j};f.exports=k;},null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('ReactDispatcher_DEPRECATED');},null);
__d('UFISharedDispatcher',['invariant','ReactDispatcher_DEPRECATED','UFIActionTypes'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();function k(m,n){return Object.values(n).indexOf(m)>=0;}i=babelHelpers.inherits(l,c('ReactDispatcher_DEPRECATED'));j=i&&i.prototype;l.prototype.dispatch=function(m){'use strict';if(k(m.type,c('UFIActionTypes').INSTANCE)){!m.instanceID?h(0):void 0;}else if(k(m.type,c('UFIActionTypes').STORY))!m.ftentidentifier?h(0):void 0;j.dispatch.call(this,m);};function l(){'use strict';i.apply(this,arguments);}f.exports=new l();},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={cancel:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.CANCEL,instanceid:i};},retrySubmit:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,comment:i};},submitEdit:function(i,j,k){return {type:c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,comment:i,commentData:j,target:k};},submitNew:function(i,j,k){return {type:c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,comment:i,target:j,replyCommentID:k,timestamp:Date.now()};},typingChange:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,state:i};}};f.exports=h;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={changeReaction:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.CHANGE_REACTION,comment:i,reactionType:j,target:k};},edit:function(i){return {type:c('UFIActionTypes').COMMENT.EDIT,comment:i};},remove:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.REMOVE,comment:i,target:j,onConfirm:k};},removePreview:function(i,j){return {type:c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,comment:i,target:j};},toggleLike:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_LIKE,comment:i,like:!i.hasviewerliked,target:j};},togglePin:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_PIN,comment:i,target:j};},translate:function(i,j){return {type:c('UFIActionTypes').COMMENT.TRANSLATE,comment:i,target:j};},markAsSpam:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:i,target:j};},markAsNotSpam:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:i,target:j};},inlineBan:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:i,target:j,ownerid:k};},undoInlineBan:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:i,target:j,ownerid:k};},embed:function(i){return {type:c('UFIActionTypes').COMMENT.EMBED,comment:i};},showConstituentTitle:function(i){return {type:c('UFIActionTypes').COMMENT.SHOW_CONSTITUENT_TITLE,comment:i};},hideConstituentTitle:function(i){return {type:c('UFIActionTypes').COMMENT.HIDE_CONSTITUENT_TITLE,comment:i};}};f.exports=h;},null);
__d('UFIInstanceAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={changeOrderingMode:function(i,j){return {type:c('UFIActionTypes').INSTANCE.CHANGE_ORDER_MODE,instanceID:i,mode:j};},toggleComments:function(i){return {type:c('UFIActionTypes').INSTANCE.TOGGLE_COMMENTS,instanceID:i};}};f.exports=h;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;c('UFICentralUpdates').didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);},updateStateFields:function(k,l,m){var n=this.getKeyForInstance(k,l)||{};n=babelHelpers['extends']({},n,m);this.updateState(k,l,n);}};f.exports=j;},null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','randomInt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j={};function k(ca){return ca in j?j[ca]:ca;}function l(ca,da){ca.forEach(function(ea){var fa=ea.ftentidentifier,ga=c('UFIConstants').UFIPayloadSourceType,ha=ea.clientid,ia=false,ja=babelHelpers['extends']({},ea);if(ha){delete ja.clientid;ia=c('ClientIDs').isExistingClientID(ha);if(ia&&j[ha]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ea.id).log();return;}}if(da===ga.LIVE_SEND||da===ga.USER_ACTION||da===ga.ENDPOINT_ADD_COMMENT||da===ga.ENDPOINT_EDIT_COMMENT)ja.isunseen=true;if(da===ga.LIVE_SEND)ja.islive=true;if(da===ga.ENDPOINT_COMMENT_FETCH||da===ga.ENDPOINT_ID_COMMENT_FETCH)ja.fromfetch=true;if(ia&&i[ha]){if(i[ha].ufiinstanceid)c('UFIInstanceState').updateStateField(i[ha].ufiinstanceid,'locallycomposed',ea.id,true);ja.ufiinstanceid=i[ha].ufiinstanceid;j[ha]=ea.id;i[ea.id]=i[ha];delete i[ha];c('UFICentralUpdates').didUpdateComment(ha);}ba.setComment(ea.id,new (c('ImmutableObject'))(ja));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(fa);});}function m(ca,da){for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];switch(fa.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ba.getComment(fa.entidentifier))n(fa.clientid,fa.entidentifier,fa.hasviewerliked,fa.likecount,da);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:n(fa.clientid,fa.commentid,fa.viewerliked,fa.likecount,da);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:o(fa);break;case c('UFIConstants').UFIActionType.TOGGLE_PIN:p(fa.newcommenttoken,fa.oldcommenttoken);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(fa);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(fa);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:v(fa);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:w(fa);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:x(fa);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(fa);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(fa);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:z(fa);break;}}}function n(ca,da,ea,fa,ga){var ha=ba.getComment(da);if(ha){var ia={},ja=ca&&c('ClientIDs').isExistingClientID(ca);if(!ja){ia.hasviewerliked=ea;ia.likecount=fa;}if(ga===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(ja).setCommentID(da).log();ia.likeconfirmhash=c('randomInt')(0,1024);aa(da,ia);}}function o(ca){var da=ba.getComment(ca.commentid);if(da){var ea={};if(ca.clientid&&c('ClientIDs').isExistingClientID(ca.clientid)&&ca.viewerreaction!==da.viewerreaction)return;ea.hasviewerliked=ca.hasviewerliked;ea.likecount=ca.likecount;ea.reactioncount=ca.reactioncount;ea.reactioncountmap=ca.reactioncountmap;ea.reactioncountreduced=ca.reactioncountreduced;ea.viewerreaction=ca.viewerreaction;aa(ca.commentid,ea);}}function p(ca,da){aa(ca,{});aa(da,{});}function q(ca){var da=ba.getComment(ca.commentid);if(da&&ca.hasviewerliked===da.hasviewerliked){var ea={likecount:ca.likecount,likeconfirmhash:c('randomInt')(0,1024)};aa(ca.commentid,ea);}}function r(ca){var da=ca.commentid,ea=ba.getComment(da);if(ea){var fa={translatedbody:ca.translatedbody,translatorapp:ca.translatorapp};aa(da,fa);}}function s(ca){var da={reportLink:ca.reportLink,commenterIsFOF:ca.commenterIsFOF,userIsMinor:ca.userIsMinor,giveFeedbackLink:ca.giveFeedbackLink,reportGroupAdminLink:ca.reportGroupAdminLink};return da;}function t(ca){var da=ba.getComment(ca.commentid);y(da,c('UFIConstants').UFIStatus.DELETED);}function u(ca){var da=ba.getComment(ca.commentid);if(da&&da.status!==c('UFIConstants').UFIStatus.DELETED)y(da,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(ca){aa(ca.commentid,{attachment:null});}function w(ca){var da=ba.getComment(ca.commentid),ea=ca.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;y(da,ea);}function x(ca){aa(ca.commentid,s(ca));}function y(ca,da){aa(ca.id,{priorstatus:ca.status,status:da});}function z(ca){var da=ba.getComment(ca.commentid);if(da){var ea={constituentTitle:ca.constituentTitle};aa(ca.commentid,ea);}}function aa(ca,da){var ea=ba.getComment(ca)||new (c('ImmutableObject'))({});ba.setComment(ca,c('ImmutableObject').set(ea,da));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(ea.ftentidentifier);}var ba={getComment:function(ca){if(ca===c('UFIConstants').unavailableCommentKey)return null;return i[k(ca)];},setComment:function(ca,da){!(da instanceof c('ImmutableObject'))?h(0):void 0;i[k(ca)]=da;},resetComments:function(ca){for(var da in ca)delete i[k(da)];}};c('UFICentralUpdates').subscribe('update-comments',function(ca,da){if(da.comments&&da.comments.length)l(da.comments,da.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ca,da){if(da.actions&&da.actions.length)m(da.actions,da.payloadsource);});f.exports=ba;},6);
__d('UFIReactionsUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function(i,j,k){j=parseInt(j,10);var l=!!j,m=i.reactorids?i.reactorids.slice(0):[],n=m.indexOf(k),o=0;if(l){if(n<0){m.unshift(k);o=1;}}else if(n>-1){m.splice(n,1);o=-1;}var p=Math.max(i.reactioncount+o,0),q=i.reactioncountreduced;if(q&&!isNaN(q))q=p.toString();var r=i.reactioncountmap||{},s,t=i.viewerreaction;if(t&&r[t]){r[t]['default']=Math.max((r[t]['default']||0)-1,0);s=r[t].reduced;if(s&&!isNaN(s))r[t].reduced=r[t]['default'].toString();}if(l&&r[j]){r[j]['default']=(r[j]['default']||0)+1;s=r[j].reduced;if(s&&!isNaN(s))r[j].reduced=r[j]['default'].toString();}var u=i.userreactions;if(!u||Array.isArray(u))u={};if(l){u[k]=j;}else delete u[k];var v=i.importantreactorids||[],w=v.indexOf(k);if(l&&w===-1){v.unshift(k);}else if(!l&&w!==-1)v.splice(w,1);var x=null;if(i.reactionsentences){var y=!(t&&j);x={current:i.reactionsentences[y?'alternate':'current'],alternate:i.reactionsentences[y?'current':'alternate']};}return {importantreactorids:v,reactioncount:p,reactioncountmap:r,reactioncountreduced:q,reactionsentences:x,reactorids:m,userreactions:u,viewerreaction:j};},getReactionCountMapFromSummary:function(i){var j={};if(!i)return j;for(var k=0;k<i.length;k++){var l=i[k],m=l.feedback_reaction.key;j[m]={'default':l.reactors&&l.reactors.count,reduced:l.reactors&&l.reactors.display_count};}return j;}};f.exports=h;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={inverted:function(i){switch(i){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:case c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=h;},null);
__d('UFIPagedCommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({actorID:true});function i(j){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new (c('KeyedCallbackManager'))();this.feedbackTargetID=j;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(k){this.actorID=k.actorforpost;this.basePermalink=k.permalink;}.bind(this));}i.prototype.addOrUpdateComment=function(j){if(j.islocal){this.$UFIPagedCommentList1(j.id);}else this.$UFIPagedCommentList2(j.id,j.clientid,j.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.$UFIPagedCommentList1=function(j){this.dataSource.setResource(this.count,j);this.count++;};i.prototype.$UFIPagedCommentList2=function(j,k,l){var m=k&&c('ClientIDs').isExistingClientID(k),n=this.dataSource.getAllResources(),o={};for(var p in n){var q=n[p];o[q]=p;}if(m&&k in o){o[j]=o[k];var r=o[k];this.dataSource.setResource(r,j);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(k,Date.now());}else if(!o[j]&&k)this.$UFIPagedCommentList1(j);if(l&&j in o)this.commentPermalinks[j]=this.buildCommentPermalink(j,l,o[j]);};i.prototype.addCommentIDs=function(j,k,l){var m={};for(var n=0;n<k;n++)m[j+n]=l[n]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(m);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);return this;};i.prototype.getComments=function(j,k,l,m){var n=[];for(var o=0;o<k;o++)n.push(j+o);var p=this.dataSource.getUnavailableResourcesFromRequest(n);if(p.length){var q=Math.min.apply(Math,p),r=Math.max.apply(Math,p),s=q,t=r-q+1;if(s<this.lastRequestedOffset||s+t>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=s;this.lastRequestedLength=t;this.fetchComments(s,t,l);}}else this.dataSource.executeOrEnqueue(n,this.deferredCallback.bind(this,j,k,m));};i.prototype.fetchComments=function(j,k,l){};i.prototype.deferredCallback=function(j,k,l,m){};i.prototype.reset=function(){var j=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return j;};i.prototype.deleteComment=function(j){if(!(j in this.deletedComments)){this.deletedComments[j]=true;this.deletedCount++;}};i.prototype.updateCommentCount=function(j){this.count=j;this.deletedCount=0;return this;};i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getCommentCount=function(){return this.count;};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};i.prototype.getBasePermalink=function(){return this.basePermalink;};i.prototype.buildCommentPermalink=function(j,k,l){};i.prototype.getPermalinkForComment=function(j){return this.commentPermalinks[j];};i.isValidContextPropertyForReset=function(j){return j in h;};f.exports=i;},null);
__d('UFIReplyCommentList',['ActorURI','getObjectValues','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={},k=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(l,c('UFIPagedCommentList'));i=h&&h.prototype;l.getCommentList=function(n,o,p){if(!j[o])j[o]={};if(!j[o][p]){var q=new l(n,o,p),r=l.getReplyListsForParentCommentID(o);if(r.length)q.updateCommentCount(r[0].getCommentCount());j[o][p]=q;}return j[o][p];};l.getReplyListsForParentCommentID=function(n){return c('getObjectValues')(j[n]||{});};l.resetWithContext=function(n,o,p,q){var r=j[o][q];if(!r)return;r.reset();for(var s in p)if(this.isValidContextPropertyForReset(s))r[s]=p[s];};function l(n,o,p){i.constructor.call(this,n);this.parentCommentID=o;this.containerOrderingMode=p;}l.prototype.fetchComments=function(n,o,p){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:o,is_reply:true});var q={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[n],lengths:[o],feed_context:p?p.feedContext:null,numpagerclicks:p?p.numPagerClicks:null,containerorderingmode:this.containerOrderingMode};if(!p||!p.viewAs)q[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',q);};l.prototype.deferredCallback=function(n,o,p,q){var r={};for(var s=0;s<o;s++){var t=c('UFIComments').getComment(q[n+s]);if(t)r[n+s]=t;}p(r);};l.prototype.reset=function(){var n=i.reset.call(this),o={};for(var p in n){var q=n[p];o[q]=true;}c('UFIComments').resetComments(o);};l.prototype.getParentCommentID=function(){return this.parentCommentID;};l.prototype.buildCommentPermalink=function(n,o,p){if(!this.basePermalink)return null;var q=this.getParentCommentID().split("_"),r=o;if(q.length===2){r=q[1];}else k.error("Bad reply comment ID: "+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:r,reply_comment_id:o}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function m(n){var o=c('UFIComments').getComment(n.commentid),p=o.id,q=o.parentcommentid;if(!q)return;if(o.status!==c('UFIConstants').UFIStatus.DELETED&&o.status!==c('UFIConstants').UFIStatus.FAILED_ADD)l.getReplyListsForParentCommentID(q).forEach(function(r){r.deleteComment(p);});}c('UFICentralUpdates').subscribe('update-actions',function(n,o){if(o.actions&&o.actions.length)for(var p=0;p<o.actions.length;p++){var q=o.actions[p];switch(q.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:m(q);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(n,o){var p=o.commentlists;if(p&&p.replies&&Object.keys(p).length)for(var q in p.replies){var r=p.replies[q],s=r.ftentidentifier,t=r.containerorderingmode;l.getCommentList(s,q,t).addCommentIDs(r.range.offset,r.range.length,r.values).updateCommentCount(r.count);}});c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){var q=p.parentcommentid;if(!q)return;l.getReplyListsForParentCommentID(q).forEach(function(r){r.addOrUpdateComment(p);});});});f.exports=l;},6);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIComments','UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();i.$UFIToplevelStreamedCommentList1=new (c('Map'))();function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){!(j===0)?h(0):void 0;var n={};for(var o=0;o<Math.min(k,this.commentIDs.length);++o){var p=c('UFIComments').getComment(this.commentIDs[this.commentIDs.length-1-o]);if(p)n[o]=p;}m(n);};i.prototype.$UFIToplevelStreamedCommentList2=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.addOrUpdateComment=function(j,k){var l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.islocal){for(m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===j.id)return;this.commentIDs.push(j.id);this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m===j){this.deletedCount+=1;}else k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;};i.getCommentList=function(j){if(!i.$UFIToplevelStreamedCommentList1.has(j))i.$UFIToplevelStreamedCommentList1.set(j,new i(j));var k=i.$UFIToplevelStreamedCommentList1.get(j);!k?h(0):void 0;return k;};i.getExistingCommentList=function(j){return i.$UFIToplevelStreamedCommentList1.get(j);};i.resetCommentListForFeedbackTargetID=function(j){var k=i.getExistingCommentList(j);if(!k)return;var l=k.$UFIToplevelStreamedCommentList2(),m={};for(var n=0;n<l.length;++n)m[l[n]]=true;c('UFIComments').resetComments(m);};c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid),n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentList(o).deleteComment(n);});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;k.comments.forEach(function(l){if(l.parentcommentid)return;i.getCommentList(l.ftentidentifier).addOrUpdateComment(l,!!k.isstreaming);});});f.exports=i;},null);
__d('UFIToplevelPagedCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','UFIToplevelStreamedCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('UFIPagedCommentList'));i=h&&h.prototype;k.getCommentList=function(m,n){if(!j[m])j[m]={};if(!j[m][n]){var o=new k(m,n),p=k.getCommentListsForFeedbackTargetID(m);if(p.length)o.updateCommentCount(p[0].getCommentCount());j[m][n]=o;}return j[m][n];};k.getCommentListsForFeedbackTargetID=function(m){var n=[],o=j[m]||{};for(var p in o)n.push(o[p]);return n;};k.getDisplayedCommentCountForFeedbackTargetID_UNSAFE=function(m){var n=k.getCommentListsForFeedbackTargetID(m),o=n.length?n[0].getDisplayedCommentCount():null,p=c('UFIToplevelStreamedCommentList').getExistingCommentList(m),q=p?p.getDisplayedCommentCount():null;if(o===null&&q===null)return null;return Math.max(o,q);};k.resetCommentListsForFeedbackTargetID=function(m){if(!j[m])return;var n={};for(var o in j[m]){var p=j[m][o],q=p.reset();for(var r in q){var s=q[r];n[s]=true;}}c('UFIComments').resetComments(n);};k.resetCommentListsWithContext=function(m,n){if(!j[m])return;var o={};for(var p in j[m]){var q=j[m][p];for(var r in n)if(this.isValidContextPropertyForReset(r))q[r]=n[r];var s=q.reset();for(var t in s){var u=s[t];o[u]=true;c('UFIReplyCommentList').resetWithContext(m,u,n,p);}}c('UFIComments').resetComments(o);};function k(m,n){i.constructor.call(this,m);this.orderReversed=false;if(c('UFICommentOrdering').inverted(n))this.orderReversed=true;this.orderingMode=n;this.clientHasAll=false;}k.prototype.fetchComments=function(m,n,o){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:false});var p={ft_ent_identifier:this.feedbackTargetID,viewas:o&&o.viewAs?o.viewAs+'':null,source:o&&o.feedbackSource,offset:m,length:n,orderingmode:this.orderingMode,feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null};switch(this.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:p.clientcommentcount=this.count;}if(!o||!o.viewAs)p[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',p);};k.prototype.deferredCallback=function(m,n,o,p){var q={},r=m,s=m+n-1;for(var t=0;t<n;t++){var u=this.orderReversed?s-t:r+t,v=c('UFIComments').getComment(p[u]);if(v)q[m+t]=v;}o(q);};k.prototype.getOrderingMode=function(){return this.orderingMode;};k.prototype.setClientHasAll=function(m){this.clientHasAll=m;return this;};k.prototype.getClientHasAll=function(){return this.clientHasAll;};k.prototype.buildCommentPermalink=function(m,n,o){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:n}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function l(m){var n=c('UFIComments').getComment(m.commentid),o=n.id,p=n.ftentidentifier,q=n.parentcommentid;if(q)return;if(m.islocal||n.status!==c('UFIConstants').UFIStatus.DELETED&&n.status!==c('UFIConstants').UFIStatus.FAILED_ADD)k.getCommentListsForFeedbackTargetID(p).forEach(function(r){r.deleteComment(o);});}c('UFICentralUpdates').subscribe('update-actions',function(m,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var p=n.actions[o];switch(p.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:l(p);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(m,n){var o=n.commentlists;if(o&&o.comments&&Object.keys(o).length)for(var p in o.comments)for(var q in o.comments[p]){var r=o.comments[p][q],s=k.getCommentList(p,q).addCommentIDs(r.range.offset,r.range.length,r.values);s.setClientHasAll(!!r.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(m,n){if(n.comments&&n.comments.length)n.comments.forEach(function(o){if(o.parentcommentid)return;var p=o.ftentidentifier;k.getCommentListsForFeedbackTargetID(p).forEach(function(q){q.addOrUpdateComment(o);});});});c('UFICentralUpdates').subscribe('update-feedback',function(m,n){if(n.feedbacktargets&&n.feedbacktargets.length)n.feedbacktargets.forEach(function(o){var p=o.entidentifier,q=o.defaultcommentorderingmode,r={};if(q)r[q]=true;if(o.orderingmodes)o.orderingmodes.forEach(function(t){r[t.value]=true;});for(var s in r)k.getCommentList(p,s).updateCommentCount(o.commentcount);});});f.exports=k;},6);
__d("XConstituencyTitleEditVisibilityDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/edit_comment_visibility\/",{ft_id:{type:"FBID",required:true},action_type:{type:"Enum",required:true,enumType:1},source:{type:"Enum",required:true,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d("XConstituencyTitleEnableController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/enable\/",{});},null);
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFICommentReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});},null);
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});},null);
__d("XUFITogglePinCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/comment\/pin\/",{});},null);
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionsUtils','MercuryServerDispatcher','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentLikeController','XUFICommentReactionController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFIReactionController','XUFITogglePinCommentAsyncController','XUFITranslateCommentController','XUFITypingIndicatorController','XStickerAssetController','collectDataAttributes','emptyFunction','ifRequired','UnicodeBidi'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j;c('requireWeak')('StickerAssetType',function(na){j=na;});var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function(na,oa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(pa){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(na,{actorID:oa});c('UFIToplevelStreamedCommentList').resetCommentListForFeedbackTargetID(na);c('UFICentralUpdates').inform('actor-changed',{actorID:oa});var qa={from_actor_id:pa.actorforpost,ft_ent_identifier:na};qa[c('ActorURI').PARAMETER_ACTOR]=oa;var ra=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ra,qa);});},changeCommentLike:function(na,oa,pa){var qa=c('UFIComments').getComment(na);if(qa.hasviewerliked!=oa){var ra=m(pa.target),sa=oa?1:-1,ta={commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:oa,likecount:(qa.likecount||0)+sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({comment_id:na,legacy_id:qa.legacyid,like_action:oa,ft_ent_identifier:qa.ftentidentifier,source:pa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ra,va));});}},changeCommentReaction:function(na,oa,pa){var qa=c('UFIComments').getComment(na);if(qa.viewerreaction!=oa)c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(ra){var sa=m(pa.target),ta=parseInt(oa,10)!==0,ua=[ma(qa,oa,na,ra.supportedreactions,ra.actorforpost)];if(ra.hasviewerliked!==ta){var va=ta?1:-1;ua.push({commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ta,likecount:(qa.likecount||0)+va});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ua});var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:na,legacy_id:qa.legacyid,reaction_type:oa,ft_ent_identifier:qa.ftentidentifier,source:pa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},sa,wa));});},changeCommentPin:function(na,oa){var pa=c('UFIComments').getComment(na);c('UFIFeedbackTargets').getFeedbackTarget(pa.ftentidentifier,function(qa){var ra=na,sa=qa.pinnedcommenttoken,ta=ra===sa?'UNPIN':'PIN',ua={newcommenttoken:ra,oldcommenttoken:sa,newpinstate:ta,actiontype:c('UFIConstants').UFIActionType.TOGGLE_PIN,entidentifier:qa.entidentifier};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]});var va=c('XUFITogglePinCommentAsyncController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,{comment_token:na,pin_action:ta});});},_getAttachment:function(na){if(!c('UFIConfig').optimisticStickers||!na||!na.fbid)return na;var oa=void 0;c('ifRequired')('StickerImages',function(ra){return oa=ra;},c('emptyFunction'));var pa=oa?oa.getSticker(na.fbid):null;if(!pa)return na;var qa=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',na.fbid);qa=qa.setEnum('image_type',j&&j.IMAGE).getURI().toString();return {type:'sticker',metadata:{frameCount:pa.frameCount,framesPerCol:pa.framesPerCol,framesPerRow:pa.framesPerRow,height:pa.height,source_uri:qa,sprite_uri:pa.spriteURI,source_uri_2x:qa,sprite_uri_2x:pa.spriteURI2x||pa.spriteURI,width:pa.width}};},_getLocalComment:function(na,oa,pa,qa,ra){var sa=c('ClientIDs').getNewClientID(),ta=c('UnicodeBidi').isDirectionLTR(pa)?'ltr':'rtl',ua=this._getAttachment(ra.attachedsticker);return {ftentidentifier:oa,body:{text:pa,dir:ta},author:na.actorforpost,id:sa,islocal:true,ufiinstanceid:ra.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:ra.replyid,replycommentparentid:ra.replycommentparentid,attachment:ua,photo_comment:ra.attachedphoto,video_comment:ra.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}};},addComment:function(na,oa,pa,qa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(ra){var sa=this.createComment(na,oa,pa,qa);if(!sa)return;var ta={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ra.actorforpost,hasviewersubscribed:true,entidentifier:ra.entidentifier},ua={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:ra.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[sa],actions:[ta,ua]});}.bind(this));},createComment:function(na,oa,pa,qa){var ra=c('UFIFeedbackTargets').getFeedbackTargetIfExists(na);if(!ra.actorforpost)return null;var sa=this._getLocalComment(ra,na,oa,pa,qa);this._sendCommentToServer(na,ra.actorforpost,oa,pa,qa,sa.id);return sa;},_sendCommentToServer:function(na,oa,pa,qa,ra,sa){var ta=null;if(ra.reply_fbid){ta=ra.reply_fbid;}else if(ra.replyid)ta=c('UFIComments').getComment(ra.replyid).fbid;var ua;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(sa,ra.timestamp,{has_photo:!!ra.attachedphoto,has_video:!!ra.attachedvideo,has_sticker:!!ra.attachedsticker,is_reply:!!ra.replyid});var va={};va[c('ActorURI').PARAMETER_ACTOR]=oa;var wa=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({ft_ent_identifier:na,comment_text:qa,source:ra.source,client_id:sa,session_id:c('ChannelClientID').getID(),reply_fbid:ta,parent_comment_id:ra.parent_comment_id||ra.replyid,reply_comment_parent_id:ra.replycommentparentid,rootid:ra.rootid,clp:ua,attached_sticker_fbid:ra.attachedsticker?ra.attachedsticker.fbid:0,attached_photo_fbid:ra.attachedphoto?ra.attachedphoto.fbid:0,attached_video_fbid:ra.attachedvideo?ra.attachedvideo.fbid:0,feedback_referrer:ra.feedbackReferrer,feed_context:ra.feedcontext,video_time_offset:ra.videoTimeOffset,is_markdown:ra.isMarkdown},m(ra.target),va));},_hasCommentTextChanged:function(na,oa){return na.body&&na.body.text!=oa;},_hasCommentPhotoChanged:function(na,oa){return (na||oa)&&!(na&&oa)||na&&oa&&na.fbid!=oa.fbid;},_hasCommentVideoChanged:function(na,oa){return (na||oa)&&!(na&&oa)||na&&oa&&na.fbid!=oa.fbid;},_hasCommentStickerChanged:function(na,oa){return (na||oa)&&!(na&&oa)||na&&na.type=="sticker"&&oa&&na.fbid!=oa.fbid;},editComment:function(na,oa,pa,qa){var ra=m(qa.target),sa=c('UFIComments').getComment(na),ta=this._hasCommentTextChanged(sa,oa)||this._hasCommentPhotoChanged(sa.photo_comment,qa.attachedPhoto)||this._hasCommentStickerChanged(sa.attachment,qa.attachedSticker)||this._hasCommentVideoChanged(sa.video_comment,qa.attachedVideo);sa=c('ImmutableObject').set(sa,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:oa},editnux:null,attachment:qa.attachedSticker,photo_comment:qa.attachedPhoto,video_comment:qa.attachedVideo});if(ta)sa=c('ImmutableObject').set(sa,{originalTimestamp:sa.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({ft_ent_identifier:sa.ftentidentifier,comment_text:pa,source:qa.source,comment_id:sa.id,parent_comment_id:sa.parentcommentid,attached_sticker_fbid:qa.attachedSticker?qa.attachedSticker.fbid:0,attached_photo_fbid:qa.attachedPhoto?qa.attachedPhoto.fbid:0,attached_video_fbid:qa.attachedVideo?qa.attachedVideo.fbid:0},ra,va));});},translateComment:function(na,oa){var pa=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(pa,{ft_ent_identifier:na.ftentidentifier,comment_ids:[na.id],source:oa.source});},setHideAsSpam:function(na,oa,pa){var qa=m(pa.target),ra=c('UFIComments').getComment(na),sa={commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:na,spam_action:oa,ft_ent_identifier:ra.ftentidentifier,source:pa.source},qa,ua));});},removeComment:function(na,oa){var pa=m(oa.target),qa=c('UFIComments').getComment(na),ra={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:na,islocal:true,oneclick:oa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(sa){var ta={};ta[c('ActorURI').PARAMETER_ACTOR]=sa.actorforpost;var ua=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,babelHelpers['extends']({comment_id:qa.id,comment_legacyid:qa.legacyid,ft_ent_identifier:qa.ftentidentifier,one_click:oa.oneclick,source:oa.source,client_id:c('ClientIDs').getNewClientID()},pa,ta));});},banUser:function(na,oa,pa,qa){var ra=pa?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:oa,commenter_id:na.author,action:ra,comment_id:na.id,client_side:true});},changeReaction:function(na,oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(qa){var ra=[la(qa,oa)],sa=parseInt(oa,10)!==0;if(qa.hasviewerliked!==sa){var ta=sa?1:-1;ra.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:qa.actorforpost,hasviewerliked:sa,likecount:(qa.likecount||0)+ta,entidentifier:na,likesentences:{current:qa.likesentences.alternate,alternate:qa.likesentences.current}});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ra});var ua=m(pa.target),va={};va[c('ActorURI').PARAMETER_ACTOR]=qa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:na,reaction_type:oa,root_id:pa.rootid,session_id:c('ChannelClientID').getID(),source:pa.source,feedback_referrer:pa.feedbackReferrer},va,ua));});},changeSubscribe:function(na,oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(qa){var ra=m(pa.target);if(qa.hasviewersubscribed!==oa){var sa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:oa,entidentifier:na};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});var ta={};ta[c('ActorURI').PARAMETER_ACTOR]=qa.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:oa,ft_ent_identifier:na,source:pa.source,client_id:c('ClientIDs').getNewClientID(),rootid:pa.rootid,comment_expand_mode:pa.commentexpandmode},ra,ta));}});},fetchSpamComments:function(na,oa,pa,qa){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:na,viewas:qa,comment_ids:oa,parent_comment_id:pa,source:null});},hideConstituentTitle:function(na){var oa=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(oa).setMethod('POST').setData({ft_id:na.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:na.id}).send();},showConstituentTitle:function(na){var oa=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',na.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',na.id).getURI();new (c('AsyncRequest'))(oa).send();},removePreview:function(na,oa){var pa=m(oa.target),qa={commentid:na.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[qa]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:na.id,ft_ent_identifier:na.ftentidentifier,source:oa.source},pa));},typingChange:function(na,oa){new (c('AsyncRequest'))(c('XUFITypingIndicatorController').getURIBuilder().setString('feedback_id',na).setEnum('update',oa?'start':'stop').getURI()).send();}};function m(na){if(!na)return {ft:{}};var oa={ft:c('collectDataAttributes')(na,['ft']).ft};c('Nectar').addModuleData(oa,na);return oa;}function n(na){c('AsyncResponse').defaultErrorHandler(na);}function o(na){var oa=na.request.data;c('AsyncResponse').defaultErrorHandler(na);var pa=oa.client_id||oa.comment_id,qa=c('UFIComments').getComment(pa),ra=qa.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;qa=c('ImmutableObject').setDeep(qa,{status:ra,allowRetry:p(na),body:{mentionstext:oa.comment_text,mentionsphoto:qa.photo_comment,mentionsvideo:qa.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}function p(na){var oa=na.getError();if(na.isBlockedAction())return false;if(na.silentError)return true;if(oa===1357012||oa===1357006)return false;return true;}function q(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);qa=c('ImmutableObject').set(qa,{status:qa.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}function r(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);if(oa.like_action===qa.hasviewerliked){var ra=qa.hasviewerliked?-1:1,sa={commentid:pa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!qa.hasviewerliked,likecount:(qa.likecount||0)+ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});}c('AsyncResponse').defaultErrorHandler(na);}function s(na){c('AsyncResponse').defaultErrorHandler(na);}function t(na){var oa=na.request.data,pa=oa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(pa,function(qa){if(qa.hasviewerliked===oa.like_action){var ra=qa.hasviewerliked?-1:1,sa={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:qa.actorforpost,hasviewerliked:!qa.hasviewerliked,likecount:(qa.likecount||0)+ra,entidentifier:pa,likesentences:{current:qa.likesentences.alternate,alternate:qa.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});}});c('AsyncResponse').defaultErrorHandler(na);}function u(na){var oa=na.request.data,pa=oa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(pa,function(qa){if(qa.hasviewersubscribed===oa.subscribe_action){var ra={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:!qa.hasviewersubscribed,entidentifier:pa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});c('AsyncResponse').defaultErrorHandler(na);}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:ja,batch_function:ka},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var y=c('XUFICommentLikeController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:ha,batch_function:ka};var z=c('XUFICommentReactionController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ha,batch_function:ka};var aa=c('XUFIHideCommentController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var ba=c('XUFILikeController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:ia,batch_function:ka};var ca=c('XUFIEditCommentController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var da=c('XUFITranslateCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ea=c('XUFIActorChangeController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE};var fa=c('XUFIReactionController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ga=c('XUFITogglePinCommentAsyncController').getURIBuilder().getURI();v[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ha(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier&&na.comment_id==oa.comment_id;}function ia(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier;}function ja(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier;}function ka(na,oa){return oa;}function la(na,oa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:na.actorforpost,entidentifier:na.entidentifier},c('UFIReactionsUtils').getReactionData(na,oa,na.actorforpost));}function ma(na,oa,pa,qa,ra){var sa={};for(var ta=0;ta<qa.length;ta++){var ua=qa[ta],va=na.reactioncountmap[ua];sa[ua]={'default':va?va['default']:0,reduced:va?va.reduced:'0'};}var wa=c('UFIReactionsUtils').getReactionData({viewerreaction:na.viewerreaction,reactioncount:na.reactioncount,reactioncountreduced:na.reactioncountreduced,reactioncountmap:sa,reactorids:na.viewerreaction?[ra]:[]},oa,ra);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:pa,hasviewerliked:!!oa,likecount:wa.reactioncountmap[1]['default'],reactioncount:wa.reactioncount,reactioncountmap:wa.reactioncountmap,reactioncountreduced:wa.reactioncountreduced,viewerreaction:oa};}f.exports=l;},null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onNewComment:function(i,j,k,l,m,n,o){c('UFIUserActions').addComment(j.ftentidentifier,k.visibleValue,k.encodedValue,{source:j.source,ufiinstanceid:j.instanceid,target:l,replyid:m,rootid:j.rootid,attachedphoto:k.attachedPhoto,attachedvideo:k.attachedVideo,attachedsticker:k.attachedSticker,feedcontext:j.feedcontext,timestamp:n,feedbackReferrer:j.feedbackReferrer,videoTimeOffset:o,isMarkdown:k.isMarkdown});c('UFIFeedbackTargets').getFeedbackTarget(j.ftentidentifier,function(p){if(i)c('Arbiter').inform(c('UFIUIEvents').Comment,{ft_id:p.entidentifier,target:l,form:i,isinverted:p.isranked||j.islivestreaming});});}};f.exports=h;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={commentsArrived:function(i,j,k){return {type:c('UFIActionTypes').STORY.COMMENTS_ARRIVED,newOffset:i,newLength:j,source:k};},pageInComments:function(i,j,k){return {type:c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,commentID:i,direction:j,nextRange:k};},showReplies:function(i,j){return {type:c('UFIActionTypes').STORY.SHOW_REPLIES,commentID:i,initiatorComment:j};},spamFetched:function(i,j,k,l){return {type:c('UFIActionTypes').STORY.SPAM_FETCHED,ftentidentifier:i,viewas:j,commentIDs:k,parentCommentID:l};},changeReaction:function(i,j,k){return {type:c('UFIActionTypes').STORY.CHANGE_REACTION,contextArgs:i,reactionType:j,target:k};},toggleReplies:function(i){return {type:c('UFIActionTypes').STORY.TOGGLE_REPLIES,commentID:i};},friendTyping:function(i,j){return {type:c('UFIActionTypes').STORY.FRIEND_TYPING,ftentidentifier:i,isTyping:j};}};f.exports=h;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/(\d{3})(?=\d)/g;function i(l){return (''+l).split('').reverse().join('');}function j(l,m){if(Math.abs(l).toString().length<c('NumberFormatConfig').minDigitsForThousandsSeparator)return l.toString();var n=i(l);return i(n.replace(h,'$1'+m));}var k={formatIntegerWithDelimiter:j,formatInteger:function(l){return j(l,c('NumberFormatConfig').numberDelimiter);}};f.exports=k;},null);
__d('UFIBlingItem.react',['cx','fbt','React','NumberFormat','UFIConfig','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:j.object.isRequired,count:j.number.isRequired,countreduced:j.string,className:j.string,iconClassName:j.string,itemKey:j.string},render:function(){var l=c('joinClasses')(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),m=c('NumberFormat').formatIntegerWithDelimiter(this.props.count,c('UFIConfig').numberDelimiter),n=m;switch(this.props.itemKey){case 'like':n=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':n=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':n=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':n=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return (c('React').createElement('span',{className:"_2u_j"},n));}});f.exports=k;},null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIConfig','UFIReactionTypes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:j.object.isRequired,'data-ft':j.string,'data-comment-prelude-ref':j.string,comments:j.number,commentsreduced:j.string,likes:j.number,likesreduced:j.string,nfb:j.number,onClick:j.func,permalink:j.string,reactionCount:j.number,reactionCountMap:j.object,reactionCountReduced:j.string,reshares:j.number,resharesreduced:j.string,readOnly:j.bool},render:function(){var l=[],m='',n=this.props,o=n.likes,p=n.likesreduced,q=n.reactionCount,r=n.reactionCountMap,s=n.reactionCountReduced;if(o||q){var t=r&&r[c('UFIReactionTypes').LIKE]['default']!==q;l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:t?q:o,countreduced:t?s:p,iconClassName:'UFIBlingBoxLikeIcon',itemKey:t?'reaction':'like',key:'like'}));m+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);m+=' ';}if(this.props.comments){var u=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)u=c('NumberFormat').formatIntegerWithDelimiter(this.props.comments,c('UFIConfig').numberDelimiter);l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:u,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));m+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);m+=' ';}if(this.props.reshares){l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));m+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}var v;if(this.props.readOnly){v=c('React').createElement('span',{'aria-label':m},l);}else{var w=this.props.contextArgs.commentajaxify;v=c('React').createElement('a',{ajaxify:w,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':m,onClick:this.props.onClick,rel:w?'dialog':'ignore'},l);}return v;}});f.exports=k;},null);
__d('UFIPrivateReplyIndicator.react',['fbt','PagesPrivateReplyConstants','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('PagesPrivateReplyConstants').Status;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED;};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return (c('React').createElement('span',null,h._("Page responded privately")));return null;};function l(){i.apply(this,arguments);}f.exports=l;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getDialogURI:function(i,j){return c('ActorURI').create(c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).setEnum('reaction_type',j).getURI(),i.actorforpost);},getPageURI:function(i){return c('ActorURI').create(c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).getURI(),i.actorforpost);}};f.exports=h;},null);
__d('sortReactionTypes',['UFIReactionTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;},null);
__d('UFIReactionsBlingTokens.react',['cx','fbt','Bootloader','BanzaiLogger','Event','JSResource','RTLKeys','React','ReactDOM','UFICommentAction','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIReactionsProfileBrowserUtils','UFIStoryAction','joinClasses','sortReactionTypes'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=null,n=300;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p,q){'use strict';k.constructor.call(this);this.onFocus=this.onFocus.bind(this);this.onFocusIn=this.onFocusIn.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.state={active:null,pressed:null,selectedIndex:-1,reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap,p.max)};}o.prototype.componentDidUpdate=function(){'use strict';if(this.state.selectedIndex>-1)c('ReactDOM').findDOMNode(this.refs[this.state.selectedIndex]).focus();};o.prototype.componentWillReceiveProps=function(p){'use strict';if(p.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({active:null});this.setState({reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap,p.max)});};o.prototype.getReactionTypes=function(p,q){'use strict';var r=c('sortReactionTypes')(p,false).filter(function(s){return (c('UFIReactionTypes').reactions[s]&&p[s]['default']);});if(q)r=r.slice(0,q);return r;};o.prototype.onFocusIn=function(event){'use strict';if(!this.refs.tokens.contains(event.target)){this.setState({selectedIndex:-1});if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}}};o.prototype.onFocus=function(event){'use strict';if(event.target===this.refs.tokens){this.setState({selectedIndex:0});if(!this.focusInListener)this.focusInListener=c('Event').listen(document.documentElement,'focusin',this.onFocusIn.bind(this));}};o.prototype.onMouseEnter=function(p){'use strict';if(!m)c('Bootloader').loadModules(["UFIReactionsTooltipImpl.react"],function(q){m=q;this.forceUpdate();}.bind(this),'UFIReactionsBlingTokens.react');this.setState({active:p});};o.prototype.onKeyDown=function(event){'use strict';switch(event.keyCode){case c('RTLKeys').RETURN:if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}break;case c('RTLKeys').TAB:this.setState({selectedIndex:0});break;case c('RTLKeys').getLeft():case c('RTLKeys').getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===c('RTLKeys').getLeft()?-1:1),this.state.reactionTypes.length-1))});break;}};o.prototype.onTokenClick=function(p,event){var q=this;'use strict';var r=this.props.feedback,s=event.currentTarget,t=c('UFIReactionTypes').reactions[p]&&c('UFIReactionTypes').reactions[p].name;if(c('UFIConfig').reactionsHasDirectReactTokens){(function(){q.setState({pressed:p});var u=q.props.feedback.viewerreaction;if(u===p)p=c('UFIReactionTypes').NONE;var v=void 0;if(q.props.comment){v=c('UFICommentAction').changeReaction(q.props.comment,p,event.target);}else v=c('UFIStoryAction').changeReaction(q.props.contextArgs,p,event.target);setTimeout(function(){this.context.dispatch(v);this.setState({pressed:null});}.bind(q),n);})();}else (function(){var u=c('UFIReactionsProfileBrowserUtils').getDialogURI(r,p);c('Bootloader').loadModules(["AsyncDialog"],function(v){v.bootstrap(u.toString(),s,'dialog');},'UFIReactionsBlingTokens.react');event.preventDefault();})();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'token',target_subtype:t});};o.prototype.renderToken=function(p,q){'use strict';var r=this.props.feedback,s=i._("{reduced_count} {reaction_type}",[i.param('reduced_count',r.reactioncountmap[p].reduced),i.param('reaction_type',c('UFIReactionTypes').reactions[p].display_name)]),t=c('UFIConfig').reactionsHasDirectReactTokens,u=r.supportedreactions&&r.supportedreactions.indexOf(p)>=0,v={'aria-label':s,className:"_27jf"+(' '+"_3emk")+(this.props.size==='13'?' '+"_26lk":'')+(t&&u?' '+"_1d4l":'')+(this.state.pressed===p?' '+"_1h_u":''),href:t?null:c('UFIReactionsProfileBrowserUtils').getPageURI(r),key:'reactionType-'+p,onClick:u?this.onTokenClick.bind(this,p):null,rel:'ignore',ref:q,role:'button',tabIndex:this.state.selectedIndex===q?0:-1},w=c('React').createElement(c('UFIReactionIconImpl.react'),{size:this.props.size,className:"_4-op",reaction:p}),x=c('React').createElement('span',{className:"_3chu"},r.reactioncountmap[p].reduced);if(c('UFIConfig').reactionsHasDirectReactTokens)return (c('React').createElement('a',babelHelpers['extends']({'data-hover':'tooltip','data-tooltip-content':c('UFIReactionTypes').reactions[p].display_name+' ('+r.reactioncountmap[p].reduced+')'},v),w,x));if(m)return (c('React').createElement(m,babelHelpers['extends']({active:this.state.active===p,feedback:r,reaction:p},v),w,x));return (c('React').createElement('a',babelHelpers['extends']({onMouseEnter:this.onMouseEnter.bind(this,p)},v),w,x));};o.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:c('joinClasses')("_3t53",this.props.className)},c('React').createElement('span',{'aria-label':i._("See who reacted to this"),className:"_3t54",onFocus:this.onFocus,onKeyDown:this.onKeyDown,ref:'tokens',role:'toolbar',tabIndex:this.state.selectedIndex>-1?-1:0},this.state.reactionTypes.map(this.renderToken,this)),this.props.children));};o.contextTypes={dispatch:l.func};o.propTypes={className:l.string,comment:l.object,contextArgs:l.object,hoistLike:l.bool,max:l.number,size:c('UFIReactionIconImpl.react').propTypes.size};o.defaultProps={className:null,hoistLike:false,size:'16'};f.exports=o;},null);
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});},null);
__d("XUFIReactionsSocialSentenceTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/sentence\/tooltip\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d('UFIReactionsSocialSentence.react',['cx','ActorURI','Bootloader','BanzaiLogger','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);this.onSentenceClick=this.onSentenceClick.bind(this);}k.prototype.$UFIReactionsSocialSentence1=function(l){'use strict';var m=l.actorforpost,n=l.entidentifier,o=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(o.getURIBuilder().setString('ft_ent_identifier',n).getURI(),m)};};k.prototype.onSentenceClick=function(event){'use strict';var l=this.props.feedback,m=event.currentTarget;c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});var n=c('UFIReactionsProfileBrowserUtils').getDialogURI(l).toString();c('Bootloader').loadModules(["AsyncDialog"],function(o){o.bootstrap(n,m,'dialog');},'UFIReactionsSocialSentence.react');event.preventDefault();};k.prototype.render=function(){'use strict';var l=c('UFIConfig').reactionsMultilineSocialSentence,m=this.props.feedback,n=m.likesentences,o=m.reactioncount,p=m.reactioncountreduced,q=m.reactionsentences,r=m.viewerreaction,s=r?o>3:o>2;if(c('UFIConfig').reactionsHasTooltipBreakdown)s=o>1;var t=null;if(s)t=this.$UFIReactionsSocialSentence1(m);var u=null;if(q&&q.current){u=q.current.text;}else if(n&&n.current){u=n.current.text;}else u=p;var v=void 0;if(u)v=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',t,u));var w=void 0;if((!l||!v)&&m.reactioncount)w=c('React').createElement('span',{'aria-hidden':v,className:"_1g5v"},c('React').createElement('span',t,m.reactioncountreduced));return (c('React').createElement('div',{className:"_ipp"+(l?' '+"_4m1f":'')},c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"_4ar- _ipn",contextArgs:this.props.contextArgs,feedback:m,max:3},c('React').createElement('a',{className:"_2x4v",href:c('UFIReactionsProfileBrowserUtils').getPageURI(m),onClick:this.onSentenceClick,rel:'ignore'},w,v))));};f.exports=k;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});},null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});},null);
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','NumberFormat','PagesPrivateReplyConstants','ProfileBrowserLink','ProfileBrowserTypes','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','UFIConfig','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileDialogController','XUFIGroupSeenByProfileBrowserController','XUFIShareTooltipController','XUIText.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'UFIReactionsBlingSocialSentence',onCommentsClick:function(event){var k=this.props.contextArgs.commentajaxify;if(k){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(k,event.currentTarget);}else this.launchDialog(k,event.currentTarget);}else if(this.props.onCommentClick)this.props.onCommentClick(event);this.logCountAction('comments','click');event.preventDefault();},onSeensClick:function(event){var k=this.props.feedback,l=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',k.entidentifier).getURI();l=c('ActorURI').create(l,k.actorforpost);this.launchDialog(l.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();},onSharesClick:function(event){var k=this.props.feedback,l=k.sharefbid||k.targetfbid,m=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:l}),k.actorforpost);this.launchDialog(m.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();},onViewsClick:function(event){this.logCountAction('views','click');},onViewsHover:function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');},launchSnowlift:function(k,l){c('Bootloader').loadModules(["PhotoSnowlift"],function(m){m.bootstrap(k,l);},'UFIReactionsBlingSocialSentence.react');},launchDialog:function(k,l){c('Bootloader').loadModules(["AsyncDialog"],function(m){m.bootstrap(k,l,'dialog');},'UFIReactionsBlingSocialSentence.react');},logCountAction:function(k,l){c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:l,target_type:'count',target_subtype:k});},renderComments:function(){var k=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!k)return null;var l=isNaN(this.props.feedback.commentcountreduced)&&!k?this.props.feedback.commentcountreduced:c('NumberFormat').formatIntegerWithDelimiter(this.props.commentCount,c('UFIConfig').numberDelimiter),m=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':m,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',l),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));},renderSeens:function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var k=this.props.feedback,l=k.seencount,m=void 0;if(k.seenbyall){m=i._("Seen by everyone");}else if(l===1){m=i._("Seen by 1");}else m=i._("Seen by {count}",[i.param('count',l)]);var n=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:k.entidentifier}),o=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',k.entidentifier).getURI();o=c('ActorURI').create(o,k.actorforpost);return (c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:o,'data-hovercard':n.toString(),className:"_ipm",onClick:this.onSeensClick},m)));},renderShares:function(){if(!this.props.feedback.sharecount)return null;var k=this.props.feedback.sharefbid||this.props.feedback.targetfbid,l=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:k}),this.props.feedback.actorforpost),m=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':m,href:l,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));},renderViews:function(){var k=this.props.contextArgs.viewCount,l=null;if(this.canSeeConsolidatedTooltip())l=this.renderViewsTooltip();if(!k)return null;return (c('React').createElement(c('Tooltip.react'),{tooltip:l,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](k==='1'?'View':'Views',{View:'View',Views:'Views'})])));},canSeeConsolidatedTooltip:function(){var k=this.props.contextArgs.postViewCount,l=this.props.contextArgs.totalPosts,m=this.props.contextArgs.otherPostsViewCount;return !!l&&l>1&&!!k&&!!m;},renderViewsTooltip:function(){var k=this.props.contextArgs.totalPosts,l=this.props.contextArgs.postViewCount,m=this.props.contextArgs.otherPostsViewCount,n=k-1;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video Posted {number of posts} Times",[i.param('number of posts',k)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',l),i['enum'](l==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',m),i['enum'](m==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',n),i['enum'](n===1?'post':'posts',{post:'post',posts:'posts'})])));},renderPrivateReply:function(){var k=this.props.feedback.messagereplycontext;if(!k||k.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return (c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:k.status})));},render:function(){return (c('React').createElement('div',{className:"_ipn"},c('React').createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),this.renderSeens(),this.renderViews(),this.renderPrivateReply()),c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:this.props.feedback,contextArgs:this.props.contextArgs})));}});f.exports=j;},null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelPagedCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k.commentajaxify=k.commentredirecturi;}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=k.feedbackMode==='none'&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1(false);}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return (c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r}));}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced;}return (c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly}));}};j.prototype.$UFIBling1=function(k){c('UFIInstanceState').updateStateFields(this.props.contextArgs.instanceid,'inlineShare',{active:k,toggling:true});};f.exports=j;},null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentActionLink',propTypes:{contextArgs:h.object.isRequired},render:function(){var j=this.props.contextArgs,k=j.commentajaxify,l=j.commentredirecturi,m=j.instanceid,n=j.ufiexperiments,o=j.showtheaterforcomment,p=j.loggedOutLinkConfig;if(!k&&p&&p.showCommentLink)k=p.commentAjaxifyURI;if(k){return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,ajaxify:k,rel:o?'theater':'dialog'}));}else if(l)return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,href:l,rel:o?'theater':''}));return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,onClick:function(event){event.preventDefault();c('UFIInstanceState').updateStateFields(m,'inlineShare',{active:false,toggling:true});c('UFIInstanceState').updateStateFields(m,'addCommentInput',{expanded:true});}}));}});f.exports=i;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:h.instanceOf(c('UFIDispatcher')).isRequired,stores:h.object.isRequired},childContextTypes:{dispatch:h.func,stores:h.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=i;},null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null;});});},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null;});}this.subscription=i.add(function(q){this.locked=q;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove();};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null;}.bind(this),function(){this.deferred=null;}.bind(this));};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return (c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)})));};function n(){'use strict';l.apply(this,arguments);}return n;}();}.bind(this);f.exports=j;},null);
__d('UFIReactionsLinkImpl.react',['cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Deferred','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','SubscriptionsHandler','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFICommentAction','UFIStoryAction','addFocusEvents','getElementRect','onViewportChanged','shallowCompare'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConfig').reactionsFunnelLogger,n=false,o=false,p=null,q=c('React').createElement('div',null),r=150,s=c('UFIReactionTypes').reactions,t=Object.keys(s),u=20,v=c('UFIConfig').reactionsHoverDelay||500,w=750,x=c('UFIConfig').reactionsHoverThreshold||5,y=c('UFIConfig').reactionsDisableMousemoveTrigger||false,z=500,aa=5000,ba='ontouchstart' in window,ca=i._("Show more reactions"),da=new (c('Deferred'))(),ea=function(){if(!p){var ia=function(ja){p=ja;if(da){da.done(fa,fa);da.resolve();}};if(c('UFIConfig').reactionsHasStaticVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithStaticVectorIcons.react"],ia,'UFIReactionsLinkImpl.react');}else if(c('UFIConfig').reactionsHasAnimatedVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedVectorIcons.react"],ia,'UFIReactionsLinkImpl.react');}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],ia,'UFIReactionsLinkImpl.react');}},fa=function(){da=null;},ga=c('addFocusEvents')('a');j=babelHelpers.inherits(ha,c('React').Component);k=j&&j.prototype;function ha(ia,ja){'use strict';k.constructor.call(this,ia,ja);this.hideDialog=this.hideDialog.bind(this);this.maybeShowNUX=this.maybeShowNUX.bind(this);this.onClick=this.onClick.bind(this);this.onClickCapture=this.onClickCapture.bind(this);this.onContextMenu=this.onContextMenu.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onKeyboardFocus=this.onKeyboardFocus.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onReactionChange=this.onReactionChange.bind(this);this.onReactionMenuMouseEnter=this.onReactionMenuMouseEnter.bind(this);this.onReactionMouseEnter=this.onReactionMouseEnter.bind(this);this.onReactionMouseLeave=this.onReactionMouseLeave.bind(this);this.onScreenReaderTrigger=this.onScreenReaderTrigger.bind(this);this.showDialog=this.showDialog.bind(this);this.dragStartX=null;this.dragStartY=null;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();if(ba){this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchStart=this.onTouchStart.bind(this);}if(da)da.done(function(){this.forceUpdate();}.bind(this),function(){da=null;});this.state={dialogShown:false,isLongPressing:false,isMouseOver:false,isScrubbing:false,isTouchDown:false,NUXShown:false};}ha.prototype.shouldComponentUpdate=function(ia,ja){'use strict';return c('shallowCompare')(this,ia,ja);};ha.prototype.componentWillUpdate=function(ia,ja){'use strict';if(this.state.dialogShown&&!ja.dialogShown)this.$UFIReactionsLink1(this.props.reaction);};ha.prototype.componentDidUpdate=function(ia,ja){'use strict';if(!ja.dialogShown&&this.state.dialogShown){if(ba){var ka;this.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){ka=event.touches[0];}),c('Event').listen(document.documentElement,'touchmove',function(event){ka=event.touches[0];}),c('Event').listen(document.documentElement,'touchend',function(event){if(ka&&!this.refs.root.contains(document.elementFromPoint(ka.clientX,ka.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(this)));}}else if(ja.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}};ha.prototype.componentDidMount=function(){'use strict';this.initializeNux();this.$UFIReactionsLink2();};ha.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();this.nuxSubscription&&this.nuxSubscription.remove();clearTimeout(this.nuxTimeout);da&&da.reject();};ha.prototype.initializeNux=function(){'use strict';if(!this.props.nuxConfig)return;var ia=this.props.nuxConfig.nuxType;if(ia===c('ReactionNuxTypeEnum').NOTIFICATION){this.maybeShowNUX();return;}if(ia===c('ReactionNuxTypeEnum').VIEWPORT&&!n)this.initializeViewportNux();};ha.prototype.initializeViewportNux=function(){'use strict';this.nuxSubscription=c('onViewportChanged')(function(ia){clearTimeout(this.nuxTimeout);if(ia)this.nuxTimeout=setTimeout(function(){this.nuxSubscription.remove();if(!this.state.dialogShown)this.maybeShowNUX();}.bind(this),this.props.nuxConfig.viewportDuration||aa);}.bind(this),function(ia){var ja=c('getElementRect')(c('ReactDOM').findDOMNode(this.refs.root));return !(ja.bottom<ia.top||ja.top>ia.bottom||ja.right<ia.left||ja.left>ia.right);}.bind(this));};ha.prototype.maybeShowNUX=function(){'use strict';if(!n){n=true;this.setState({NUXShown:true,dialogShown:false});c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.id,'interface':'www'});}};ha.prototype.hideDialog=function(){'use strict';this.setState({dialogShown:false,isScrubbing:false});};ha.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown&&m)m.menuShow();n=true;this.setState({dialogShown:true,NUXShown:false});};ha.prototype.onClick=function(event){'use strict';var ia=this.props,ja=ia.reaction,ka=ia.suggestedReaction;if(!ja||ja===c('UFIReactionTypes').LIKE||!s[ja]){if(!ja&&this.props.nuxConfig){var la=this.props.nuxConfig.nuxType;if(la===c('ReactionNuxTypeEnum').LIKE_CLICK||la===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)this.maybeShowNUX();}var ma=ka?ka:c('UFIReactionTypes').LIKE;ja=ja?c('UFIReactionTypes').NONE:ma;this.onReactionChange(ja,event);this.$UFIReactionsLink1(ja,true);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});};ha.prototype.onClickCapture=function(event){'use strict';event.stopPropagation();this.setState({isLongPressing:false});};ha.prototype.onContextMenu=function(event){'use strict';if(this.state.isTouchDown)event.preventDefault();};ha.prototype.onDragStart=function(event){'use strict';event.preventDefault();};ha.prototype.onMouseDown=function(event){'use strict';clearTimeout(this.hoverTimeout);};ha.prototype.onMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);if(!this.state.dialogShown)this.hoverTimeout=setTimeout(this.showDialog,v);this.setState({isMouseOver:true});ea();if(!this.state.dialogShown&&m)this.logFunnelTimeout=setTimeout(function(){return m.likeButtonEnter(this.props.reaction);}.bind(this),r);};ha.prototype.onMouseMove=function(event){'use strict';if(y)return;var ia=event.clientX,ja=event.clientY;if(typeof this.hoverX==='number'&&typeof this.hoverY==='number'&&!(this.hoverX<ia+x&&this.hoverX>ia-x&&this.hoverY<ja+x&&this.hoverY>ja-x)){clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.showDialog,v);}this.hoverX=ia;this.hoverY=ja;};ha.prototype.onMouseLeave=function(event){'use strict';clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);this.hoverX=null;this.hoverY=null;if(this.state.dialogShown)this.hoverTimeout=setTimeout(this.hideDialog,w);this.setState({isMouseOver:false});};ha.prototype.onReactionMenuMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);};ha.prototype.onTouchStart=function(event){'use strict';if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}.bind(this),z);ea();}this.setState({isTouchDown:true,isLongPressing:false});};ha.prototype.onTouchEnd=function(event){'use strict';if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});};ha.prototype.onTouchMove=function(event){'use strict';if(this.state.isScrubbing)return;var ia=event.touches[0],ja=ia.clientX,ka=ia.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ja;this.dragStartY=ka;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>ja+u||this.dragStartX<ja-u||this.dragStartY>ka+u||this.dragStartY<ka-u))this.setState({isScrubbing:true});};ha.prototype.onReactionChange=function(ia,event){'use strict';this.$UFIReactionsLink1(ia);var ja=c('ReactDOM').findDOMNode(this.refs.trigger);if(m)event.target===ja?m.likeButtonClick(ia):m.reactionSelection(ia);var ka=void 0;if(this.props.comment){ka=c('UFICommentAction').changeReaction(this.props.comment,ia,ja);}else ka=c('UFIStoryAction').changeReaction({ftentidentifier:this.props.id,rootid:this.props.rootid,source:this.props.source,feedbackReferrer:this.props.feedbackReferrer},ia,ja);this.context.dispatch(ka);this.setState({dialogShown:false,isScrubbing:false});};ha.prototype.onReactionMouseEnter=function(ia,event){'use strict';if(this.reactionsHoverStartTimeMap[ia]===0)this.reactionsHoverStartTimeMap[ia]=Date.now();};ha.prototype.onReactionMouseLeave=function(ia,event){'use strict';if(this.reactionsHoverStartTimeMap[ia]){this.reactionsHoverTotalTimeMap[ia]+=Date.now()-this.reactionsHoverStartTimeMap[ia];this.reactionsHoverStartTimeMap[ia]=0;}};ha.prototype.onKeyboardFocus=function(){'use strict';this.allowKeyboardFocus=true;this.showDialog();};ha.prototype.onScreenReaderTrigger=function(){'use strict';o=true;this.allowKeyboardFocus=true;this.showDialog();};ha.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)ea();if(!p)return null;var ia=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return (c('React').createElement(p,{allowKeyboardFocus:ia,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:o,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions}));};ha.prototype.renderTrigger=function(){'use strict';var ia=this.props,ja=ia.reaction,ka=ia.suggestedReaction;if(ja&&!s[ja])ja=null;var la=ja?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,ma=void 0,na=void 0,oa=void 0,pa=void 0;if(this.props.comment){if(!ja){ma=s[c('UFIReactionTypes').LIKE].display_name;}else ma=s[ja].display_name;oa="UFILikeLink"+(' '+"UFIReactionLink")+(ja?' '+"UFILinkBright":'');pa=ja?s[ja].color:null;}else{if(!ja){ma=ka?s[ka].display_name:s[c('UFIReactionTypes').LIKE].display_name;}else ma=s[ja].display_name;if(ja&&ja!=c('UFIReactionTypes').LIKE||!ja&&ka&&ka!=c('UFIReactionTypes').LIKE)na=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw",grayscale:!ja&&!!ka,reaction:ja||ka,size:'13'});oa="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!na?' '+"_48-k":'')+(ja?' '+"UFILinkBright":'');pa=ja?s[ja].color:null;}return (c('React').createElement(ga,{'aria-pressed':!!ja,className:oa,'data-testid':la,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:p?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.state.isMouseOver?this.onMouseMove:null,onTouchEnd:ba?this.onTouchEnd:null,onTouchMove:ba?this.onTouchMove:null,onTouchStart:ba?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:pa},tabIndex:p?-1:0},na,ma));};ha.prototype.renderNUX=function(){'use strict';var ia=c('ReactDOM').findDOMNode(this.refs.root);if(!this.state.NUXShown||!ia)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:q,bootloadLoader:c('JSResource')('UFIReactionsNUX.react').__setRef('UFIReactionsLinkImpl.react'),context:ia,titleOverride:this.props.nuxConfig&&this.props.nuxConfig.titleOverride,textOverride:this.props.nuxConfig&&this.props.nuxConfig.textOverride,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey}));};ha.prototype.renderScreenReaderTrigger=function(){'use strict';if(p)return null;return (c('React').createElement('span',{role:'button',className:'accessible_elem',onClick:this.onScreenReaderTrigger,tabIndex:-1},ca));};ha.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_khz"+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX()));};ha.prototype.$UFIReactionsLink2=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};t.forEach(function(ia){this.reactionsHoverStartTimeMap[ia]=0;this.reactionsHoverTotalTimeMap[ia]=0;}.bind(this));};ha.prototype.$UFIReactionsLink1=function(ia,ja){'use strict';if(this.dialogShownTime!==0){var ka={feedback_id:this.props.id,final_reaction:ia,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:ja,time_spent:Date.now()-this.dialogShownTime};for(var la in this.reactionsHoverTotalTimeMap){var ma='time_spent_'+s[la].name.toLowerCase();ka[ma]=this.reactionsHoverTotalTimeMap[la];}c('BanzaiLogger').log('UserReactionsLoggerConfig',ka);this.$UFIReactionsLink2();}};ha.contextTypes={dispatch:l.func};ha.propTypes={id:l.string.isRequired,nuxConfig:l.object,reaction:l.number.isRequired,rootid:l.string,source:l.number,comment:l.object,supportedReactions:l.arrayOf(l.number).isRequired};f.exports=ha;},null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFILikeActionLink',contextTypes:{dispatch:h.func},propTypes:{feedback:h.object.isRequired,contextArgs:h.object.isRequired},onClick:function(event){event.preventDefault();var j=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,j?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));},render:function(){var j=this.props.feedback;if(this.props.contextArgs.hasReactions&&j.canviewerreact&&c('UFIReactionsLinkImpl.react')){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:this.props.contextArgs.ftentidentifier,nuxConfig:this.props.contextArgs.reactionsNuxConfig,reaction:j.viewerreaction,rootid:this.props.contextArgs.rootid,source:this.props.contextArgs.source,suggestedReaction:j.suggestedreaction,supportedReactions:j.supportedreactions,feedbackReferrer:this.props.contextArgs.feedbackReferrer}));}else{var k=this.props.contextArgs.loggedOutLinkConfig,l=null;if(k&&k.showLikeLink)l=k.likeAjaxifyURI;return (c('React').createElement(c('UFILikeLink.react'),{ajaxify:l,likeAction:!j.hasviewerliked,onClick:this.onClick,rel:l?'dialog':null,ufiExperiments:this.props.contextArgs.ufiexperiments}));}}});f.exports=i;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d('UFIPrivateReplyLink.react',['cx','fbt','ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('PagesPrivateReplyConstants').Status,k=c('PagesPrivateReplyConstants').Type,l=c('React').PropTypes,m=c('React').createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:l.string.isRequired,activityID:l.string.isRequired,context:l.shape({activityType:l.string.isRequired,status:l.string.isRequired,hasReplyPermission:l.bool.isRequired,pageID:l.string.isRequired,permalink:l.string}).isRequired,seeResponseLabel:l.bool.isRequired},statics:{willRender:function(n,o){if(!n)return false;if(n.hasReplyPermission&&o===n.pageID)return true;return false;}},render:function(){var n=this.props.context;if(n.hasReplyPermission&&this.props.actorID===n.pageID){if(n.status===j.REPLYABLE){return this._renderMessageLink();}else if(n.status===j.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}return null;},_renderMessageLink:function(){var n=c('ActorURI').create(c('XPagesMessagingPrivateReplyDialogController').getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (c('React').createElement(c('Link.react'),{className:"_50u0",href:n,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var n=void 0;switch(this.props.context.status){case j.EXPIRED:n=i._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[i['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case j.NOT_USER_CREATED:n=i._("Pages can't send private messages to other Pages.");break;case j.CANNOT_MESSAGE:n=i._("This person can't receive a message reply from your Page.");break;}return (c('React').createElement('span',{className:"_50u0 _50u4",'data-hover':n?'tooltip':null,'data-tooltip-content':n},this._getLabel()));},_renderSeeReplyLink:function(){return (c('React').createElement(c('Link.react'),{className:"_50u0",href:this.props.context.permalink||'#'},this.props.seeResponseLabel?i._("See Response"):this._getLabel()));},_getLabel:function(){return i._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case k.COMMENT_PAGE_POST:case k.COMMENT_WALL_POST:case k.COMMENT_REVIEW:return 'comments';case k.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=m;},null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIActionTypes','UFIReactionTypes','UFIUIEvents','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,target:k.target,feedbackReferrer:k.contextArgs.feedbackReferrer});c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});c('Arbiter').inform('inlineShare/reflow');break;}};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('UFIShareNowMenuBootloader.react',['BootloadedComponent.react','JSResource','React','UFIShareLink.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'UFIShareNowMenuBootloader',getInitialState:function(){return {openOnInit:false,focusOnInit:false,interacted:false};},render:function(){var i=this.state,j=i.openOnInit,k=i.focusOnInit,l=i.interacted,m=this.props,n=m.endpoint,o=m.endpointData,p=m.onShow,q=m.onHide,r=c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return this.setState({interacted:true,openOnInit:true});}.bind(this),onFocus:function(){return this.setState({interacted:true,focusOnInit:true});}.bind(this),onMouseOver:function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true});}.bind(this)});if(l)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIShareNowMenu.react').__setRef('UFIShareNowMenuBootloader.react'),bootloadPlaceholder:r,endpoint:n,endpointData:o,onShow:p,onHide:q,openOnInit:j,focusOnInit:k}));return r;}});f.exports=h;},null);
__d('UFIShareActionLink.react',['ActorURI','React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIShareActionLink',propTypes:{feedbackTarget:h.object,ufiInstanceID:h.string,shareURI:h.string,shareRel:h.string,shareNowMenuURI:h.string,shareLinkHref:h.string,feedbackReferrer:h.string,feedbackSource:h.number},render:function(){var j=this.props,k=j.ufiInstanceID,l=j.shareURI,m=j.shareRel,n=j.shareNowMenuURI,o=j.shareLinkHref,p=j.feedbackReferrer,q=j.feedbackSource,r=!this._getInlineShareProp('active')&&n,s={ufi_id:k,feedback_referrer:p,feedback_source:q};if(this.props.feedbackTarget){var t=this.props.feedbackTarget.actorforpost;if(t){l=c('ActorURI').create(l,t);n=new (c('URI'))(n).addQueryData('actor_id',t).toString();}}if(!r)if(o){return (c('React').createElement(c('UFIShareLink.react'),{href:o}));}else return (c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(l).addQueryData(s),rel:m,onShareClick:function(event){if(this._getInlineShareProp('loaded')){c('UFIInstanceState').updateStateFields(k,'inlineShare',{active:true,toggling:true});event.kill();}}.bind(this)}));return (c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:n,endpointData:s}));},_getInlineShareProp:function(j){var k=c('UFIInstanceState').getKeyForInstance(this.props.ufiInstanceID,'inlineShare');return !!(k&&k[j]);}});f.exports=i;},null);
__d('UFISubscribeLink.react',['fbt','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:i.bool,onClick:i.func},render:function(){var k=this.props.subscribeAction?h._("Turn On Notifications"):h._("Turn Off Notifications"),l=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (c('React').createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:l,onClick:this.props.onClick},k));}});f.exports=j;},null);
__d('UFITimelineBlingBox.react',['cx','fbt','ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:j.object.isRequired,'data-ft':j.string,'data-gt':j.string,actorid:j.any,commentOnClick:j.func,comments:j.number,commentsreduced:j.string,enableShowComments:j.bool,enableShowLikes:j.bool,feedbackFBID:j.any,likes:j.number,likesreduced:j.string,reshares:j.number,resharesreduced:j.string},render:function(){var l=[];if(this.props.likes&&this.props.enableShowLikes){var m=this._getProfileBrowserURI(),n=i._("See who likes this"),o=c('React').createElement('a',{ajaxify:m.dialog,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:m.page,key:'like',rel:'dialog',role:'button',title:n},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));l.push(o);}if(this.props.comments&&this.props.enableShowComments){var p=i._("Show comments"),q=c('React').createElement('a',{'aria-label':p,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-content':p,href:'#',key:'comment',onClick:this.props.commentOnClick},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));l.push(q);}if(this.props.reshares){var r=i._("Show shares"),s=this._getShareViewURI(),t=c('React').createElement('a',{ajaxify:s.dialog,'aria-label':r,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-content':r,href:s.page,key:'reshare',rel:'async'},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));l.push(t);}return (c('React').createElement('span',null,l));},_getItemClassName:function(l){return (l.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var l=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return l.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var l=c('ProfileBrowserTypes').LIKES,m={id:this.props.feedbackFBID,actorid:this.props.actorid},n=c('ProfileBrowserLink').constructDialogURI(l,m),o=c('ProfileBrowserLink').constructPageURI(l,m),p={dialog:n.toString(),page:o.toString()};return p;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var l=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),m=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),n={dialog:l.toString(),page:m.toString()};return n;}}});f.exports=k;},null);
__d('UFIActionLinkController',['cx','invariant','Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceAction','UFIInstanceState','UFILikeActionLink.react','UFIReactionStore','UFIShareActionLink.react','UFISharedDispatcher','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelPagedCommentList','UFIUserActions','UFIPrivateReplyLink.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l,m,n){var o=c('DOMQuery').scry(l,m)[0];if(o){var p=document.createElement('span');o.parentNode.replaceChild(p,o);p.appendChild(o);if(typeof n==='function')n(p);}else var q=c('Arbiter').subscribe('PhotoSnowlift.DATA_CHANGE',function(){c('Arbiter').unsubscribe(q);j(l,m,n);},c('Arbiter').SUBSCRIBE_NEW);}var k=function(l,m,n){this._root=l;this._contextArgs=m;this._ftFBID=n.targetfbid;this._isOnTimeline=this._isRenderingOnTimeline();this._dispatcher=new (c('UFIDispatcher'))();this._stores={UFIReactionStore:new (c('UFIReactionStore'))(this._dispatcher)};if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(n.viewercanlike||n.hasviewerliked)this._attemptInitializeLike();if(n.cancomment)this._attemptInitializeComment();if(n.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();this._attemptInitializeInlineSearchFeedback();this._attemptInitializeActorSelector();c('UFICentralUpdates').subscribe('feedback-updated',function(o,p){var q=p.updates;if(m.ftentidentifier in q)this.render();}.bind(this));c('UFICentralUpdates').subscribe('feedback-id-changed',function(o,p){var q=m.ftentidentifier,r=p.updates;if(q in r){this._contextArgs=babelHelpers['extends']({},m,{ftentidentifier:r[q]});m=this._contextArgs;}}.bind(this));c('UFICentralUpdates').subscribe('instance-updated',function(o,p){var q=p.updates[this._contextArgs.instanceid];if(q&&q.inlineShare)this.render();}.bind(this));};Object.assign(k.prototype,{_attemptInitializeBling:function(){j(this._root,'^form .uiBlingBox',function(l){this._blingRoot=l;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(l){var m=c('DOMQuery').scry(l,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=!!m;var n=c('DOMQuery').scry(l,'.fbTimelineFeedbackComments')[0];this._enableShowComments=!!n;}this._blingTimelineRoot=l;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeInlineSearchFeedback:function(){j(this._root,'^form .inline_feedback',function(l){this._inlineSearchRoot=l;if(this._dataReact)this._renderInlineSearchFeedback();}.bind(this));},_attemptInitializeActorSelector:function(){j(this._root,'^form .actor_selector',function(l){this._actorSelectorRoot=l;if(this._dataReact)this._renderActorSelector();}.bind(this));},_attemptInitializeLike:function(){j(this._root,'^form .like_link',function(l){this._likeRoot=l;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeComment:function(){j(this._root,'^form .comment_link',function(l){this._commentRoot=l;if(this._dataReady)this._renderComment();}.bind(this));},_attemptInitializeSubscribe:function(){j(this._root,'^form .unsub_link',function(l){this._subscribeRoot=l;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeMessageReply:function(){j(this._root,'^form .message_reply_action_link',function(l){this._messageReplyRoot=l;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}.bind(this));},_attemptInitializeShare:function(){j(this._root,'^form .share_action_link',function(l){this._shareRoot=l;c('CSS').addClass(this._shareRoot,"share_root");var m=c('DOMQuery').scry(this._shareRoot,'.share_action_link')[0];if(m){this._shareURI=m.getAttribute('href');this._shareRel=m.getAttribute('rel');this._shareNowMenuURI=c('DataStore').get(m,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();this._renderInlineSearchFeedback();this._renderActorSelector();},_renderBling:function(){if(this._blingRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._blingBox=c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getBling(l)),this._blingRoot);}.bind(this));},getBling:function(l){return (c('React').createElement(c('UFIBling.react'),{contextArgs:this._contextArgs,feedbackTarget:l,onCommentVisibilityChanged:function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this._contextArgs.instanceid));}.bind(this)}));},_renderTimelineBling:function(){if(this._blingTimelineRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(this.getTimelineBling(l),this._blingTimelineRoot);}.bind(this));},getTimelineBling:function(l){var m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=c('ClickPointIdentifiersDEPRECATED').getUserActionID(c('ClickPointIdentifiersDEPRECATED').types.TIMELINE_SEE_LIKERS),o=function(event){var q=c('Parent').byTag(event.target,'form');c('CommentPrelude').uncollapse(q,'action_link_timeline_bling');var r=c('DOMQuery').scry(q,'a.UFIPagerLink');if(r.length)r[0].click();event.preventDefault();},p=c('UFIToplevelPagedCommentList').getDisplayedCommentCountForFeedbackTargetID_UNSAFE(this._contextArgs.ftentidentifier);return (c('React').createElement(c('UFITimelineBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,commentOnClick:o,contextArgs:this._contextArgs,'data-ft':m,'data-gt':n,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:l.likecount,likesreduced:l.likecountreduced,reshares:l.sharecount,resharesreduced:l.sharecountreduced,actorid:l.actorid}));},_renderInlineSearchFeedback:function(){if(this._inlineSearchRoot)c('ReactDOM').render(this.getInlineSearchFeedback(),this._inlineSearchRoot);},getInlineSearchFeedback:function(){return (c('React').createElement('div',null,c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinkController')},this._contextArgs.inlineSearchFeedbackConfig))));},_renderActorSelector:function(){if(this._actorSelector)c('ReactDOM').render(this.getActorSelector(),this._actorSelectorRoot);},getActorSelector:function(){var l=this._contextArgs.actorSelectorConfig,m=l.module,n=l.props;n.nuxHoverContext=c('Parent').byTag(event.target,'form');return (c('React').createElement(m,n));},_renderLike:function(){if(this._likeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getLike(l)),this._likeRoot);}.bind(this));},getLike:function(l){return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:l,contextArgs:this._contextArgs}));},_renderComment:function(){if(this._commentRoot)this._commentLink=c('ReactDOM').render(this.getComment(),this._commentRoot);},getComment:function(){return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this._contextArgs}));},_renderMessageReply:function(){if(this._messageReplyRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._messageReplyLink=null;var m=this.getMessageReply(l);if(m)this._messageReplyLink=c('ReactDOM').render(m,this._messageReplyRoot);if(!this._messageReplyLink||!c('ReactDOM').findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';c('DOM').setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}.bind(this));},getMessageReply:function(l){if(l.messagereplycontext)return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:l.actorforpost,activityID:this._contextArgs.ftentidentifier,context:l.messagereplycontext,seeResponseLabel:false}));return null;},_renderSubscribe:function(){if(this._subscribeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._subscribeLink=c('ReactDOM').render(this.getSubscribe(l),this._subscribeRoot);}.bind(this));},getSubscribe:function(l){var m=!l.hasviewersubscribed,n=function(event){c('UFIUserActions').changeSubscribe(this._contextArgs.ftentidentifier,m,{source:this._contextArgs.source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:l.commentexpandmode});event.preventDefault();}.bind(this);return (c('React').createElement(c('UFISubscribeLink.react'),{onClick:n,subscribeAction:m}));},_renderShare:function(){if(this._shareRoot&&this._shareURI)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._shareLink=c('ReactDOM').render(this.getShare(l),this._shareRoot);}.bind(this));},getShare:function(l){return (c('React').createElement(c('UFIShareActionLink.react'),{feedbackTarget:l,ufiInstanceID:this._contextArgs.instanceid,shareURI:this._shareURI,shareRel:this._shareRel,shareNowMenuURI:this._shareNowMenuURI}));},_setInlineShareActive:function(l){c('UFIInstanceState').updateStateFields(this._contextArgs.instanceid,'inlineShare',{active:l,toggling:true});},_isRenderingOnTimeline:function(){if(this._contextArgs.source===c('UFIConstants').UFIFeedbackSourceType.PROFILE){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return l.length>0;}return false;}});f.exports=k;},null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={reveal:function(i){if(i){var j=c('ge')('content');if(j&&c('containsNode')(j,i))c('DOMScroll').ensureVisible(i,null,60,250);}}};f.exports=h;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createElement(c('XUISpinner.react'),{size:'large'}),k=c('React').createClass({displayName:'UFIActorIconContainer',propTypes:{actorID:i.string.isRequired,className:i.string},getInitialState:function(){return {actor:null};},componentWillMount:function(){this._fetchActorData();},componentDidUpdate:function(l){if(this.props.actorID!==l.actorID)this._fetchActorData();},_fetchActorData:function(){c('ShortProfiles').get(this.props.actorID,function(l){return this.setState({actor:l});}.bind(this));},render:function(){var l=this.state.actor;if(!l)return j;var m=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return (l.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:m,firstName:l.firstName,lastName:l.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:l.name,className:m,src:l.thumbSrc}));}});f.exports=k;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={START:'start',STOP:'stop'},i=10*1000;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c('destroyOnUnload')(this.destroy.bind(this));}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};j.prototype.bootloadPublisherModule=function(k){throw new Error(c('ex')('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START){l.handleStartEvent();}else if(o===h.STOP)l.handleStopEvent();}this.$AbstractCommentLiveTypingController1=l;};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=j;},null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k,'UFIAddCommentLiveTypingController');};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;},null);
__d('UFIMarkdownButton.react',['cx','fbt','Link.react','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIMarkdownButton',propTypes:{active:j.bool,onClick:j.func.isRequired},render:function(){var l=i._("Format text with Markdown");return (c('React').createElement(c('Link.react'),{className:"_r1a _45-m",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':l,'aria-label':l,onClick:this.props.onClick},c('React').createElement('div',{tabIndex:0,className:"_45-n"+(this.props.active?' '+"_45-o":'')})));}});f.exports=k;},null);
__d("XUFICommentMarkdownPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/markdown_preview\/",{comment_body:{type:"String"}});},null);
__d('UFIAddComment.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','ClipboardPhotoUploader','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFIConfig','UFIImageBlock.react','UFIMarkdownButton.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','XUFICommentMarkdownPreviewController','getActiveElement','joinClasses','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=b.URL||b.webkitURL||{},k=c('React').PropTypes,l=i._("Write a comment..."),m=i._("Write a reply..."),n="fcg fss UFICommentTip",o=19,p='/ajax/ufi/upload/',q='/ajax/ufi/sticker_preview/',r=1000;function s(){return !!c('UFIConfig').canPublishLive;}var t={UPLOAD:'uploading',ENCODE:'encoding'},u=false,v=false,w=false,x=c('React').createClass({displayName:'UFIAddComment',propTypes:{contextArgs:k.object.isRequired,viewerActorID:k.string.isRequired,editingComment:k.object.isRequired,className:k.string,allowPhotoAttachments:k.bool,allowVideoAttachments:k.bool,allowStickerAttachments:k.bool,isEditing:k.bool,isFirstComponent:k.bool,isLastComponent:k.bool,isQAndA:k.bool,mentionsDataSource:k.object,replyCommentID:k.string,showSendOnEnterTip:k.bool,subtitle:k.any,targetID:k.string,withoutSeparator:k.bool,markViewerHasInteracted:k.func,allowCommentMarkdown:k.bool},contextTypes:{dispatch:k.func},getInitialState:function(){var y=this.props.editingComment,z=y.attachment||{type:null},aa=z.type==='photo'?z:null;return {attachedPhoto:y.photo_comment||aa,attachedVideo:y.video_comment||null,commentMarkdownPreviewContent:null,commentMarkdownEnabled:false,videoStatus:null,videoFileURL:null,videoProgress:0,attachedSticker:z.type=='sticker'?z:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,stickerNUXVisible:false,isFocused:this.props.isEditing,videosInCommentsNUXVisible:false,markdownNUXVisible:false};},_onKeyDown:function(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){c('Run').onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var y=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)y.blur();},_onContentChange:function(y){if(s()){var z=y.trim().length>0;if(z){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();}if(this.props.allowCommentMarkdown)this._sendMarkdownUpdate(y);},_sendMarkdownUpdate:function(y){var z=c('XUFICommentMarkdownPreviewController').getURIBuilder().setString('comment_body',y).getURI();new (c('AsyncRequest'))(z).setHandler(this._handleMarkdownUpdate).send();},_handleMarkdownUpdate:function(y){if(!y)return;this.setState({commentMarkdownPreviewContent:y.payload?y.payload.markup:null});},_handleUnsavedChanges:function(){var y=b.PageTransitions;if(y){var z=c('URI').getNextURI(),aa=y.getMostRecentURI();if(z.getQueryData().hasOwnProperty('theater')||aa.getQueryData().hasOwnProperty('theater')||z.getQueryData().hasOwnProperty('sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(z)||c('SnowflakePermalinkUtils').isPermalinkURI(aa))return;var ba=b.DialogNavigationStack;if(ba&&ba.isActiveURI(z))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({markdownNUXVisible:false,stickerNUXVisible:false,videosInCommentsNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var y=new (c('ClipboardPhotoUploader'))(p,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[y.subscribe('upload_start',this._prepareForAttachedPhotoPreview),y.subscribe('upload_error',this._onRemoveAttachedMediaPreviewClicked),y.subscribe('upload_success',function(z,aa){this._onPhotoUploadComplete(aa);}.bind(this))];y.handlePaste(event);},_onEnterSubmit:function(y,event){var z=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker,aa=this.props.isEditing||z;if(this.state.isLoadingPhoto||this._isLoadingVideo()){return false;}else if(!y.encodedValue.trim()&&!aa)return false;y.encodedValue=y.encodedValue.trim();if(this.state.commentMarkdownEnabled){y.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null});}if(z){y.attachedPhoto=this.state.attachedPhoto;y.attachedVideo=this.state.attachedVideo;y.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null});}else{y.attachedPhoto=null;y.attachedVideo=null;y.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.editingComment,y,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(y,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_isLoadingVideo:function(){return this.state.videoStatus===t.UPLOAD||this.state.videoStatus===t.ENCODE&&this.state.videoProgress!==100;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(y){y.unsubscribe();});},_getFeedbackTarget:function(y){return y.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&s())this._typingEventController=new (c('UFIAddCommentLiveTypingController'))(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function(){if(!s())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!s())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(y){var z=this._getFeedbackTarget(this.props),aa=this._getFeedbackTarget(y);if(aa!==z||this.props.replyCommentID!==y.replyCommentID||this.props.viewerActorID!==y.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)c('Arbiter').unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)c('Arbiter').unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var y={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&c('UFIConfig').shouldShowStickerNUX)if(!u){u=true;var z=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(z).send();y.stickerNUXVisible=true;}if(this.props.allowVideoAttachments&&c('UFIConfig').shouldShowVideosInCommentsNux)if(!v){v=true;z=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','video_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(z).send();y.videosInCommentsNUXVisible=true;}if(this.props.allowCommentMarkdown&&c('UFIConfig').shouldShowMarkdownCommentNUX)if(!w){w=true;z=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','markdown_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(z).send();y.markdownNUXVisible=true;}this.setState(y);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();},_renderStickerNUX:function(){if(this.state.stickerNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},i._("Now you can comment with a sticker!")));return null;},_renderVideoInCommentsNUX:function(){if(this.state.videosInCommentsNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.media_section;}.bind(this),shown:this.state.videosInCommentsNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hidevideosInCommentsNUX},i._("You can now add videos to comments")));return null;},_renderMarkdownCommentsNUX:function(){if(this.state.markdownNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.markdownButton;}.bind(this),shown:this.state.markdownNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideMarkdownCommentsNUX},i._("[FB-Only] Markdown in Comments! Click to enable.")));return null;},_setFileInput:function(y,z){this.setState({fileInput:y,fileUploader:z});},render:function(){var y=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,z=null;if(this.props.subtitle){z=c('React').createElement('span',{className:n},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){z=c('React').createElement('span',{className:n},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){z=c('React').createElement('span',{className:n},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("cancel")))]));}else if(this.props.showSendOnEnterTip)z=c('React').createElement('span',{className:n},i._("Press Enter to post."));var aa=null,ba=null,ca=null,da=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo,ea=null;if(this.props.allowCommentMarkdown)ca=c('React').createElement(c('UFIMarkdownButton.react'),{active:this.state.commentMarkdownEnabled,ref:'markdownButton',onClick:function(){this.setState({commentMarkdownEnabled:!this.state.commentMarkdownEnabled});}.bind(this)});if(this.props.allowStickerAttachments&&!da)ba=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText,onStickerFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){ea=this._onPaste;aa=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,prepareForAttachedVideoPreview:this._prepareForAttachedVideoPreview,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this._onPhotoUploadComplete,onVideoUploadComplete:this._onVideoUploadComplete,onVideoEncodeUpdate:this._onVideoEncodeUpdate,onVideoUploadUpdate:this._onVideoUploadUpdate,setFileInput:this._setFileInput,attachment:da,targetId:this.props.targetID,onClick:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});}var fa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),ga='addComment_'+this.props.contextArgs.ftentidentifier,ha;if(!!this.props.replyCommentID){ha=m;}else if(this.props.isQAndA){ha=i._("Ask a question...");}else ha=l;var ia=this.props.contextArgs.viewoptionstypeobjects,ja=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)z=null;var ka;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===t.UPLOAD||this.state.attachedSticker)ka=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this._onRemoveAttachedMediaPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress});var la=this.props.contextArgs.mentionsinput,ma=la.inputComponent,na=la.viewComponent,oa=la.viewProps,pa=this.props.editingComment.body,qa=pa?c('MentionsInputUtils').generateDataFromTextWithEntities(pa):null,ra=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)ra=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFICommentMarkdownPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),markup:this.state.commentMarkdownPreviewContent});return (c('React').createElement('div',{id:ga,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),this.props.className),onKeyDown:this._onKeyDown,'data-ft':fa},c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')+(this.props.allowCommentMarkdown?' '+"UFIMarkdownEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID,className:!y?"hidden_elem":''})),c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:'UFIInputContainer'},c('React').createElement(ma,{replyCommentID:this.props.replyCommentID,initialData:qa,placeholder:ha,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:na,viewProps:oa,viewOptionsTypeObjects:ia,viewOptionsTypeObjectsOrder:ja,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:this._onContentChange,onPaste:ea,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),c('React').createElement('div',{className:"UFICommentAttachmentButtons"},ca,aa,ba)),ra,ka,z)),this._renderStickerNUX(),this._renderVideoInCommentsNUX(),this._renderMarkdownCommentsNUX()));},componentDidUpdate:function(y,z,aa){if(!z.attachedPhoto&&this.state.attachedPhoto||!z.attachedSticker&&this.state.attachedSticker||!z.attachedVideo&&this.state.attachedVideo||!z.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(y.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedMediaPreviewClicked();}},componentDidMount:function(){this._sendMarkdownUpdate=c('throttle')(this._sendMarkdownUpdate,r,this);if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(y){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(y,z){var event={clipboardData:{items:[z]}};this._onPaste(event);}.bind(this));}},insertMention:function(y){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(y);},_getPhotoUploadData:function(){var y=this.props.viewerActorID,z={profile_id:y,target_id:this.props.targetID,source:o};z[c('ActorURI').PARAMETER_ACTOR]=y;return z;},_onPhotoUploadComplete:function(y){if(!this.state.isLoadingPhoto)return;var z=y.getPayload();if(z&&z.fbid){this.setState({attachedPhoto:z,isLoadingPhoto:false});}else this._onRemoveAttachedMediaPreviewClicked(null);},_onVideoEncodeUpdate:function(y,z){if(!this.state.attachedVideo||this.state.videoStatus!==t.ENCODE)return;if(z.obj.progress<this.state.videoProgress)return;z.obj.fbid=z.obj.videoID;this.setState({attachedVideo:z.obj,videoProgress:z.obj.progress,videoStatus:t.ENCODE});if(this._isEncodingFinished(z.obj.stage))this._onEncodeComplete();},_onVideoUploadUpdate:function(y){this.setState({videoProgress:y});},_isEncodingFinished:function(y){return y==='finish';},_onEncodeComplete:function(){this.state.fileInput.clear();},_onVideoUploadComplete:function(y){if(this.state.videoStatus!==t.UPLOAD)return;if(y&&y.video_id)this.setState({videoProgress:0,attachedVideo:y,videoStatus:t.ENCODE});},_onRemoveAttachedMediaPreviewClicked:function(event){c('Arbiter').inform('video_upload_cancel',{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_prepareForAttachedVideoPreview:function(){var y,z=this.state.fileInput.input.files[0];if(z&&j.createObjectURL)y=j.createObjectURL(z);this.setState({attachedVideo:null,videoStatus:t.UPLOAD,videoFileURL:y,videoProgress:0});},_onStickerUploadComplete:function(y){if(!this.state.isLoadingPhoto)return;var z=y.getPayload();if(z&&z.fbid){this.setState({attachedSticker:z,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(aa){var ba=i._("Sticker Failed"),ca=i._("There was a problem attaching the sticker.");new aa().setTitle(ba).setBody(ca).setButtons(aa.OK).show();},'UFIAddComment.react');this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(y,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()||c('UFIConfig').alwaysPreviewSticker){this._prepareForAttachedStickerPreview(y);return;}this.sendSticker(y,event);},_prepareForAttachedStickerPreview:function(y){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(q).setData({sticker_id:y}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(y,event){var z={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:y}};this.context.dispatch(c('UFIAddCommentAction').submitNew(z,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function(y){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(z,aa,ba,ca){var da=z.symbols[y];if(!da)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(da);return;}if(!this._selectionPosition)this._selectionPosition=new ca(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var ea=this.refs.mentionsinput.refs.getTextFieldDOM(),fa=ba.getInstance(ea),ga=fa.getValue(),ha=aa.insertEmoticon(da,ga,this._selectionPosition.getPos());fa.setValue(ha.result);this._selectionPosition.setPos(ha.start,ha.end);}.bind(this),'UFIAddComment.react');},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});},_hidevideosInCommentsNUX:function(){this.setState({videosInCommentsNUXVisible:false});},_hideMarkdownCommentsNUX:function(){this.setState({markdownNUXVisible:false});}});f.exports=x;},null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':j.string,isFirstCommentComponent:j.bool,isFirstComponent:j.bool,isLastCommentComponent:j.bool,isLastComponent:j.bool,isQAndA:j.bool,onClick:j.func},render:function(){var l=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),m;if(this.props.isQAndA){m=i._("Ask a question...");}else m=i._("Write a comment...");return (c('React').createElement('div',{className:l,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},m)));}});f.exports=k;},null);
__d('Middot.react',['React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'Middot',render:function(){return (c('React').createElement('span',babelHelpers['extends']({},this.props,{role:'presentation','aria-hidden':true}),' · '));}});f.exports=h;},null);
__d('UFICommentLikeCount.react',['cx','ActorURI','NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=function(l,m,n){var o=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:l.fbid,comment_from:l.author,comment_likecount:l.likecount||0,comment_id:l.id,cache_buster:l.likeconfirmhash||0});if(m)o.addQueryData({viewas:m});return c('ActorURI').create(o,n);},k=c('React').createClass({displayName:'UFICommentLikeCount',propTypes:{actorForPost:i.string,comment:i.object.isRequired,contextArgs:i.object.isRequired},render:function(){var l=this.props.comment,m=c('NumberFormat').formatIntegerWithDelimiter(l.likecount||0,c('UFIConfig').numberDelimiter),n=c('ProfileBrowserTypes').LIKES,o={id:l.fbid},p=j(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),q=c('React').createElement('i',{className:"UFICommentLikeIcon"}),r=c('React').createElement('span',null,m),s="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),t=c('ProfileBrowserLink').constructDialogURI(n,o).toString(),u=c('ProfileBrowserLink').constructPageURI(n,o).toString(),v='dialog',w=this.props.contextArgs.loggedOutLinkConfig;if(w&&w.showLikeLink){t=w.likeAjaxifyURI;u='#';}return (c('React').createElement('a',{ajaxify:t,className:s,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':p.toString(),href:u,rel:v,role:'button'},q,r));}});f.exports=k;},null);
__d('UFICommentLikeLink.react',['fbt','React','ReactionNuxTypeEnum','TrackingNodes','UFICommentAction','UFIConfig','UFIReactionsLinkImpl.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j='ufi_comment_like_link',k='ufi_reply_like_link',l=c('React').createClass({displayName:'UFICommentLikeLink',propTypes:{comment:i.object.isRequired,contextArgs:i.object.isRequired,feedback:i.object.isRequired},contextTypes:{dispatch:i.func},statics:{getCanRender:function(m){return !!(m&&(m.canviewerreact||m.viewercanlike));}},render:function(){var m=this.props.comment,n=this.props.feedback,o=this.props.contextArgs;if(!this.constructor.getCanRender(m))return null;if(m.canviewerreact){return this._renderReactionsLink(m,n);}else if(m.viewercanlike)return this._renderLikeLink(m,n,o);return null;},_renderReactionsLink:function(m,n){var o=null;if(c('UFIConfig').reactionsHasCommentsNux)o={nuxKey:'reactions_comments',titleOverride:h._("New! React to a Comment"),textOverride:h._("Hover over the Like link to see all reactions."),nuxType:c('ReactionNuxTypeEnum').LIKE_CLICK};return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:m.id,comment:m,nuxConfig:o,reaction:m.viewerreaction,supportedReactions:n.supportedreactions}));},_renderLikeLink:function(m,n,o){var p=o.loggedOutLinkConfig,q=c('TrackingNodes').getTrackingInfo(m.hasviewerliked?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),r=m.hasviewerliked?h._("Unlike this comment"):h._("Like this comment"),s=m.parentcommentid?k:j,t=!m.hasviewerliked||p?h._("Like"):h._("Unlike"),u=null,v=null;if(p&&p.showLikeLink){u='dialog';v=p.likeAjaxifyURI;}return (c('React').createElement('a',{className:'UFILikeLink','data-ft':q,'data-testid':s,href:'#',rel:u,ajaxify:v,onClick:function(event){return this.context.dispatch(c('UFICommentAction').toggleLike(m,event.target));}.bind(this),role:'button',title:r},t));}});f.exports=l;},null);
__d('UFICommentMetadata.react',['cx','fbt','Bootloader','BootloadedComponent.react','JSResource','React','ReactDOM','Timestamp.react','TrackingNodes','UFIConstants','Middot.react','URI','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('UFIConstants').UFIStatus,l='ufi_comment_timestamp',m="UFIFailureMessageIcon",n="UFIFailureMessage",o="uiLinkSubtle",p=function(r){var s=r.status;return s===k.FAILED_ADD||s===k.FAILED_EDIT;},q=c('React').createClass({displayName:'UFICommentMetadata',propTypes:{comment:j.object.isRequired,onRetrySubmit:j.func,permalink:j.string,shortenTimestamp:j.bool,showPermalink:j.bool,permalinkTarget:j.string},render:function(){var r=this.props,s=r.comment,t=r.onRetrySubmit,u=void 0,v=void 0;if(p(s)){u=[c('React').createElement('span',{key:'failure',className:n},c('React').createElement('i',{className:m}),i._("Unable to post comment.")),s.allowRetry&&t?[' ',c('React').createElement('a',{key:'rety-submit',onClick:t,href:'#',role:'button'},i._("Try Again"))]:null];}else{var w=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SOURCE);v=c('React').createElement(c('Timestamp.react'),{shorten:this.props.shortenTimestamp,time:s.timestamp.time,text:s.timestamp.text,verbose:s.timestamp.verbose});if(this.props.showPermalink)v=c('React').createElement('a',{key:'timestamp-message',className:o,href:this.props.permalink,'data-ft':w,'data-testid':l,target:this.props.permalinkTarget},v);}var x=null;if(s.originalTimestamp){var y=new (c('URI'))('/ajax/edits/browser/comment').addQueryData({comment_token:s.id}).toString();x=[c('React').createElement(c('Middot.react'),{key:'middot-editNote'}),c('React').createElement('a',{ajaxify:y,className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':i._("Show edit history"),href:'#',key:'edit-link',ref:'EditLink',rel:'dialog',role:'button',title:i._("Show edit history")},i._("Edited"))];}var z=null;if(s.creator_data)z=[c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{size:'small'}),bootloadLoader:c('JSResource')('UFICreatorInfo.react').__setRef('UFICommentMetadata.react'),creatorID:s.creator_data.creatorID,creatorType:s.creator_data.creatorType,creatorName:s.creator_data.creatorName,labelType:s.creator_data.labelType,pageID:s.creator_data.pageID,profileURI:s.creator_data.profileURI}),c('React').createElement(c('Middot.react'),{key:'middot-creator'})];var aa=null;if(s.body&&s.body.markdown_enabled&&s.body.markup)aa=[c('React').createElement(c('Middot.react'),{key:'middot-markdownNote'}),c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('a',{className:'uiLinkSubtle'},i._("Formatted")),bootloadLoader:c('JSResource')('UFICommentMarkdownFormattedLink.react').__setRef('UFICommentMetadata.react'),comment:s,key:'markdown-link'})];return (c('React').createElement('span',null,z,v,u,x,aa));},componentWillUpdate:function(r){var s=this.props.comment,t=r.comment;if(!s.editnux&&!!t.editnux)c('Bootloader').loadModules(["LegacyContextualDialog"],function(u){var v=new u();v.init(t.editnux).setContext(c('ReactDOM').findDOMNode(this.refs.EditLink)).setWidth(300).setPosition('below').show();}.bind(this),'UFICommentMetadata.react');}});f.exports=q;},null);
__d('UFICommentReactionCount.react',['cx','fbt','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','ActorURI','XUFIReactionTooltipController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.comment,o={entidentifier:n.id,reactioncount:n.reactioncount,reactioncountmap:n.reactioncountmap,actorforpost:this.props.actorForPost},p="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),q=c('UFIReactionsProfileBrowserUtils').getDialogURI(o),r=c('UFIReactionsProfileBrowserUtils').getPageURI(o),s=c('ActorURI').create(c('XUFIReactionTooltipController').getURIBuilder().setString('ft_ent_identifier',n.id).getURI(),this.props.actorForPost),t=this.props.contextArgs.loggedOutLinkConfig;if(t&&t.showLikeLink){q=t.likeAjaxifyURI;r='#';}var u=n.reactioncountreduced;if(!c('UFIConfig').reactionsHasCommentsBling)if(n.likecount===n.reactioncount){u=n.reactioncount===1?i._("1 Like"):i._("{Like count} Likes",[i.param('Like count',n.reactioncountreduced)]);}else u=n.reactioncount===1?i._("1 Reaction"):i._("{Reaction count} Reactions",[i.param('Reaction count',n.reactioncountreduced)]);var v=c('React').createElement('a',{ajaxify:q,className:p,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':s.toString(),href:r,rel:'dialog',role:'button'},u);if(c('UFIConfig').reactionsHasCommentsBling)return (c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"UFICommentReactionsBling _4ar- _ipn",feedback:o,contextArgs:this.props.contextArgs,comment:this.props.comment,max:3,size:'13'},v));return v;};function m(){j.apply(this,arguments);}m.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=m;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['cx','fbt','Middot.react','React','ReactFragment','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentLikeLink.react','UFICommentMetadata.react','UFICommentReactionCount.react','UFIConstants','UFIPrivateReplyIndicator.react','UFIPrivateReplyLink.react','UFISpamCount','UFIStoryAction'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('UFIConstants').UFIStatus,l="fsm fwn fcg UFICommentActions",m="UFIDeletedMessageIcon",n="UFIDeletedMessage",o=c('React').createClass({displayName:'UFICommentActions',propTypes:{comment:j.object.isRequired,contextArgs:j.object.isRequired,feedback:j.object.isRequired,hideAsSpamForPageAdmin:j.bool,markedAsSpamHere:j.bool,permalink:j.string,shareLink:j.string,showPermalink:j.bool,isStreaming:j.bool,showReplyLink:j.bool,viewerCanMarkNotSpam:j.bool},contextTypes:{dispatch:j.func},render:function(){var p=this.props,q=p.comment,r=p.permalink,s=p.feedback,t=p.parentCanComment,u=p.markedAsSpamHere,v=q.status===k.SPAM_DISPLAY,w=p.showReplyLink,x=p.hideAsSpamForPageAdmin,y=void 0,z=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=!q.islocal&&q.status!==k.LIVE_DELETED;if(ha){if(v&&!u){if(p.viewerCanMarkNotSpam)y=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').markAsNotSpam(q,event));}.bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},i._("Unhide"));if(x&&s.isthreaded&&q.cancomment&&w)ea=this.renderCommentReply(q);}else{z=c('UFICommentLikeLink.react').getCanRender(q)?c('React').createElement(c('UFICommentLikeLink.react'),{comment:q,contextArgs:this.props.contextArgs,feedback:s}):null;if(s.isthreaded&&q.cancomment&&w||!!q.parentcommentid&&s.cancomment&&t)ea=this.renderCommentReply(q);if(q.canviewerreact){ca=q.reactioncount>0?c('React').createElement(c('UFICommentReactionCount.react'),{comment:q,actorForPost:s.actorforpost,contextArgs:p.contextArgs}):null;}else ca=q.likecount>0?c('React').createElement(c('UFICommentLikeCount.react'),{comment:q,actorForPost:s.actorforpost,contextArgs:p.contextArgs}):null;if(q.spamcount&&c('UFISpamCount').enabled)da=c('React').createElement(c('UFISpamCount'),{count:q.spamcount});fa=this.renderMessageReply(q,s);}if(q.attachment&&q.attachment.type==='share'&&!q.attachment.disableRemove&&q.canremove)ga=c('React').createElement('a',{href:'#',onClick:function(event){return this.context.dispatch(c('UFICommentAction').removePreview(q,event.target));}.bind(this),role:'button'},i._("Remove Preview"));if(this.props.contextArgs.shareablecomments)aa=c('React').createElement('a',{className:'share_action_link',href:p.comment.commentshareuri,role:'button',rel:'dialog',title:i._("Share this comment")},i._("Share"));if(s.canviewerpin&&!q.parentcommentid){var ia=q.id===s.pinnedcommenttoken,ja=ia?i._("Unpin this comment"):i._("Pin this comment"),ka=ia?i._("Unpin Comment"):i._("Pin Comment");ba=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:ja,onClick:function(event){return this.context.dispatch(c('UFICommentAction').togglePin(q,event.target));}.bind(this)},ka);}}var la=c('React').createElement(c('UFICommentMetadata.react'),{comment:q,onRetrySubmit:function(){return this.context.dispatch(c('UFIAddCommentAction').retrySubmit(q));}.bind(this),permalink:r,shortenTimestamp:p.contextArgs.shortenTimestamp,showPermalink:p.showPermalink}),ma={};if(s.customcommentactionlinks)for(var na in s.customcommentactionlinks){var oa=s.customcommentactionlinks[na];if(oa.showInMenu)continue;var pa=function(event){return c('UFICentralUpdates').inform(oa.type,{comment:q,feedback:s});};ma[oa.type]=c('React').createElement('a',{href:'#',onClick:pa,role:'button'},oa.title);}var qa=void 0;if(p.contextArgs.islivestreaming){qa={likeToggle:z,spamToggle:y,likeCount:ca,spamCount:da};qa=Object.assign(qa,ma);}else if(s.isqanda){qa={likeCount:ca,spamCount:da,likeToggle:z,pinToggle:ba,commentReply:ea,shareComment:aa,messageReply:fa,spamToggle:y};qa=Object.assign(qa,ma);qa=Object.assign(qa,{metadata:la,removePreview:ga});}else if(p.contextArgs.entstream){qa={metadata:la,likeToggle:z,likeCount:ca,pinToggle:ba,commentReply:ea,messageReply:fa,shareComment:aa,spamCount:da,spamToggle:y,removePreview:ga};qa=Object.assign(qa,ma);}else if(s.isthreaded){qa={likeToggle:z,pinToggle:ba,commentReply:ea,messageReply:fa,spamToggle:y,removePreview:ga,shareComment:aa,likeCount:ca,spamCount:da};qa=Object.assign(qa,ma);qa=Object.assign(qa,{metadata:la});}else{qa={metadata:la,likeToggle:z,pinToggle:ba,shareComment:aa,likeCount:ca,spamCount:da,commentReply:ea,messageReply:fa,spamToggle:y,removePreview:ga};qa=Object.assign(qa,ma);}if(q.status===k.LIVE_DELETED){var ra=i._("Comment deleted"),sa=c('React').createElement('span',{className:n},c('React').createElement('i',{'aria-label':ra,className:m,'data-hover':'tooltip','data-tooltip-content':ra,role:'img'}));qa.deletionWarning=sa;}var ta=true,ua={};for(var va in qa){var pa=qa[va];if(pa){var wa=c('React').createElement(c('Middot.react'),{key:'middot-'+va});ua[va]=ta?pa:c('ReactFragment').create({middot:wa,action:pa});ta=false;}}return (c('React').createElement('div',{className:l},c('ReactFragment').create(ua)));},renderCommentReply:function(p){return (c('React').createElement('a',{className:"UFIReplyLink",href:'#',onClick:function(){var q=this.props.feedback;if(q.isthreaded&&p.cancomment){this.context.dispatch(c('UFIStoryAction').showReplies(p.id,p));}else if(p.parentcommentid)this.context.dispatch(c('UFIStoryAction').showReplies(p.parentcommentid,p));}.bind(this),role:'button'},i._("Reply")));},renderMessageReply:function(p,q){if(p.messagereply){if(c('UFIPrivateReplyLink.react').willRender(p.messagereply,q.actorforpost)){return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q.actorforpost,activityID:p.id,context:p.messagereply,seeResponseLabel:true}));}else if(c('UFIPrivateReplyIndicator.react').willRender(p.messagereply.status))return (c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:p.messagereply.status}));}else if(p.chattobuy)return (c('React').createElement('a',{href:p.chattobuy,role:'button',rel:'async-dialog'},i._("Message")));return null;}});f.exports=o;},null);
__d("XVideoInLiveCommentPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/in_live_comment\/",{});},null);
__d('UFICommentAttachment.react',['cx','AsyncRequest','BootloadedComponent.react','CSS','DOM','DOMQuery','HTML','Image.react','JSResource','Link.react','LitestandShareAttachment','React','ReactDOM','XUISpinner.react','XVideoInLiveCommentPreviewController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j='ufi_comment_photo',k=80,l='ufi_comment_sticker',m=c('React').createClass({displayName:'UFICommentAttachment',propTypes:{comment:i.object.isRequired,disableTheater:i.bool},_attachmentFromCommentData:function(n){return n.photo_comment||n.video_comment||n.attachment;},_getScaledDimensions:function(n,o){var p,q,r;if(o>n){r=k/o;p=n*r;q=o*r;}else{r=k/n;p=n*r;q=o*r;}return {height:Math.round(p),width:Math.round(q)};},componentDidMount:function(){var n=this._attachmentFromCommentData(this.props.comment);if(n)this.renderAttachment(n);},shouldComponentUpdate:function(n,o){var p=this._attachmentFromCommentData(this.props.comment),q=this._attachmentFromCommentData(n.comment);if(!p&&!q)return false;if(!p||!q||p.markup!=q.markup){return true;}else return false;},componentDidUpdate:function(n){var o=this._attachmentFromCommentData(this.props.comment);if(!o)return;if(o.type!=='sticker'&&o.type!=='photo')this.renderAttachment(o);},renderAttachment:function(n){if(n&&this.refs&&this.refs.contents&&n.markup){var o=n.markup;if(c('HTML').isHTML(o.markup))o=c('HTML').replaceJSONWrapper(o.markup).getRootNode();var p=o.parentNode,q=c('ReactDOM').findDOMNode(this.refs.contents);if(p&&p!==q)o=o.cloneNode(true);if(this.props.disableTheater){var r=o.querySelector('a[rel="theater"]');if(r)c('DOM').setAttributes(r,{target:'_blank',rel:''});}c('DOM').setContent(q,o);if(n.type=="share"){var s="_6m2",t=c('CSS').hasClass(q,s)?q:c('DOMQuery').scry(q,'.'+s)[0];if(t){c('LitestandShareAttachment').init(t);}else c('LitestandShareAttachment').init(q);}}else if(n&&n.type=='video'&&!n.markup){var u=c('XVideoInLiveCommentPreviewController').getURIBuilder();new (c('AsyncRequest'))(u.getURI()).setMethod('POST').setData({video_id:n.target.id}).setHandler(function(v){this.renderAttachment(v.payload.video_preview.video_comment);}.bind(this)).send();}},renderSticker:function(n){var o=this._getScaledDimensions(n.metadata.height,n.metadata.width),p=null,q=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){p=n.metadata.sprite_uri_2x;q=n.metadata.source_uri_2x;}else{p=n.metadata.sprite_uri;q=n.metadata.source_uri;}return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('Sticker.react').__setRef('UFICommentAttachment.react'),animationTrigger:'load_and_hover',frameCount:n.metadata.frameCount,frameRate:n.metadata.frameRate,framesPerCol:n.metadata.framesPerCol,framesPerRow:n.metadata.framesPerRow,spriteURI:p,sourceHeight:o.height,sourceURI:q,sourceWidth:o.width,testID:l}));},renderPhoto:function(n){var o="_2rn3 _4-eo";return (c('React').createElement('div',{className:"_4iv9"},c('React').createElement(c('Link.react'),{className:o,'data-testid':j,href:n.metadata.url},c('React').createElement('div',{style:{height:n.metadata.height}},c('React').createElement(c('Image.react'),{src:n.metadata.preview_uri})))));},renderShare:function(n){return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('UFILiveCommentLinkPreview.react').__setRef('UFICommentAttachment.react'),attachment:n}));},renderLivePlaceInfo:function(n){return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('PlaceListLiveCommentAttachment.react').__setRef('UFICommentAttachment.react'),commentID:this.props.comment.fbid,data:n,postID:this.props.comment.ftentidentifier}));},renderPlaceInfo:function(n){return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('MultiPlacePageInfoCard.react').__setRef('UFICommentAttachment.react')},n.props)));},render:function(){var n=this._attachmentFromCommentData(this.props.comment);if(n)if(n&&n.type==='sticker'){return this.renderSticker(n);}else if(n&&n.type==='photo'){return this.renderPhoto(n);}else if(n&&n.type==='live_share'){return this.renderShare(n);}else if(n&&n.type=='comment_place_info'){return this.renderPlaceInfo(n);}else if(n&&n.type=='live_comment_place_info'){return this.renderLivePlaceInfo(n);}else return c('React').createElement('div',{ref:'contents'});return c('React').createElement('span',null);}});f.exports=m;},null);
__d('HovercardLinkInterpolator',['cx','fbt','Badge.react','HovercardLink','Link.react','React','URI','isFacebookURI','isRTL'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m,n,o){var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?'_blank':null),s,t=(!q.external?"profileLink":'')+(q.weakreference?' '+"weakReference":''),u,v=q.hashtag?k.substring(1):k;u=c('isRTL')(v)?'rtl':'ltr';var w=new (c('URI'))(q.url);if(c('isFacebookURI')(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.video,z=y?{'data-hovercard':c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(q,n,o,null,p).toString()}:{};if(q.hashtag){s=c('React').createElement('a',babelHelpers['extends']({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c('React').createElement('span',{'aria-label':i._("hashtag"),className:"_58cl"},k.substring(0,1)),c('React').createElement('span',{className:"_58cm"},k.substring(1)));}else{var aa=[];if(q.weakreference)aa.push(c('React').createElement('i',{key:'weakreference',className:'UFIWeakReferenceIcon'}));aa.push(k);if(q.noncoworker)aa.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),aa);}return s;}f.exports=j;},null);
__d('transformTextRanges',['UnicodeUtils'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function(i,j,k){if(!i||!j||!k)return i;j.sort(function(r,s){return r.offset-s.offset;});var l=0;for(var m=0;m<j.length;m++){j[m].offset+=l;var n=c('UnicodeUtils').substr(i,j[m].offset,j[m].length),o=c('UnicodeUtils').strlen(n),p=k(n,j[m]),q=c('UnicodeUtils').strlen(p);if(n!==p){i=c('UnicodeUtils').substr(i,0,j[m].offset)+p+c('UnicodeUtils').substr(i,j[m].offset+j[m].length);j[m].length=q;l+=q-o;}}return i;};f.exports=h;},null);
__d('UFICommentUtils',['HovercardLinkInterpolator','UFIConstants','URI','URITruncator','transformTextRanges'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getCommentTextWithTruncatedURIs:function(i,j){if(c('UFIConstants').commentURLTruncationLength)if(i&&i.length>0)j=c('transformTextRanges')(j,i,function(k,l){var m=l.entity.external||l.entity.__type__&&l.entity.__type__.name==='ExternalUrl';return m?c('URITruncator')(k,c('UFIConstants').commentURLTruncationLength):k;});return j;},getCommentBodyInterpolator:function(i){return function(j,k){return c('HovercardLinkInterpolator')(j,k,'_blank',i,'ufi');};},shallowCopyRanges:function(i){if(!i)return i;var j=[];i.forEach(function(k){j.push(babelHelpers['extends']({},k));});return j;},annotateProfileURIIfPublic:function(i,j){if(!i)return j;return new (c('URI'))(j).addQueryData('rc','p').toString();}};f.exports=h;},null);
__d('UFIActor.react',['cx','fbt','Badge.react','Focus','HovercardLink','Locale','React','ReactDOM','UFICommentUtils','UserHovercardLocation'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIActor',propTypes:{author:j.object.isRequired,'data-ft':j.string,disableAuthorLink:j.bool,focusOnMount:j.bool,showHovercard:j.bool,isAdminViewer:j.bool,isAuthorWeakReference:j.bool,isAuthorNonCoworker:j.bool,groupOrEventID:j.string,useFirstName:j.bool,delimiter:j.string,isPublic:j.bool},getDefaultProps:function(){return {delimiter:' \u00b7 ',isAdminViewer:false,isPublic:false};},componentDidMount:function(){if(this.props.focusOnMount)c('Focus').setWithoutOutline(c('ReactDOM').findDOMNode(this.refs.authorName));},render:function(){var l=this.props.author,m=c('Locale').isRTL()?'rtl':'ltr',n=(this.props.isAuthorWeakReference?"weakReference":'')+(' '+"UFICommentActorName"),o=[];if(this.props.isAuthorWeakReference)o.push(c('React').createElement('i',{className:'UFIWeakReferenceIcon',key:'icon'}));if(this.props.useFirstName){o.push(l.firstName);}else if(this.props.author.isBusinessPersona&&this.props.author.assetRole){o.push(l.name+' '+i._("(")+this.props.author.assetRole+i._(")"));}else o.push(l.name);if(this.props.isAuthorNonCoworker)o.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));var p=this.props.isAdminViewer?c('UserHovercardLocation').UFI_ADMIN:c('UserHovercardLocation').UFI,q=l.uri&&!this.props.disableAuthorLink?c('React').createElement('a',babelHelpers['extends']({},this.props,{className:n,'data-hovercard':this.props.showHovercard?c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(l,this.props.groupOrEventID,p,this.props.isAuthorWeakReference,{is_public:this.props.isPublic}).toString():null,'data-ft':this.props['data-ft'],dir:m,href:c('UFICommentUtils').annotateProfileURIIfPublic(this.props.isPublic,l.uri),ref:'authorName'}),o):c('React').createElement('span',{className:n,dir:m,ref:'authorName'},o);return (c('React').createElement('span',null,q,c('React').Children.map(this.props.children,function(r){return (r?[r.key==='badge'||r.key==='constituentTitle'?'':this.props.delimiter,r]:null);}.bind(this))));}});f.exports=k;},null);
__d('UFISocialContext.react',['fbt','HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=27,k=c('React').createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:i.object.isRequired,otherMutualCount:i.number.isRequired,topMutualFriend:i.object.isRequired},render:function(){var l=this.props.topMutualFriend,m=this.props.otherMutualCount,n=this.props.commentAuthor,o=c('HovercardLink').constructEndpoint(l).toString(),p=c('React').createElement('a',{href:l.uri,'data-hovercard':o,key:'top'},l.name),q=n.name.length+l.name.length,r=void 0;if(m===0){r=h._("Friends with {name}",[h.param('name',p)]);}else if(q<j){var s=void 0;if(m==1){s=h._("1 other");}else s=h._({"*":"{count} others"},[h.param('count',m,[0])]);r=h._("Friends with {name} and {others}",[h.param('name',p),h.param('others',this.getOthersLink(s,n,l))]);}else{var t=h._({"*":"{count} mutual friends"},[h.param('count',m+1,[0])]);r=this.getOthersLink(t,n);}return (c('React').createElement('span',{className:'UFICommentSocialContext'},r));},getOthersLink:function(l,m,n){var o=c('ProfileBrowserTypes').MUTUAL_FRIENDS,p={uid:m.id},q=new (c('URI'))('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:m.id});if(n)q.addQueryData({exclude_id:n.id});var r=c('ProfileBrowserLink').constructDialogURI(o,p).toString();return (c('React').createElement('a',{ajaxify:r,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':q.toString(),href:c('ProfileBrowserLink').constructPageURI(o,p).toString(),key:'others',rel:'dialog'},l));}});f.exports=k;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentAuthorName',propTypes:{author:h.object.isRequired,authorProfiles:h.object.isRequired,disableAuthorLink:h.bool,showHovercard:h.bool,isAdminViewer:h.bool,isAuthorWeakReference:h.bool,isAuthorNonCoworker:h.bool,focusOnMount:h.bool,groupOrEventID:h.string,isFeatured:h.bool,socialContext:h.object,useFirstName:h.bool,isPublic:h.bool,constituentTitle:h.object},render:function(){var j=this.props,k=j.author,l=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_NAME);return (c('React').createElement(c('UFIActor.react'),{author:k,disableAuthorLink:j.disableAuthorLink,showHovercard:j.showHovercard,isAdminViewer:j.isAdminViewer,key:'author',focusOnMount:j.focusOnMount,'data-ft':l,isAuthorWeakReference:j.isAuthorWeakReference,isAuthorNonCoworker:j.isAuthorNonCoworker,groupOrEventID:j.groupOrEventID,useFirstName:j.useFirstName,isPublic:this.props.isPublic},j.isFeatured?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,this.getConstituentTitle(k),j.socialContext?c('React').createElement(c('UFISocialContext.react'),{topMutualFriend:j.authorProfiles[j.socialContext.topmutualid],otherMutualCount:j.socialContext.othermutualcount,commentAuthor:k}):null));},getConstituentTitle:function(j){var k=this.props.constituentTitle;if(k&&k.titleModule){var l=k.titleModule;return (c('React').createElement(l,{representativeName:k.representativeName,representativeId:k.representativeId,authorId:j.id,ftId:k.ftId,commentId:k.commentId,showHovercard:true,isOwner:k.isOwner,key:'constituentTitle'}));}else return null;}});f.exports=i;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;},null);
__d('findSplitPointForText',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l);}else l=n;}return l;}f.exports=h;},null);
__d("partitionTextAndRanges",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m;}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l;}var j=function(k,l,m){var n=[],o=[],p=i(l,m);for(var q=0;q<l.length;q++){var r=l[q];if(r.offset<p){n.push(r);}else o.push({offset:r.offset-p,length:r.length,entity:r.entity,highlighted:r.highlighted});}return {before:{ranges:n,text:k.substr(0,p)},after:{ranges:o,text:k.substr(p)}};};f.exports=j;},null);
__d('TruncatedTextWithEntities.react',['React','SeeMore.react','TextWithEntities.react','findSplitPointForText','partitionTextAndRanges'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'TruncatedTextWithEntities',render:function(){var i=this.props.text||'',j=this.props.ranges||[];i=i.replace(/\s*$/,'');var k=this.props.maxLines,l=this.props.maxLength;if(l&&i.length>l){var m=this.props.truncationPercent||.6;l=Math.floor(m*l);}var n=c('findSplitPointForText')(i,l,k);if(n!==null){while(i[n-1]==='\n')n--;var o=c('partitionTextAndRanges')(i,j,n);return (c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('SeeMore.react'),{className:this.props.className,clickCallback:this.props.markViewerHasInteracted},c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:o.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:o.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:o.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:o.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}))));}else return (c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('TextWithEntities.react'),{className:this.props.className,interpolator:this.props.interpolator,ranges:j,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:i,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}});f.exports=h;},null);
__d('UFICommentBody.react',['cx','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils','UFIConfig','UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFICommentBody',propTypes:{commentText:i.string.isRequired,commentRanges:i.array,groupOrEventID:i.string,maxLength:i.number,maxLines:i.number,socialContext:i.object,markViewerHasInteracted:i.func},render:function(){var k=this.props,l=k.commentText,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),n=c('UnicodeBidi').isDirectionLTR(l),o=!n,p=n&&c('Locale').isRTL()?'ltr':o&&!c('Locale').isRTL()?'rtl':null,q=c('IntlLang').getLang(l),r=c('UFICommentUtils').getCommentBodyInterpolator(k.groupOrEventID),s=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:r,ranges:k.commentRanges,text:l,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:k.maxLength,maxLines:k.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':m,dir:p,lang:q,markViewerHasInteracted:this.props.markViewerHasInteracted});if(k.socialContext){s=c('React').createElement('div',{key:'body'},s);}else{var t=(n&&c('Locale').isRTL()?"_5wjy":'')+(n&&c('Locale').isRTL()?' '+"_5wjz":'')+(o&&!c('Locale').isRTL()?' '+"_5wj-":'')+(o&&!c('Locale').isRTL()?' '+"_5wj_":'');s=t?c('React').createElement('div',{key:'body',className:t},s):[' ',s];}return c('React').createElement('span',null,s);}});f.exports=j;},null);
__d('XUIEditButton.react',['cx','fbt','XUIAbstractGlyphButton.react','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'XUIEditButton',render:function(){var k=this.props.label,l=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!k)k=i._("Edit");l=k;}return (c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{label:k,title:l,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center','data-tooltip-content':this.props.tooltip,className:c('joinClasses')(this.props.className,"_5upq _5upr")})));}});f.exports=j;},null);
__d('UFICommentMenu.react',['ix','Bootloader','Image.react','React','XUICloseButton.react','XUIEditButton.react','keyMirror','fbglyph'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=void 0,k=void 0,l=void 0,m=void 0,n=c('keyMirror')({EDIT:true,CLOSE:true,CHEVRON:true}),o=c('React').createClass({displayName:'UFICommentMenu',propTypes:{menuData:i.array,menuType:i.oneOf(Object.keys(n)).isRequired,onAction:i.func,onClick:i.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c('Bootloader').loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(q,r,s){j=q,k=r;l=s;m=l.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this),'UFICommentMenu.react');}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(q,r,s){if(this.state.needsExpand&&!r.needsExpand)return false;return true;},render:function(){var q=null;if(this.props.menuType===n.EDIT){q=c('XUIEditButton.react');}else if(this.props.menuType===n.CLOSE){q=c('XUICloseButton.react');}else q=p;if(this.props.menuData&&this.state.bootloaded){var r=this.props.menuData.map(function(t){return (c('React').createElement(m,{'data-testid':t.testid,key:t.value,value:t.value},t.label));}),s=c('React').createElement(l,{onItemClick:this.props.onAction},r);return (c('React').createElement(k,babelHelpers['extends']({},this.props,{alignh:'right',layerBehaviors:[j],menu:s,ref:'menu'}),c('React').createElement(q,{href:'#',onClick:this.onClickGuard})));}return c('React').createElement(q,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}}),p=c('React').createClass({displayName:'ChevronDropDown',render:function(){return (c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_16_fig-light-20.png")})));}});o.MenuType=n;f.exports=o;},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentVPVTracker',propTypes:{comment:h.object.isRequired,contextArgs:h.object.isRequired},render:function(){var j=this.props.comment.id,k=this.props.contextArgs.instanceid,l=this.props.children;if(!c('UFICommentVPVs').hasLoggedVPV(k,j))l=c('React').createElement(c('OnVisible.react'),{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},l);return l;},maybeScheduleVPVLogging:function(){if(this.state.timer!==null)return;var j=this.props.comment.id,k=this.props.contextArgs.instanceid;if(c('UFICommentVPVs').hasLoggedVPV(k,j))return;this.setState({timer:c('setTimeout')(function(){c('UFICommentVPVs').logVPV(k,j);this.setState({timer:null});}.bind(this),c('UFIConfig').vpvLoggingTimeout)});},cancelScheduledVPVLogging:function(){if(this.state.timer===null)return;c('clearTimeout')(this.state.timer);this.setState({timer:null});},getInitialState:function(){return {timer:null};},shouldComponentUpdate:function(j,k){return k.timer===this.state.timer;},componentWillReceiveProps:function(){this.cancelScheduledVPVLogging();},componentWillUnmount:function(){this.cancelScheduledVPVLogging();}});f.exports=i;},null);
__d('UFIComment.react',['ix','cx','fbt','invariant','AsyncRequest','Bootloader','BootloadedComponent.react','ContentTranslationStrings','DOMContainer.react','HovercardLink','Image.react','JSResource','LiveWWWFeedbackTypedLogger','React','ReactDOM','TextWithEntities.react','Tooltip.react','TrackingNodes','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UserHovercardLocation','XUICloseButton.react','XFeedNUXSaveSeenStateController','emptyFunction','fbglyph','joinClasses','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConstants').UFIStatus,n=c('keyMirror')({edit:true,hide:true,remove:true,embed:true,showConstituentTitle:true,hideConstituentTitle:true}),o='ufi_comment_close_button',p='ufi_highlighted_comment',q='ufi_comment_menu_delete',r='ufi_comment_menu_edit',s='ufi_comment_menu_hide',t='ufi_comment_menu_embed',u='ufi_comment_menu_show_district',v='ufi_comment_menu_hide_district',w={testid:q,value:n.remove,label:j._("Delete Comment...")},x={testid:s,value:n.hide,label:j._("Hide Comment")},y={testid:t,value:n.embed,label:j._("Embed")},z={testid:q,value:n.remove,label:j._("Delete...")},aa={testid:u,value:n.showConstituentTitle,label:j._("Show District")},ba={testid:v,value:n.hideConstituentTitle,label:j._("Hide District")},ca=false,da=null,ea=function(ha){var ia=ha.status;return ia===m.FAILED_ADD||ia===m.FAILED_EDIT;};function fa(ha){return ha.commenterIsFOF!==undefined&&ha.userIsMinor!==undefined&&ha.reportLink!==undefined;}var ga=c('React').createClass({displayName:'UFIComment',propTypes:{authorProfiles:l.object.isRequired,comment:l.object.isRequired,contextArgs:l.object.isRequired,feedback:l.object.isRequired,'data-ft':l.string,focusOnMount:l.bool,hasPartialBorder:l.bool,hideAsSpamForPageAdmin:l.bool,isFeatured:l.bool,isFirst:l.bool,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLast:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isLocallyComposed:l.bool,parentCanComment:l.bool,permalink:l.string,showPermalink:l.bool,showRemoveReportMenu:l.bool,showReplyLink:l.bool,viewerIsAuthor:l.bool,orderingMode:l.string,markViewerHasInteracted:l.func},contextTypes:{dispatch:l.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false,hideConstituentTitleNUXVisible:true};},_onHideAsSpam:function(event){this.context.dispatch(c('UFICommentAction').markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(c('UFICommentAction').markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true});}.bind(this)));},_onRemove:function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,c('emptyFunction')));},_onInlineBan:function(event){this.context.dispatch(c('UFICommentAction').inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(c('UFICommentAction').undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,ha){var ia=ha.item,ja=ia.getValue();setTimeout(function(){if(ja===n.remove){this._onRemove(event);}else if(ja===n.edit){this.context.dispatch(c('UFICommentAction').edit(this.props.comment));}else if(ja===n.hide){this._onHideAsSpam(event);}else if(ja===n.embed){this.context.dispatch(c('UFICommentAction').embed(this.props.comment));}else if(ja===n.showConstituentTitle){this.context.dispatch(c('UFICommentAction').showConstituentTitle(this.props.comment));}else if(ja===n.hideConstituentTitle){this.context.dispatch(c('UFICommentAction').hideConstituentTitle(this.props.comment));}else c('UFICentralUpdates').inform(ja,{comment:this.props.comment,feedback:this.props.feedback});}.bind(this),0);},_createRemoveReportMenuData:function(){return [w,x];},_createEditDeleteMenuData:function(){return [{testid:r,value:n.edit,label:j._("Edit...")},z];},_renderCloseButton:function(){var ha=this.props.comment,ia=null,ja=null,ka=null,la=c('UFICommentMenu.react').MenuType.CLOSE,ma=ha.canembed&&c('UFIConfig').showCommentEmbedOption,na=ha.canEditConstituentTitle,oa=ha.constituentTitle;if(ha.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&ha.canedit){ka=ma?j._("Edit, delete or embed this"):j._("Edit or delete this");la=c('UFICommentMenu.react').MenuType.EDIT;if(na){if(oa){ja=[ba];}else ja=[aa];ja=ja.concat(this._createEditDeleteMenuData());}else ja=this._createEditDeleteMenuData();}else if(this.props.showRemoveReportMenu){ka=ma?j._("Remove, report or embed this"):j._("Remove or report this");ja=this._createRemoveReportMenuData();}else if(this.props.feedback.customcommentactionlinks){ka=ma?j._("Remove this"):j._("Remove or embed this");ja=[w];la=c('UFICommentMenu.react').MenuType.EDIT;}else{ka=ma?j._("Remove or embed this"):j._("Remove this");if(!ma){ia=this._onRemove;}else ja=[z];}}else if(this.props.feedback.customcommentactionlinks){ka=ma?j._("Hide or embed this"):j._("Hide this");ja=[x];la=c('UFICommentMenu.react').MenuType.EDIT;}else if(ha.canreport){ka=ma?j._("Hide or embed this"):j._("Hide this");if(!ma){ia=this._onHideAsSpam;}else ja=[x];}if(ma){!(ja.length>0)?k(0):void 0;ja.push(y);la=c('UFICommentMenu.react').MenuType.CHEVRON;}if(this.props.feedback.customcommentactionlinks)for(var pa in this.props.feedback.customcommentactionlinks){var qa=this.props.feedback.customcommentactionlinks[pa];if(!qa.showInMenu)continue;ja.push({testid:qa.type,value:qa.type,label:qa.title});}var ra=null;if(na&&!oa&&c('UFIConfig').shouldShowHideConstituentTitleNUX)if(!ca){ra=this._renderNUX();c('UFIConfig').shouldShowHideConstituentTitleNUX=false;}var sa="UFICommentCloseButton"+(ia===null&&ja===null?' '+"hdn":'')+(ra!==null?' '+"UFICommentCloseButtonNux":''),ta=null,ua=null;if(this.props.contextArgs.viewas){ta='/ajax/profile/link_disabled_in_viewas.php';ua='dialog';ia=null;}return (c('React').createElement('span',null,c('React').createElement(c('UFICommentMenu.react'),{ajaxify:ta,className:sa,'data-testid':o,onClick:ia,rel:ua,tooltip:ka,menuData:ja,menuType:la,onAction:this._onAction,ref:'comment_menu'}),ra));},_renderFakeCloseButton:function(){return (c('React').createElement(c('XUICloseButton.react'),{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},_onNUXCloseButtonClick:function(){ca=true;this.setState({hideConstituentTitleNUXVisible:false});var ha=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','hide_constituent_title_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ha).send();},_renderNUX:function(){return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.comment_menu;}.bind(this),shown:this.state.hideConstituentTitleNUXVisible,position:'above',alignment:'right',onCloseButtonClick:this._onNUXCloseButtonClick},j._("Your district is hidden on all comments. Edit any comment to your representatives to show it again.")));},componentDidMount:function(){var ha=this;if(this.state.isHighlighting)(function(){var ia=c('ReactDOM').findDOMNode(ha),ja=parseInt(ha.props.comment.scrolltopoffset||0,10);c('Bootloader').loadModules(["UFIScrollHighlight"],function(ka){setTimeout(ka.actOn.bind(null,ia,ja),0);},'UFIComment.react');ha.setState({isHighlighting:false});})();},shouldComponentUpdate:function(ha,ia){var ja=this.props,ka=this.state;return (ha.comment!==ja.comment||ha.showReplyLink!==ja.showReplyLink||ha.isFirst!==ja.isFirst||ha.isLast!==ja.isLast||ha.isFirstCommentComponent!==ja.isFirstCommentComponent||ha.isLastCommentComponent!==ja.isLastCommentComponent||ha.isFirstComponent!==ja.isFirstComponent||ha.isLastComponent!==ja.isLastComponent||ha.isFeatured!==ja.isFeatured||ha.hasPartialBorder!==ja.hasPartialBorder||ia.wasHighlighted!==ka.wasHighlighted||ia.isHighlighting!==ka.isHighlighting||ia.markedAsSpamHere!==ka.markedAsSpamHere||ia.isInlinePageDeleted!==ka.isInlinePageDeleted||ia.isInlineBanned!==ka.isInlineBanned||ia.hideConstituentTitleNUXVisible!==ka.hideConstituentTitleNUXVisible);},render:function(){var ha=this.props.comment,ia=this.props.feedback,ja=ha.status===m.DELETED,ka=ha.status===m.LIVE_DELETED,la=ha.status===m.SPAM_DISPLAY;if(ja)return null;var ma=this.state.markedAsSpamHere,na=this.state.isInlinePageDeleted,oa=this.props.hideAsSpamForPageAdmin,pa=this.state.isInlineBanned;if(ha.islive&&!this.state.loggedLiveUpdate){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setCommentID(ha.id).log();this.setState({loggedLiveUpdate:true});}var qa=fa(ha),ra=!ha.status&&(ha.isunseen||ha.islocal);if(!ha.status&&ia.lastseentime){var sa=ha.originalTimestamp||ha.timestamp.time;ra=ra||sa>ia.lastseentime;}var ta=this.props.contextArgs.markedcomments;if(ta&&ta[ha.legacyid])ra=true;var ua="UFIRow"+(this.props.isFirst?' '+"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),va=j._("Comment"),wa=j._("Comment reply"),xa=ha.parentcommentid?wa:va;if(qa)if(da){var ya=null,za=null,ab=null,bb=null;if(oa){ab=pa?this._onUndoInlineBan:this._onInlineBan;if(na){ya=j._("You've deleted this comment so no one can see it.");}else if(ma){ya=j._("Now this is only visible to the person who wrote it and their friends.");bb=this._onDeleteSpam;za=this._onMarkAsNotSpam;}}else if(ma){ya=j._("This comment has been hidden.");bb=this._onDeleteSpam;za=this._onMarkAsNotSpam;}if(ya)return (c('React').createElement('div',{className:ua,role:'article','aria-label':xa},c('React').createElement(da,{notice:ya,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:za,onBanAction:ab,onDeleteAction:bb,isInlineBanned:pa,isInlinePageDeleted:na,hideAsSpamForPageAdmin:oa,pageID:this.props.feedback.ownerid})));}else c('Bootloader').loadModules(["UFICommentRemovalControls.react"],function(eb){da=eb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this),'UFIComment.react');var cb=c('joinClasses')(ua,"UFIComment"+(ea(ha)?' '+"UFICommentFailed":'')+(ka||la?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(ra?' '+"UFIUnseenItem":'')),db=this.renderComment();if(this.props.shouldLogVPVs&&!ha.islocal)db=c('React').createElement(c('UFICommentVPVTracker.react'),{comment:ha,contextArgs:this.props.contextArgs},db);return (c('React').createElement('div',{className:cb,role:'article','aria-label':xa,'data-testid':this.state.wasHighlighted?p:null,'data-ft':this.props['data-ft']},db));},renderComment:function(){var ha=this.props,ia=ha.comment,ja=ha.permalink,ka=ha.feedback,la=ia.body?ia.body.text:'',ma=c('UFICommentUtils').shallowCopyRanges(ia.body&&ia.body.ranges),na=ha.authorProfiles[ia.author],oa=ia.status===m.SPAM_DISPLAY,pa=ia.status===m.LIVE_DELETED,qa=!(oa||pa),ra=ka.canremoveall||ia.hiddenbyviewer;la=c('UFICommentUtils').getCommentTextWithTruncatedURIs(ma,la);var sa=null,ta=null;if(!ha.isLocallyComposed&&!this.state.wasHighlighted){ta=c('UFIConstants').commentTruncationLength;sa=c('UFIConstants').commentTruncationMaxLines;}var ua=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SMALL_ACTOR_PHOTO),va=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),wa=null,xa=null,ya=null,za=null;if(ia.istranslatable&&ia.translatedbody===undefined)wa=c('React').createElement('a',{href:'#',role:'button',title:c('ContentTranslationStrings').SEE_TRANSLATION_TIP,className:"UFITranslateLink",onClick:function(event){return this.context.dispatch(c('UFICommentAction').translate(ia,event));}.bind(this)},c('ContentTranslationStrings').SEE_TRANSLATION);if(ia.translatedbody!==undefined)if(ia.translatedbody!==null&&ia.translatedbody.text!==''){za=c('React').createElement('span',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').AUTOMATICALLY_TRANSLATED);var ab=c('UFICommentUtils').shallowCopyRanges(ia.translatedbody.ranges),bb=ia.translatedbody.text,cb=ia.translatedbody.dir,db=c('React').createElement('span',{key:'comment-body','data-ft':va,dir:cb},c('React').createElement(c('TextWithEntities.react'),{className:"UFICommentBody",interpolator:c('UFICommentUtils').getCommentBodyInterpolator(ha.feedback.grouporeventid),ranges:ab,text:bb,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji}));xa=db;}else ya=c('React').createElement('span',{className:"UFITranslationErrorText"},c('ContentTranslationStrings').NO_TRANSLATION_AVAILABLE);var eb=null;if(ia.body&&ia.body.markdown_enabled&&ia.body.markup){eb=c('React').createElement(c('DOMContainer.react'),null,ia.body.markup);}else eb=c('React').createElement(c('UFICommentBody.react'),{socialContext:ia.socialcontext,commentText:la,commentRanges:ma,groupOrEventID:ka.grouporeventid,maxLength:ta,maxLines:sa,markViewerHasInteracted:this.props.markViewerHasInteracted});var fb=ha.contextArgs.viewas?null:c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(na,ka.grouporeventid,c('UserHovercardLocation').UFI,ia.isauthorweakreference,{on_public_ufi:ka.ispublic}).toString(),gb=ha.contextArgs.disableCommentAuthorLink,hb=c('React').createElement(c('UFICommentAuthorName.react'),{author:na,authorProfiles:ha.authorProfiles,disableAuthorLink:gb,showHovercard:!!fb,isAuthorWeakReference:ia.isauthorweakreference,isAuthorNonCoworker:ia.isauthornoncoworker,isAdminViewer:ha.feedback.isadminviewer,focusOnMount:ha.focusOnMount,groupOrEventID:ka.grouporeventid,isFeatured:ha.isFeatured,socialContext:ia.socialcontext,isPublic:ka.ispublic,constituentTitle:ia.constituentTitle}),ib=null;if(ia.photo_comment_status)ib=c('React').createElement('div',{className:"_50f8"},ia.photo_comment_status);var jb=null;if(ia.sticker_attachment_status)jb=c('React').createElement('div',{className:"_50f8"},ia.sticker_attachment_status);var kb=c('React').createElement(c('UFICommentAttachment.react'),{comment:ha.comment}),lb=c('React').createElement(c('UFIActorIconContainer.react'),{actorID:ia.author});if(na.uri||na.isBusinessPersona)lb=c('React').createElement('a',{'data-ft':ua,'data-hovercard':fb,href:c('UFICommentUtils').annotateProfileURIIfPublic(ka.ispublic,na.uri)},lb);var mb=false;switch(ha.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:mb=true;}var nb=null,ob=ha.contextArgs.ownerName;if(mb&&this.props.comment.id===ka.pinnedcommenttoken){var pb=ob?j._("{post owner name} pinned this comment to the top",[j.param('post owner name',ob)]):j._("The person who posted pinned this comment to the top");nb=c('React').createElement(c('Tooltip.react'),{position:'above',tooltip:pb},c('React').createElement(c('Image.react'),{className:'UFIPinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_16_bluegray-10.png")}));}return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium'},lb,c('React').createElement('div',{className:'UFICommentContentBlock'},c('React').createElement('div',{className:'UFICommentContent'},hb,nb,eb,wa,c('React').createElement('div',{className:"UFITranslatedText"},xa,za),ya,kb),ib,jb,c('React').createElement(c('UFICommentActions.react'),{comment:ia,feedback:ka,parentCanComment:ha.parentCanComment,permalink:ja,viewerCanMarkNotSpam:ra,showPermalink:ha.showPermalink,showReplyLink:ha.showReplyLink,contextArgs:ha.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ha.hideAsSpamForPageAdmin}),qa?this._renderCloseButton():null),qa?this._renderFakeCloseButton():null));}});f.exports=ga;},null);
__d('UFICommentDisabledNotice.react',['React','TextWithEntities.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;function i(k,l){return (c('React').createElement('a',{href:l.entity.url,target:'_blank'},k));}var j=c('React').createClass({displayName:'UFICommentDisabledNotice',propTypes:{feedback:h.object.isRequired},render:function(){var k=this.props.feedback,l=k.commentdisablednotice,m=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:i,ranges:l.ranges,aggregatedranges:l.aggregated_ranges,text:l.text}));return (c('React').createElement('div',{className:'UFIRow'},m));}});f.exports=j;},null);
__d('UFICommentFilters',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getAuthors:function(i){return i.reduce(function(j,k){if(k.author)j=j.concat(k.author);if(k.socialcontext)j=j.concat(k.socialcontext.topmutualid);if(k.replyauthors&&k.replyauthors.length)j=j.concat(k.replyauthors);return j;},[]);},isDeleted:function(i){return i.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function(i){return i.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function(i,j){var k=i.reduce(function(l,m){if(h.isSpam(m)){if(l.spamBucket){l.spamBucket.spamCommentIDs.push(m.id);l.collected.push(null);}else{l.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:m.id,spamCommentIDs:[m.id]};l.collected.push(l.spamBucket);}}else if(j[m.author]){l.spamBucket=null;l.collected.push(m);}return l;},{spamBucket:null,collected:[]});return k.collected;}};f.exports=h;},null);
__d('UFICommentHeader.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'UFICommentHeader',render:function(){return (c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments")));}});f.exports=j;},null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentScrollableArea',propTypes:{contextArgs:h.object},render:function(){var j=this.props,k=j.children,l=j.contextArgs;if(l.scrollcomments&&l.scrollwidth)return (c('React').createElement(c('ScrollableArea.react'),{width:l.scrollwidth},c('React').createElement('div',null,k)));return k;}});f.exports=i;},null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','BanzaiLogger','Event','OnVisible.react','React','SubscriptionsHandler','UserActivity','pageID'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{orderingMode:i.string.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function(){return (c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function(){if(this.firstVisibleTime&&this.isMounted()){var k=this._getTimeInSeconds();if(k>this.firstVisibleTime)c('BanzaiLogger').log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.firstVisibleTime,end_time:k,time_spent_id:c('pageID')});this.firstVisibleTime=0;}},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function(){this.finishInterval();this.listeners.release();},componentDidUpdate:function(){this._checkVisibility();},_getTimeInSeconds:function(){return Math.floor(Date.now()/1000);},_checkVisibility:function(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?h(0):void 0;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){setTimeout(function(){this._checkForIdleViewer();}.bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','throttle'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'UFISeenTracker',getInitialState:function(){return {seen:false};},render:function(){return this.state.seen?this.props.children:c('React').createElement(c('OnVisible.react'),{onVisible:c('throttle')(this.logSeen,100,this)},this.props.children);},logSeen:function(){this.setState({seen:true});c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');}});f.exports=h;},null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIComponentLogger',propTypes:{feedback:h.object.isRequired,hasComments:h.bool.isRequired,isPermalink:h.bool.isRequired,orderingMode:h.string.isRequired,viewerHasInteractedWithComments:h.bool.isRequired},render:function(){var j=this.props,k=j.children,l=j.feedback,m=j.hasComments,n=j.isPermalink,o=j.orderingMode,p=j.viewerHasInteractedWithComments;if(!k)return null;var q=c('React').createElement('div',null,k);if(m&&c('UFIConfig').logCommentsTimespent){var r=p||n;q=c('React').createElement(c('CommentsTimeSpentTracker.react'),{orderingMode:o,viewerHasInteracted:r,targetFBID:l.commentstargetfbid},q);}if(c('UFIConfig').logWhetherUFISeen)q=c('React').createElement(c('UFISeenTracker.react'),null,q);return q;}});f.exports=i;},null);
__d('UFIComponents',['React','UFICommentFilters'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function(k){if(!k)return false;if(k.props.comment&&c('UFICommentFilters').isDeleted(k.props.comment))return false;return true;},i=function(k,l,m){var n=void 0,o=m?k.length-1:0,p=m?-1:k.length,q=m?-1:1;for(n=o;n!=p;n+=q)if(h(k[n])){l(k,n);return k;}return k;},j={applyToUFIComponents:function(k,l,m){k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],l);},false);k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],m);},true);return k;}};f.exports=j;},null);
__d('UFIContainer.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFIContainer',propTypes:{isParentLiveDeleted:i.bool,isReplyList:i.bool},render:function(){return (c('React').createElement('div',{className:(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')},this.props.children));}});f.exports=j;},null);
__d('UFIInlineShareConfirmation.react',['cx','React','UFIImageBlock.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=[i.object,i.string],k=c('React').createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:i.bool.isRequired,isFirstComponent:i.bool,isLastComponent:i.bool,message:i.oneOfType(j).isRequired},render:function(){var l=c('joinClasses')("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''));return (c('React').createElement('div',{className:l},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('i',{className:'UFIConfirmationIcon',role:'presentation'}),this._getText())));},_getText:function(){if(this.props.message.__html)return c('React').createElement('span',{dangerouslySetInnerHTML:this.props.message});return c('React').createElement('span',null,this.props.message);}});f.exports=k;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;function i(k,l,m,n){if(n.count!=null){var o=c('ProfileBrowserTypes').LIKES,p={id:k.targetfbid,actorid:k.actorid},q=[],r;for(var s=0;s<l.length;s++)if(!l[s].count){r=l[s];var t=r.entity;q.push(t.id);}var u=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:k.targetfbid,comment_from:k.actorforpost,seen_user_fbids:q.length?q:true});u=c('ActorURI').create(u,k.actorforpost);var v,w;if(k.displayreactions){v=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',k.entidentifier).getURI();v=c('ActorURI').create(v,k.actorforpost);w=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',k.entidentifier).getURI();w=c('ActorURI').create(w,k.actorforpost);}else{v=c('ProfileBrowserLink').constructDialogURI(o,p).toString();w=c('ProfileBrowserLink').constructPageURI(o,p).toString();}return (c('React').createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:v,href:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),role:'button'},m));}else{var x={source_feedback_owner_id:k.ownerid,source_feedback_identifier:k.entidentifier};return c('HovercardLinkInterpolator')(m,n,null,null,'ufi',x);}}var j=c('React').createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:h.object.isRequired,feedback:h.object.isRequired,likeSentenceData:h.object.isRequired},render:function(){var k=this.props.feedback,l=this.props.likeSentenceData,m,n=l.aggregatedranges||l.aggregated_ranges;m=i;m=m.bind(null,k,l.ranges);return (c('React').createElement(c('TextWithEntities.react'),{interpolator:m,ranges:l.ranges,aggregatedRanges:n,text:l.text}));}});f.exports=j;},null);
__d('UFILikeSentence.react',['cx','invariant','fbt','ActorURI','Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIImageBlock.react','UFIInstanceAction','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','UFISharedDispatcher','UFIStoryAction','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:k.object.isRequired,feedback:k.object.isRequired,isFirstComponent:k.bool,isLastComponent:k.bool,onOrderingModeChange:k.func,showOrderingModeSelector:k.bool},contextTypes:{dispatch:k.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(m){this._bootloadSelectorModule(m);},_bootloadSelectorModule:function(m){if(m.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var n=function(o){this.setState({selectorModule:o});}.bind(this);!!m.contextArgs.entstream?i(0):void 0;c('Bootloader').loadModules(["UFIOrderingModeSelector.react"],n,'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true});}},render:function(){var m=this.props.feedback,n=m.likesentences.current||{},o=this.props.contextArgs.entstream,p=c('joinClasses')("UFIRow"+(m.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":'')),q=null,r=null;if(this.props.contextArgs.hasReactions){r=c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:m,contextArgs:this.props.contextArgs});}else if(n.text)r=c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:this.props.contextArgs,feedback:m,likeSentenceData:n}));var s=r,t=null;if(m.seencount>0&&!o){var u={id:m.targetfbid},v;if(m.seenbyall){v=j._("Seen by everyone");}else v=m.seencount==1?j._("Seen by 1"):j._("Seen by {count}",[j.param('count',m.seencount)]);var w=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:m.entidentifier}),x=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',m.entidentifier).getURI();x=c('ActorURI').create(x,m.actorforpost);var y=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',m.entidentifier).getURI();y=c('ActorURI').create(y,m.actorforpost);t=c('React').createElement('a',{rel:'dialog',ajaxify:x,href:y,'data-hovercard':w.toString(),className:"UFISeenCount"+(!!n.text?' '+"UFISeenCountRight":'')},c('React').createElement('span',{className:'UFISeenCountIcon'}),v);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var z=this.state.selectorModule;t=c('React').createElement(z,{entstream:o,feedback:m,onOrderChanged:function(ba){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.props.contextArgs.instanceid,ba)));}.bind(this)});if(!s)s=c('React').createElement('div',null);}var aa=null;if(q&&r){aa=c('React').createElement(c('UFIImageBlock.react'),null,q,r,t);}else if(s){aa=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},s,t);}else aa=t;return (c('React').createElement('div',{className:p},aa));}});f.exports=l;},null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').STORY.FRIEND_TYPING:if(k[l.ftentidentifier]!==l.isTyping){var m;k=babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]=l.isTyping,m));}break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFISharedDispatcher'));},null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFILiveTypingStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.getStores=function(){return [c('UFILiveTypingStore')];};k.calculateState=function(){var l=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],m=arguments[1],n=m.feedbackTargetID,o=c('UFILiveTypingStore').getState()[n];return {everHadTyping:l.everHadTyping||o,hasTyping:o};};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.hasTyping!=this.state.hasTyping||m.everHadTyping!=this.state.everHadTyping;};k.prototype.render=function(){if(this.state.everHadTyping)return (c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:null,component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))}));return null;};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{pure:true,withProps:true});},null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFIPager',propTypes:{contextArgs:i.object.isRequired,pagerLabel:i.string.isRequired,'data-ft':i.string,countSentence:i.string,isFirstCommentComponent:i.bool,isFirstComponent:i.bool,isLastCommentComponent:i.bool,isLastComponent:i.bool,isLoading:i.bool,isReply:i.bool,isUnseen:i.bool,onPagerClick:i.func},onPagerClick:function(k){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();k.nativeEvent.prevent();},render:function(){var k=this.onPagerClick,l=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),m=null;if(this.props.isLoading)m=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var n=c('React').createElement('a',{className:'UFIPagerLink',onClick:k,href:'#',role:'button'},this.props.pagerLabel,m),o="fcg"+(' '+"UFIPagerCount"),p=c('React').createElement('span',{className:o},this.props.countSentence),q;if(this.props.contextArgs.entstream||!this.props.isReply){q=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},n,p);}else q=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:k,href:'#',role:'button'}),n,p);return (c('React').createElement('div',{className:l,'data-ft':this.props['data-ft']},q));}});f.exports=j;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 reply");case i.VIEW_ONE_MORE:return h._("View 1 more reply");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more replies");case i.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(j,k){if(k.commenters)return this._getCommentLabelWithCommentSentence(j,k);var l;switch(j){case i.VIEW_ONE:return h._("View 1 comment");case i.VIEW_ONE_MORE:return h._("View 1 more comment");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more comments");case i.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(j,k){var l=c('intlList')(k.commenters),m=k.othersCount,n=c('NumberFormat').formatIntegerWithDelimiter(m,k.delimiter),o=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);switch(j){case i.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',l)]);case i.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',l)]);case i.VIEW_ALL:switch(m){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',o,[0,k.count]),h.param('names',l)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',o,[0,k.count]),h.param('names',l)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',o,[0,k.count]),h.param('names',l),h.param('othersCount',n,[0,m])]);}break;case i.VIEW_MORE_EXPLICIT:case i.VIEW_MORE:switch(m){case 0:return h._("View more comments from {names}",[h.param('names',l)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}break;case i.VIEW_PREVIOUS:switch(m){case 0:return h._("View previous comments from {names}",[h.param('names',l)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}break;default:return null;}},_getQuestionLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 question");case i.VIEW_ONE_MORE:return h._("View 1 more question");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more questions");case i.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(j,k,l,m){if(k){return i._getReplyLabel(j,m);}else if(l){return i._getQuestionLabel(j,m);}else return i._getCommentLabel(j,m);}};f.exports=i;},null);
__d('UFIPagerGenerator',['fbt','invariant','NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIPaging,k={isBottomPager:function(l,m){return c('UFICommentOrdering').inverted(m)&&!l;},needsStartOfRangePager:function(l){return l>0;},renderPagers:function(l,m,n,o,p){var q=l.deletedCounts[m],r=l.commentCounts[m],s=r-q,t=o-q,u=c('UFIConfig').numberDelimiter,v=m!==l.contextArgs.ftentidentifier,w=this.isBottomPager(v,l.orderingMode),x={topPager:null,bottomPager:null};!!isNaN(s)?i(0):void 0;!!isNaN(t)?i(0):void 0;var y=l.ranges[m],z=y.isLoadingPrev(),aa=y.isLoadingNext(),ba={delimiter:u,count:0},ca=l.feedback.commentsentenceinfo;if(ca){ba.commenters=ca.explicit_commenter_names;ba.othersCount=ca.other_commenter_count;}var da=n+o==r;if(r<l.contextArgs.pagesize&&da||t===0){var ea,fa=function(){var ia=Math.min(r,l.contextArgs.pagesize);ea=function(){return p(w?j.BOTTOM:j.TOP,{offset:r-ia,length:ia});};var ja=void 0;if(t===0){if(s==1){ja=c('UFIPagerLabel').VIEW_ONE;}else{ba.count=s;ja=c('UFIPagerLabel').VIEW_ALL;}}else if(s-t==1){ja=c('UFIPagerLabel').VIEW_ONE_MORE;}else{ja=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ba.count=s-t;}var ka=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS),la=c('UFIPagerLabel').getLabel(ja,v,l.feedback.isqanda,ba),ma=c('React').createElement(c('UFIPager.react'),{key:'allPager'+m,ref:w?'topLevelBottomPager':null,contextArgs:l.contextArgs,isUnseen:l.feedback.hasunseencollapsed,isLoading:w?aa:z,isReply:v,pagerLabel:la,onPagerClick:ea,'data-ft':ka});if(w){x.bottomPager=ma;}else x.topPager=ma;return {v:x};}();if(typeof fa==="object")return fa.v;}var ga=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,v,l.feedback.isqanda,ba),ha=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,v,l.feedback.isqanda,ba);if(this.needsStartOfRangePager(n))(function(){var ia=Math.max(n-l.contextArgs.pagesize,0),ja=n+o-ia,ka=void 0;if(!v||t>1){var la=c('NumberFormat').formatIntegerWithDelimiter(t,u),ma=c('NumberFormat').formatIntegerWithDelimiter(s,u);ka=h._("{countshown} of {totalcount}",[h.param('countshown',la),h.param('totalcount',ma)]);}var na=function(){return p(w?j.BOTTOM:j.TOP,{offset:ia,length:ja});};if(w){x.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+m,ref:!v?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:z,isReply:v,pagerLabel:ga,onPagerClick:na,countSentence:ka});}else x.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:z,isReply:v,pagerLabel:ha,onPagerClick:na,countSentence:ka});})();if(n+o<r)(function(){var ia=Math.min(o+l.contextArgs.pagesize,r-n),ja=function(){return p(w?j.TOP:j.BOTTOM,{offset:n,length:ia});};if(w){x.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:aa,isReply:v,pagerLabel:ha,onPagerClick:ja});}else x.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!v?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:aa,isReply:v,pagerLabel:ga,onPagerClick:ja});})();return x;}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','Middot.react','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=43200,l=c('React').createClass({displayName:'UFIReplySocialSentence',propTypes:{author:j.object,contextArgs:j.object.isRequired,'data-ft':j.string,isExpanded:j.bool,isFirstComponent:j.bool,isLastComponent:j.bool,isLoading:j.bool,onClick:j.func,orderingMode:j.string,replies:j.number,showVerified:j.bool,timestamp:j.object},render:function(){var m=this.props.isLoading?"UFIReplySocialSentenceLoading":'',n=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o,p;if(this.props.isExpanded){o=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',this.props.replies,[0])]):i._("Hide 1 Reply");}else{o=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',this.props.replies,[0])]):i._("1 Reply");if(this.props.timestamp){var q=c('LiveTimer').getApproximateServerTime()/1000-this.props.timestamp.time;if(q<k||this.props.orderingMode==c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY)p=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var r=this.props.author,s=r&&!this.props.isExpanded,t=null,u;if(s){t=c('React').createElement(c('Image.react'),{alt:'',src:r.thumbSrc,className:"img UFIActorImage _54ru"});var v=null;if(this.props.showVerified)v=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(r.i18nGender){u=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',r.name,[1,r.i18nGender]),i.param('verified_badge',v)])];}else u=[i._("{author}{verified_badge} replied",[i.param('author',r.name),i.param('verified_badge',v)])];u.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),o);}else u=o;return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(s?"UFIReplyActorPhotoWrapper":'')+(s?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(s?' '+"UFIIconWithActor":'')}),t),c('React').createElement('span',{className:m},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},u),p)))));}});f.exports=l;},null);
__d('UFIShareRowCommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','XUFICommentTooltipController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFIShareRowCommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number')n=c('NumberFormat').formatInteger(n);return i._({"comment":"{count (could be abbreviated, such as '3.2k')} comment","comments":"{count (could be abbreviated, such as '3.2k')} comments"},[i.param('count (could be abbreviated, such as \'3.2k\')',n),i['enum'](o?'comment':'comments',{comment:'comment',comments:'comments'})]);};m.prototype.render=function(){var n=this.$UFIShareRowCommentCount1(),o="_2w0q",p=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('span',{'aria-live':'polite',className:o,'data-hover':'tooltip','data-tooltip-uri':p},n));};function m(){j.apply(this,arguments);}m.propTypes={feedback:l.object.isRequired,commentCount:l.oneOfType([l.number,l.string]).isRequired};f.exports=m;},null);
__d('UFIShareRow.react',['cx','fbt','Layout.react','NumberFormat','React','UFIConfig','UFIImageBlock.react','UFIShareRowCommentCount.react','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Layout.react').Column,k=c('Layout.react').FillColumn,l=c('React').PropTypes,m=c('React').createClass({displayName:'UFIShareRow',propTypes:{contextArgs:l.object.isRequired,feedback:l.object.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,shownCommentCount:l.oneOfType([l.number,l.string])},_renderCommentCount:function(){var n=this.props,o=n.feedback,p=n.shownCommentCount;if(p&&p!=0)return (c('React').createElement(c('UFIShareRowCommentCount.react'),{feedback:o,commentCount:p}));return null;},render:function(){var n=this.props.feedback.sharefbid||this.props.feedback.targetfbid,o=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:n}),p=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:n}),q=this.props.contextArgs.loggedOutLinkConfig;if(q&&q.showShareLink)o=q.shareAjaxifyURI;var r;if(this.props.feedback.sharecount>1){var s=c('NumberFormat').formatIntegerWithDelimiter(this.props.feedback.sharecount,c('UFIConfig').numberDelimiter);r=i._({"*":"{count} shares"},[i.param('count',s,[0,this.props.feedback.sharecount])]);}else r=i._("1 share");var t=c('joinClasses')("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),u=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:o.toString(),href:p.toString()},r),v=this._renderCommentCount();if(v)u=c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,u),c('React').createElement(j,null,v));return (c('React').createElement('div',{className:t},u));}});f.exports=m;},null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:i.number.isRequired,isLoading:i.bool,onClick:i.func},render:function(){if(this.props.isLoading)return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'}))));return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._({"*":"{count} hidden"},[h.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'})))));}});f.exports=j;},null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').STORY.SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFISharedDispatcher'));},null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.ftentidentifier,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.ftentidentifier!=this.props.ftentidentifier||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{pure:true,withProps:true});},null);
__d('StaticUFI.react',['csx','cx','Arbiter','BlueBar','BootloadedComponent.react','Bootloader','BootloadOnRender.react','CommentPrelude','CSS','DOM','DOMScroll','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentFilters','UFICommentHeader.react','UFICommentOrdering','UFICommentDisabledNotice.react','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFILiveTypingIndicatorContainer.react','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','URI','XUISpinner.react','dotAccess','focusWithinLayer','getElementPosition','getElementRect','getUnboundedScrollPosition','isEmpty','shallowEqual','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIFeedbackSourceType,k=c('UFIConstants').UFIStatus,l=c('React').PropTypes,m=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),n=c('React').createElement('div',{className:"_xtv",role:'presentation'},c('React').createElement('i',null)),o=c('React').createClass({displayName:'StaticUFI',contextTypes:{dispatch:l.func},getInitialState:function(){var p=this.props.focusReply;return {focusReply:p,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},inlineShare:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,viewerHasInteractedWithComments:false,loadingSpamIDs:{}};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var p=c('throttle')(this.loadMoreComments,20);this._scrollEventListener=c('Event').listen(window,'scroll',p);this._resizeEventListener=c('Event').listen(window,'resize',p);}if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});this._resolveFocus();},componentWillReceiveProps:function(p){if(this.props.focusReply!==p.focusReply)this.setState({focusReply:p.focusReply});if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function(p,q){var r=this.props,s=this.state;return (!c('shallowEqual')(s,q)||!c('shallowEqual')(s.loadingSpamIDs,q.loadingSpamIDs)||!c('shallowEqual')(r,p)||!c('shallowEqual')(r.feedback,p.feedback)||!c('shallowEqual')(r.repliesMap,p.repliesMap)||!c('shallowEqual')(r.commentCounts,p.commentCounts)||!c('shallowEqual')(r.deletedCounts,p.deletedCounts)||!c('shallowEqual')(r.availableComments,p.availableComments)||!c('shallowEqual')(r.ranges,p.ranges)||!c('shallowEqual')(r.authorProfiles,p.authorProfiles)||!c('shallowEqual')(r.commentPermalinks,p.commentPermalinks)||!c('shallowEqual')(r.canAddCommentMap,p.canAddCommentMap)||!c('shallowEqual')(r.canReplyMap,p.canReplyMap)||!c('shallowEqual')(r.inlineShare,p.inlineShare)||!c('shallowEqual')(r.isActiveLoading,p.isActiveLoading)||!c('shallowEqual')(r.repliesExpandedMap,p.repliesExpandedMap));},componentDidUpdate:function(p,q){var r=p.source===j.NEWS_FEED,s=r&&c('BlueBar').hasFixedBlueBar()?this._getOffsetOfRender(this.state.oldBoundingClientRect):null;this._resolveFocus(p);c('Arbiter').inform('ufi/didUpdate',{offsetY:s});},_getOffsetOfRender:function(p){if(!p)return null;var q=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot()).height;if(p.bottom<q)return c('ReactDOM').findDOMNode(this).offsetHeight-p.height;return null;},_resolveFocus:function(p){var q=this;if(this.props.loadingComments)return;if(this.props.inlineShare.toggling){var r=p&&p.inlineShare||{};c('CommentPrelude').expand(c('ReactDOM').findDOMNode(this),false,'ufi.react');if(!r.active&&!this.props.inlineShare.active)this.onComment();var s=this.props.inlineShare.active;if(s)(function(){var aa=!r.loaded;setTimeout(function(){return this._focusInlineShare({shouldHighlight:aa});}.bind(q),10);})();c('UFIInstanceState').updateStateField(this.props.contextArgs.instanceid,'inlineShare','toggling',false);}if(this.state.focusReply){var t=this.state.focusReply,u=t.replyID,v=t.initiatorComment;if(!(u in this.refs))return;var w=this.refs[u]&&this.refs[u].refs&&this.refs[u].refs.mentionsinput;if(!w)return;w.focus();this.setState({focusReply:null});if(!v)return;var x=w.hasEnteredText(),y=v.author===this.props.feedback.actorforpost,z=!!v.parentcommentid;if(!x&&!y&&z)w.insertMention(this._createMentionEntry(v.author));}},_createMentionEntry:function(p){var q=this.props.authorProfiles[p],r=q.type;return new (c('SearchableEntry'))({uniqueID:q.id,title:q.name,type:r==='friend'?'user':r});},_isAds:function(){return this.props.source===j.ADS;},_isLiveVideo:function(){return this.props.source===j.LIVE_VIDEO;},_showLikeSentenceOrderingModeSelector:function(){var p=this.props,q=p.hideOrderingModeSelector,r=p.feedback,s=p.commentCounts,t=p.contextArgs;return (!q&&r.orderingmodes&&s[t.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var p=this.props,q=p.contextArgs,r=p.feedback;if(this._isAds()||this._isLiveVideo()||q.search||this.hasReactions(r,q))return false;var s=r.likesentences,t=r.reactionsentences;return (s&&!c('isEmpty')(s.current)||c('dotAccess')(r,'reactionsentences.current.text',null)||r.seencount>0&&!q.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var p=this.props,q=p.contextArgs,r=p.feedback;if(this._isAds())return false;return (q.showshares&&r.sharecount&&!this.hasReactions(r,q));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var p=this.props.availableComments;return !!(p&&p.length);},_hasAddCommentView:function(){var p=this.props,q=p.canAddCommentMap,r=p.contextArgs,s=p.feedback;return (s.cancomment&&r.showaddcomment&&s.actorforpost&&q[r.ftentidentifier]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var p=this.props.feedback;return p.arecommentsdisabled===true&&p.cancomment===false;},_renderShareRow:function(){if(!this._hasShareRow())return null;var p=this.props,q=p.commentCounts,r=p.contextArgs,s=p.deletedCounts,t=p.feedback,u=r.isPermalink,v=r.hasReactions,w=r.ftentidentifier,x=t.commentcountreduced,y=null;if(this._hasComments()&&u)if(x&&isNaN(x)){y=x;}else if(q&&s&&w&&w in q&&w in s)y=q[w]-s[w];return (c('React').createElement(c('UFIShareRow.react'),{contextArgs:r,feedback:t,shownCommentCount:y}));},render:function(){var p=this.props,q=p.feedback,r=p.contextArgs,s=this._hasLikeSentenceRow(),t=this._hasAddCommentDisabledNotice(),u=this._hasShares(),v=p.inlineShare.message?c('React').createElement(c('UFIInlineShareConfirmation.react'),p.inlineShare):null,w=null;if(s)w=c('React').createElement(c('UFILikeSentence.react'),{contextArgs:p.contextArgs,feedback:p.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()});var x=t?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:p.feedback}):null,y=this._renderShareRow();if(p.loadingComments)return (c('React').createElement(c('UFIContainer.react'),null,v,w,y,m));var z=this._hasComments(),aa=p.ranges[r.ftentidentifier],ba=p.loggingOffset-aa.getOffset(),ca=z?this.renderCommentArray(p.availableComments,ba,false,null):null,da=null,ea=null,fa=q.cancomment,ga=s||u||z||fa,ha=ga?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this._hasAddCommentView()){r.orderingmodes=q.orderingmodes;var ia=this._shouldShowCommentInput(r,z);if(ia){da=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:r,feedbackTargetID:q.targetfbid});ea=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:q.actorforpost,replyCommentID:null,targetID:q.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:q.mentionsdatasource,showSendOnEnterTip:q.showsendonentertip,allowVideoAttachments:q.allowvideoattachments&&!r.islivestreaming,allowPhotoAttachments:q.allowphotoattachments&&!r.islivestreaming,allowStickerAttachments:q.allowstickerattachments&&!r.islivestreaming,contextArgs:r,subtitle:q.subtitle,isQAndA:q.isqanda,markViewerHasInteracted:function(){if(!this.state.viewerHasClickedCommentComposer)this.setState({viewerHasClickedCommentComposer:true});}.bind(this),allowCommentMarkdown:q.iscommentmarkdowneligible});}}var ja=this.renderPagers(r.ftentidentifier,false,p.ranges[r.ftentidentifier].getOffset(),p.ranges[r.ftentidentifier].getLength()),ka=ja.topPager,la=ja.bottomPager,ma=this._hasCommentOrderInverted()?da:null,na=this._hasCommentOrderInverted()?null:da,oa=c('UFIComponents').applyToUFIComponents([ma,ka].concat(ca,[la,na]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),pa=oa.slice(0,2);ma=pa[0];ka=pa[1];var qa=oa.slice(-2);la=qa[0];na=qa[1];ca=oa.slice(2,-2);var ra=this._hasCommentOrderInverted()?ea:null,sa=this._hasCommentOrderInverted()?null:ea,ta=this._hasAddCommentLink()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:q.isqanda}):null,ua=true,va=null;if(r.showCommentNuxForGroupMallAds){ua=false;va=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),null)});}oa=c('UFIComponents').applyToUFIComponents([v,w,y,ra,ka].concat(ca,[la,sa,ta]),{isFirstComponent:ua},{isLastComponent:true});var wa=oa.slice(0,5);v=wa[0];w=wa[1];y=wa[2];ra=wa[3];ka=wa[4];var xa=oa.slice(-3);la=xa[0];sa=xa[1];ta=xa[2];ca=oa.slice(5,-3);if(p.inlineShare.active){return (c('React').createElement(c('UFIContainer.react'),null,c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ShareDialog.react').__setRef('StaticUFI.react')},p.inlineShare.props,{onCancel:function(){return this._resetInlineShare();}.bind(this),onPost:function(ya){c('Bootloader').loadModules(["ShareDialogOsricController"],function(za){za.onPost(ya,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}.bind(this),'StaticUFI.react');}.bind(this),ref:'inlineShare',renderInline:true,status:p.inlineShare.status}))));}else return (c('React').createElement(c('UFIContainer.react'),null,r.shownub&&ga?n:null,v,w,y,ha,va,ra,c('React').createElement(c('UFICommentScrollableArea.react'),{contextArgs:r},c('React').createElement(c('UFIComponentLogger.react'),{feedback:q,hasComments:z,isPermalink:r.isPermalink,orderingMode:p.orderingMode,viewerHasInteractedWithComments:this.props.viewerHasInteractedWithComments||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},ma,ka,ca,la,na)),sa,ta,x));},_shouldShowCommentInput:function(p){var q=c('UFIInstanceState').getKeyForInstance(p.instanceid,'isediting');if(q)return false;if(this._hasComments())return true;var r=c('UFIInstanceState').getKeyForInstance(p.instanceid,'addCommentInput'),s=r?r.expanded:false;if(s)return true;if(p.feedcontext)var t=JSON.parse(p.feedcontext).location_type;return t!==c('FBFeedLocations').REVIEWS_FEED;},_focusInlineShare:function(p){p=p||{};var q=c('ReactDOM').findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)c('focusWithinLayer')(q);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;c('DOMScroll').ensureVisible(q);if(p.shouldHighlight)c('Bootloader').loadModules(["highlight"],function(r){c('CSS').addClass(q,"_5p5");var s=function(){c('CSS').removeClass(q,"_5p5");};r(q,s,'#f6f7f8');},'StaticUFI.react');},renderCommentArray:function(p,q,r,s){var t=this.props,u=t.contextArgs,v=this.props.feedback;if(!p.length)return [];var w=c('UFIInstanceState').getKeyForInstance(u.instanceid,'editcommentid'),x=c('UFICommentFilters').collectSpamBuckets(p,t.authorProfiles);return x.reduce(function(y,z,aa){if(!z)return y;if(c('UFICommentFilters').isSpam(z)){y.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+z.id,ftentidentifier:u.ftentidentifier,viewas:u.viewas,comment:z,parentCommentID:s}));}else{if(z.id==w){y.push(this.renderEditCommentBox(z));}else{var ba=Math.max(q-aa,0),ca=aa===0,da=aa===x.length,ea=!r&&!v.arecommentsdisabled,fa=r&&!ca;y.push(this.renderComment(z,ba,ca,da,ea,fa));}if(!r&&!c('UFICommentFilters').isDeleted(z)){var ga=this.renderReplyContainer(z);if(ga)y.push(ga);}}return y;}.bind(this),[]);},renderReplyContainer:function(p){var q=this.props,r=q.commentCounts[p.id],s=q.repliesExpandedMap[p.id],t=!s&&p.interestingReplyId,u=q.ranges[p.id],v=void 0,w=void 0;if(s||p.interestingReplyId){v=q.repliesMap[p.id];w=u.getOffset();if(t){var x=v.filter(function(sa){return sa.id===p.interestingReplyId;});if(x.length!==1){c('LogHistory').getInstance('ufi').error('comment '+p.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');v=null;}else{v=x;w=p.interestingReplyOffset;}}}var y=void 0;if(v){var z=u.getOffset(),aa=u.getLength();if(t){z=w;aa=1;}var ba=this.renderPagers(p.id,true,z,aa),ca=ba.topPager,da=ba.bottomPager,ea=q.loggingOffset-w;y=this.renderCommentArray(v,ea,true,p.id);}var fa=Math.max(r-p.spamreplycount,0),ga=void 0;if(fa&&(s&&v&&v.length>q.replySocialSentenceMaxReplies||!s&&!v)){var ha=u.isLoadingPrev()||u.isLoadingNext(),ia=s&&!ca&&ha,ja=null;if(p.replyauthors&&p.replyauthors.length)ja=q.authorProfiles[p.replyauthors[0]];ga=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:q.contextArgs,author:ja,replies:s?v.length:fa,timestamp:p.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(p.id));}.bind(this),isLoading:ia,isExpanded:s,showVerified:q.feedback.showfeaturedreplies,orderingMode:q.orderingMode});}var ka=void 0;if(s)if(p.cancomment&&q.canAddCommentMap[p.id]){var la=false;if(y)for(var ma=y.length-1;ma>=0;ma--)if(y[ma]){la=y[ma].props.isAuthorReply;break;}ka=this.renderReplyComposer(p,!la);}var na=void 0;if(ga||ca||y||da||ka){var oa=c('UFIComponents').applyToUFIComponents([ga,ca].concat(y,[da,ka]),{isFirstComponent:true},{isLastComponent:true}),pa=oa.slice(0,2);ga=pa[0];ca=pa[1];var qa=oa.slice(-2);da=qa[0];ka=qa[1];y=oa.slice(2,-2);var ra=p.status===k.LIVE_DELETED;na=c('React').createElement(c('UFIContainer.react'),{key:'replies'+p.id,isParentLiveDeleted:ra,isReplyList:true},ga,ca,y,da,ka);}return na;},renderReplyComposer:function(p,q){var r=this.props,s=r.contextArgs,t=r.feedback,u=c('UFIInstanceState').getKeyForInstance(s.instanceid,'isediting')&&!p.id;if(u)return null;return (c('React').createElement(c('UFIAddComment.react'),{viewerActorID:t.actorforpost,replyCommentID:p.id,targetID:t.ownerid,initialData:null,ref:'replycomposer-'+p.id,withoutSeparator:q,editingComment:{},isEditing:false,mentionsDataSource:t.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:t.allowvideoattachments&&!s.islivestreaming,allowPhotoAttachments:t.allowphotoattachments&&!s.islivestreaming,allowStickerAttachments:t.allowstickerattachments&&!s.islivestreaming,allowCommentMarkdown:t.iscommentmarkdowneligible,contextArgs:s,subtitle:t.subtitle,isQAndA:t.isqanda}));},renderEditCommentBox:function(p){var q=this.props,r=q.contextArgs,s=q.feedback,t={mentionsinput:r.mentionsinput};return (c('React').createElement(c('UFIAddComment.react'),{key:'comment'+p.id,viewerActorID:s.actorforpost,targetID:s.ownerid,mentionsDataSource:s.mentionsdatasource,contextArgs:t,isEditing:true,editingComment:p,allowVideoAttachments:s.allowvideoattachments,allowPhotoAttachments:s.allowphotoattachments,allowStickerAttachments:s.allowstickerattachments,isQAndA:s.isqanda}));},renderComment:function(p,q,r,s,t,u){var v=this.props,w=v.feedback,x=w.actorforpost===p.author,y=c('UFIInstanceState').getKeyForInstance(v.contextArgs.instanceid,'locallycomposed'),z=p.islocal||y&&y[p.id],aa=w.showremovemenu||w.viewerid===p.author,ba=w.canremoveall&&w.isownerpage&&!x,ca=v.source!=j.INTERN,da=!!p.parentcommentid,ea=true;if(da&&p.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[p.parentcommentid]!==null)ea=this.props.canReplyMap[p.parentcommentid];var fa=!!p.isfeatured,ga=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,q),ha=new (c('URI'))(v.commentPermalinks[p.id]).addQueryData({comment_tracking:ga}).toString();return (c('React').createElement(c('UFIComment.react'),{key:'comment'+p.id,isFirst:r,isLast:s,showReplyLink:t,hasPartialBorder:u,comment:p,authorProfiles:v.authorProfiles,viewerIsAuthor:x,feedback:w,'data-ft':ga,contextArgs:v.contextArgs,hideAsSpamForPageAdmin:ba,isLocallyComposed:z,isFeatured:fa,parentCanComment:ea,permalink:ha,showPermalink:ca,showRemoveReportMenu:aa,focusOnMount:p.id===v.commentIDToFocusOnMount,shouldLogVPVs:v.shouldLogVPVs,orderingMode:v.orderingMode,markViewerHasInteracted:function(){if(!this.state.viewerHasClickedSeeMore)this.setState({viewerHasClickedSeeMore:true});}.bind(this)}));},renderPagers:function(p,q,r,s){var t=this.props.commentCounts[p],u=s==t;if(u||this._isAds()||!q&&this.props.hideToplevelPager)return {topPager:null,bottomPager:null};return c('UFIPagerGenerator').renderPagers(this.props,p,r,s,function(v,w){return this.context.dispatch(c('UFIStoryAction').pageInComments(p,v,w));}.bind(this));},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var p=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),q=c('getUnboundedScrollPosition')(window).y,r=q+document.documentElement.clientHeight+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(p.offsetHeight&&p.offsetTop<r)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function(){var p=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();p=c('ReactDOM').findDOMNode(this.refs.toplevelcomposer);}else{var q=c('ReactDOM').findDOMNode(this),r=c('Parent').byTag(q,'form');p=this._findComposerNode(r);if(!p){var s=c('Parent').bySelector(q,"._3g6d");p=this._findComposerNode(s);}p&&p.focus();}c('FbFeedCommentUFIScroller').reveal(p);},_findComposerNode:function(p){return c('DOM').scry(p,'[name="add_comment_text_text"]').concat(c('DOM').scry(p,'[name="add_comment_text"]')).find(function(q){return !c('Parent').byClass(q,'UFIReplyList');});},_beforePostInlineShare:function(){c('UFIInstanceState').updateStateField(this.props.contextArgs.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(p){var q=p.payload.message||c('ShareNowConstants').success;this._resetInlineShare({message:q,isError:false});},_onInlineShareError:function(p){var q=p.errorDescription||c('ShareNowConstants').error;this._resetInlineShare({message:q,isError:true});},_resetInlineShare:function(p){c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'inlineShare',p||{});},_hasCommentOrderInverted:function(){return c('UFICommentOrdering').inverted(this.props.orderingMode);},hasReactions:function(p,q){return (p.displayreactions&&q.hasReactions&&q.feedbackMode==='none');}});f.exports=o;},null);
__d('UFIActionLinks.react',['cx','fbt','BootloadedComponent.react','FBFeedLocations','JSResource','Parent','React','UFIBling.react','UFICommentActionLink.react','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','UFISharedDispatcher','UFIInstanceAction','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.renderActorSelector=function(){var m=this.props.contextArgs.actorSelectorConfig;if(!m)return null;var n=m.props;n.nuxHoverContext=c('Parent').byTag(this.refs.root,'form');var o=m.module;return (c('React').createElement('div',{className:"_40yk"+(this.props.contextArgs.hasReactions?' '+"_pbn":'')},c('React').createElement(o,n)));};l.prototype.renderActionList=function(){var m=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderMessageLink(),this.renderPrivateReplyLink(),this.renderTranslateLink()].filter(function(q){return q;}).map(function(q,r){return (c('React').createElement('span',{key:r},q));}),n=null;if(this.props.contextArgs.quickFeedback){var o=this.props.contextArgs.quickFeedback,p=o.UFIQuickFeedbackLink;n=c('React').createElement(p,o);}if(m.length||n){return (c('React').createElement('div',{className:"_42nr"},m,n));}else return null;};l.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs.instanceid)));}.bind(this)}));return null;};l.prototype.renderLikeLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=n.loggedOutLinkConfig;if(!o.hasviewerliked&&!o.viewercanlike&&!(p&&p.showLikeLink))return null;return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:o,contextArgs:n}));};l.prototype.renderCommentLink=function(){var m=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(m&&m.showCommentLink)){var n=this.props.contextArgs.disabledCommentTooltip;if(n)return (c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':n},i._("Comment"))));return null;}return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs}));};l.prototype.renderShareLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)m.shareURI=n.shareAjaxifyURI;return (c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,ufiInstanceID:this.props.contextArgs.instanceid,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},m)));};l.prototype.renderMessageLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m||!m.messageURI)return null;return (c('React').createElement('a',{ajaxify:new (c('URI'))(m.messageURI).addQueryData({ufi_id:this.props.contextArgs.instanceid}),className:"_2fiv",href:'#',rel:m.shareRel},i._("Message")));};l.prototype.renderPrivateReplyLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(m&&m.messageURI)return null;var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=p.actorforpost,r=p.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(r,q))return null;return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q,activityID:o.ftentidentifier,context:r,seeResponseLabel:false}));};l.prototype.renderTranslateLink=function(){var m=this.props.contextArgs.translationDialogURI;if(!m)return null;return (c('React').createElement('a',{href:m,rel:'dialog'},i._("Translate")));};l.prototype.renderSearchFeedback=function(){var m=this.props.contextArgs.inlineSearchFeedbackConfig;if(!m)return null;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},m)));};l.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelector.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,onOrderChanged:function(m){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.props.contextArgs.instanceid,m)));}.bind(this)})));};l.prototype.renderLayout=function(m,n,o){n=n.map(function(p,q){return p&&c('React').createElement('div',{className:"_3m9g",key:q},p);}).filter(function(p){return p;});if(!m&&n.length===0)return null;return (c('React').createElement('div',{className:c('joinClasses')("_3399",o)},n,c('React').createElement('div',{className:"_524d"},m)));};l.prototype.shouldRenderActionButtons=function(){var m=null;if(this.props.contextArgs.feedcontext)try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(n){}if(m===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||m===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||m===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE)return false;return true;};l.prototype.hasCounts=function(){return this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount;};l.prototype.render=function(){var m=this.renderActorSelector(),n=this.renderSearchFeedback(),o=[],p=[],q=null,r=this.renderBling();if(r){p.push(m);if(this.hasCounts()){q=this.renderLayout(null,[n],"_1f6t");}else p.push(n);}else{o.push(m);o.push(n);}o.push(this.renderCommentOrderingModeSelector());var s="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),t=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),o,"_a7s clearfix"):null;return (c('React').createElement('div',{ref:'root'},q,this.renderLayout(r,p,s),t));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d("CommentLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1710550109168151";}};f.exports=h;},null);
__d('UFICommentLikeSubscription',['CommentLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_like_subscribe';}});f.exports=h;},null);
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1735982396624922";}};f.exports=h;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=h;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList','UFIConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIReplyCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};function j(k,l,m,n){i.constructor.call(this,k,l,c('UFIConstants').UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelPagedCommentList'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};j.getCommentListsForFeedbackTargetID=function(k){};j.getCommentListForFeedbackTargetID_UNSAFE=function(k){};j.resetCommentListsForFeedbackTargetID=function(k){};function j(k,l,m){i.constructor.call(this,k,c('UFIConstants').UFICommentOrderingMode.FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeedbackFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function(i){var j=[];if(i.reactorids)j=j.concat(i.reactorids);if(i.actorforpost)j=j.concat(i.actorforpost);return j;}};f.exports=h;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;},null);
__d('UFIFetcher',['Promise','ShortProfiles','UFIPagedCommentList','UFIRange','UFIFeedbackTargets','getObjectValues'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={fetchNewFeedbackTarget:function(i){return new (c('Promise'))(function(j,k){return (c('UFIFeedbackTargets').getFeedbackTarget(i,j));});},fetchShortProfiles:function(i){return new (c('Promise'))(function(j,k){return (c('ShortProfiles').getMulti(i,j));});},fetchComments:function(i,j,k){return new (c('Promise'))(function(l,m){return (i.getComments(j.getOffset(),j.getLength(),k,l));}).then(function(l){return c('getObjectValues')(l);});}};f.exports=h;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1710550255834803";}};f.exports=h;},null);
__d('UFILikeSubscription',['FeedbackLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_like_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_like_subscribe';}});f.exports=h;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null);
__d('UFILiveStreamingComments',['Arbiter','AsyncRequest','BanzaiODS','Map','Set','StreamingReactionsTrayEvents','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelStreamedCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(k,l,m){this.eftID=k;this.totalCommentCount=l;this.tailCommentFBID=m;this.queue=[];this.ufiPayloadBuffer=[];this.fireworksAnimating=false;this.localCommentBodies=new (c('Set'))();this.errorCount=0;this.interval=c('setInterval')(function(){if(this.queue.length>c('UFIConfig').facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new (c('AsyncRequest'))().setURI(this.getNextURI()).setHandler(function(n){switch(n.payload.status){case 'streaming':this.enqueueMoreComments(n.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':c('clearInterval')(this.interval);return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)c('BanzaiODS').bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){c('BanzaiODS').bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');c('clearInterval')(this.interval);return;}break;}}.bind(this)).send();}.bind(this),2000);c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){if(p.parentcommentid)return;if(p.islocal)this.trackLocalComment(p);}.bind(this));}.bind(this));c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').FireworksAnimating,function(n,o){this.fireworksAnimating=o;if(!this.fireworksAnimating)this.backFillComments();}.bind(this));}i.prototype.enqueueMoreComments=function(k){if(!k.ufipayloads||isNaN(k.commentcount))return;var l=k.ufipayloads.filter(function(o){return !this.resemblesLocalComment(o.comments[0]);}.bind(this)),m=-1;if(this.tailCommentFBID!==null)m=l.findIndex(function(o){return o.comments[0].fbid===this.tailCommentFBID;}.bind(this),this);if(m===-1){this.queue=l;}else this.queue=this.queue.concat(l.slice(m+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var n=k.commentcount-this.queue.length;if(n>this.totalCommentCount)this.totalCommentCount=n;if(c('UFIConfig').showAccurateStreamingCommentCount)c('UFIToplevelStreamedCommentList').getCommentList(this.eftID).updateCommentCount(this.totalCommentCount);};i.prototype.renderNextComment=function(){if(this.queue.length===0)return;if(this.fireworksAnimating){this.ufiPayloadBuffer.push(this.queue.shift());}else c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,this.queue.shift());};i.prototype.backFillComments=function(){for(var k=this.ufiPayloadBuffer,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++];}else{m=k.next();if(m.done)break;n=m.value;}var o=n;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,o);}this.ufiPayloadBuffer=[];};i.prototype.getNextURI=function(){return c('XLiveStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();};i.prototype.trackLocalComment=function(k){var l=i.hashCommentData(k);this.localCommentBodies.add(l);};i.prototype.resemblesLocalComment=function(k){var l=i.hashCommentData(k);return this.localCommentBodies.has(l);};i.prototype.stopInterval=function(){c('clearInterval')(this.interval);};i.hashCommentData=function(k){var l=k.author+k.body.text;if(k.attachment)l+=':'+k.attachment.fbid;return l;};var j={start:function(k,l,m){if(h.get(k))return;h.set(k,new i(k,l,m));},stop:function(k){var l=h.get(k);if(!l)return;l.stopInterval();}};f.exports=j;},null);
__d('UFILiveVideoCommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('CommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=h;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;m.replyid=l.parentcommentid;m.attachedphoto=l.body.mentionsphoto;m.attachedvideo=l.body.mentionsvideo;c('UFIUserActions').addComment(l.ftentidentifier,o,p,m);}function j(l,m){var n=l.body.text,o=l.body.mentionstext;m.attachedPhoto=l.body.mentionsphoto;m.attachedSticker=l.attachment;m.attachedVideo=l.body.mentionsvideo;c('UFIUserActions').editComment(l.id,n,o,m);}var k={retrySubmit:function(l,m){switch(l.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(l,m);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(l,m);break;default:h.error('retrysubmitstatus',{status:l.status});break;}}};f.exports=k;},null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIReactionsUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',m);if(!l||!l.feedback_like_subscribe)return;var n=l.feedback_like_subscribe.feedback,o=l.feedback_like_subscribe.liker;if(!n||!o)return;var p=[babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,likesentences:{current:n.does_viewer_like?n.viewer_likes_sentence:n.viewer_does_not_like_sentence,alternate:n.does_viewer_like?n.viewer_does_not_like_sentence:n.viewer_likes_sentence},hasviewerliked:n.does_viewer_like,likecount:n.likers.count},{})],q=n.reactions_summary;if(q){var r=c('UFIReactionsUtils').getReactionCountMapFromSummary(n.reactions_summary),s=n.viewer_feedback_reaction_info?n.viewer_feedback_reaction_info.key:0,t=n.reaction_count_reduced?n.reaction_count_reduced:n.reactors.count;p.push(babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,viewerreaction:s,reactioncount:n.reactors.count,reactioncountreduced:t,reactioncountmap:r,reactionsentences:{current:s?n.viewer_likes_reaction_sentence:n.viewer_does_not_like_reaction_sentence,alternate:s?n.viewer_does_not_like_reaction_sentence:n.viewer_likes_reaction_sentence}},{}));}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:p});},handleLiveComment:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var n=l&&l.comment_create_subscribe&&l.comment_create_subscribe.comment;if(!n)return;i('comment',m,{comment_id:n.legacy_token});var o=babelHelpers['extends']({author:n.author.id,body:n.body,cancomment:n.feedback.can_viewer_comment,canedit:n.can_viewer_edit,canremove:n.can_viewer_delete,clientid:l.comment_create_subscribe.client_mutation_id,ftentidentifier:k,id:n.legacy_token,fbid:n.legacy_fbid,legacyid:n.legacy_fbid,timestamp:{time:n.created_time,text:h._("a few seconds ago")},hasviewerliked:n.feedback.does_viewer_like,isfeatured:n.is_featured,istranslatable:n.translation_available_for_viewer,likecount:n.feedback.likers.count,viewercanlike:n.feedback.can_viewer_like,parentcommentid:n.comment_parent&&n.comment_parent.legacy_token,spamreplycount:0},{});if(n.attachments.length){var p=n.attachments[0],q=p.style_list;if(q&&q.length&&q[0]=='sticker'){var r=p.target;o.attachment={fbid:r.id,metadata:{source_uri:r.img.uri,source_uri_2x:r.img_2x.uri,width:r.img.width,height:r.img.height,frameCount:r.frame_count,frameRate:r.frame_rate,framesPerCol:r.frames_per_column,framesPerRow:r.frames_per_row,sprite_uri:r.sprite_img&&r.sprite_img.uri,sprite_uri_2x:r.sprite_img_2x&&r.sprite_img_2x.uri},type:'sticker'};}else if(q&&q.length&&q[0]=='photo'){var s=p.target;o.attachment={fbid:s.id,metadata:{preview_uri:s.photo_img&&s.photo_img.uri,width:s.photo_img.width,height:s.photo_img.height,url:s.url},type:'photo'};}else if(q&&q.length&&q[0]=='share'){p.type='live_share';o.attachment=p;}else if(q&&q.length&&q[0]=='video_inline'){p.type='video';o.attachment=p;}else if(q&&q.length&&q[0]=='comment_place_info'){p.type='live_comment_place_info';o.attachment=p;}}var t=n.feedback;if(t.reactions_summary){o.canviewerreact=t.can_viewer_react;o.reactioncount=t.reactors.count;o.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(t.reactions_summary);o.reactioncountreduced=t.reaction_count_reduced?t.reaction_count_reduced:t.reactors.count;o.viewerreaction=t.viewer_feedback_reaction_info?t.viewer_feedback_reaction_info.key:0;}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[o]});},handleLiveCommentLike:function(k,l,m){i('comment_like',m);var n=l&&l.comment_like_subscribe&&l.comment_like_subscribe.feedback;if(!n)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:l.comment_like_subscribe.client_mutation_id,commentid:n.legacy_comment_token,likecount:n.likers&&n.likers.count,viewerliked:n.does_viewer_like}]});}};f.exports=j;},null);
__d("FeedbackTypingSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1664090980480731";}};f.exports=h;},null);
__d('UFITypingSubscription',['FeedbackTypingSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_typing_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackTypingSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_typing_subscribe';}});f.exports=h;},null);
__d('UFITypingSubscriptionController',['UFITypingSubscription','getByPath'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=15*1000;function i(k){var l=c('getByPath')(k,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),m=c('getByPath')(k,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(l,10)||0,otherCount:parseInt(m,10)||0};}function j(k,l){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=l;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(k,this.$UFITypingSubscriptionController4.bind(this));}j.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe();};j.prototype.$UFITypingSubscriptionController4=function(k){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2(i(k));this.$UFITypingSubscriptionController1=setTimeout(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0});}.bind(this),h);};j.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null;}};f.exports=j;},null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comment-embed\/async\/embed\/dialog\/",{comment_id:{type:"String",required:true},width:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('UFIController',['csx','fbt','invariant','Promise','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','DOMQuery','XCommentEmbedPluginEmbedAsyncDialogController','JSResource','LiveTimer','Parent','React','ReactDOM','Run','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFICommentSubscription','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFIFeedbackTargets','UFIFetcher','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionController','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','URI','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('UFIConstants').UFIPayloadSourceType,l=c('UFIConstants').UFIPaging,m=c('UFIConstants').UFIFeedbackMode,n=function(q,r,s,t){var u=q.getRequestedOffset(),v=q.getRequestedLength(),w=u+v===r,x=w&&o(t)?s-u:v;return new (c('UFIRange'))(u,x);},o=function(q){return q==k.USER_ACTION||q==k.LIVE_SEND;};p.prototype.$UFIController1=function(q,r){if(!this.$UFIController2||r!==k.INITIAL_SERVER)return;this.$UFIController2.startRecording(q);};p.prototype.$UFIController3=function(q,r){if(!this.$UFIController2||r!==k.INITIAL_SERVER)return;var s=this.$UFIController4;this.$UFIController2.log(q,r,{num_comments:this.comments&&this.comments.length||0,num_likes:this.$UFIController5.feedback&&this.$UFIController5.feedback.likecount||0,features:{is_featured:!!this.$UFIController5.featuredCommentLists[s.ftentidentifier],is_streaming:this.$UFIController6(),is_lazy_fetch:s.lazyFetch,is_disable_css_hiding:s.disableCSSHiding}});};p.factory=function(q,r,s){new p(q,r,s);};function p(q,r,s){this.$UFIController2=c('UFIConfig').perfLogger?new (c('UFIConfig').perfLogger)(r.ftentidentifier):null;this.$UFIController1('construct',k.INITIAL_SERVER);this.$UFIController7();this.$UFIController8();this.root=q;this.$UFIController4=r;this.$UFIController4.rootid=this.root.id;c('UFIRootRegistry').registerController(q.id,function(){this.$UFIController9();this.$UFIController10();}.bind(this));this.$UFIController11=function(){if(!this.$UFIController12){var da=c('UFIRootRegistry').isSnowliftNode(this.root.id),ea=da?c('DOMQuery').scry(this.root,"^.fbPhotosSnowliftFeedback ._37uu"):c('DOMQuery').scry(this.root,"^form ._37uu");this.$UFIController12=ea&&ea[0]||null;}return this.$UFIController12;}.bind(this);var t=r.feedbackMode===m.NEVER||r.feedbackMode===m.NONE;this.$UFIController5={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:t,viewerHasInteractedWithComments:false,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},toplevelPagerClickCounts:{},replyPagerClickCounts:{},videoTimeOffset:null};this.authorProfiles=[];this.commentcounts={};this.comments=[];this.repliesMap={};var u=s.feedbacktargets[0];this.orderingMode=u.defaultcommentorderingmode;r.livevideographqlcomments=u.lvc;if(this.canRenderHeader()){this.renderHeader(u);}else new (c('UFIActionLinkController'))(q,r,u);var v=Date.now();if(u.ll)this.liveLikeSubscription=c('UFILikeSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveLike(r.ftentidentifier,da,Date.now()-v);});if(u.lc)this.liveCommentSubscription=c('UFICommentSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveComment(r.ftentidentifier,da,Date.now()-v);});if(u.lvc)this.liveVideoCommentSubscription=c('UFILiveVideoCommentSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveComment(r.ftentidentifier,da,Date.now()-v);});if(u.lcl)this.liveCommentLikeSubscription=c('UFICommentLikeSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveCommentLike(r.ftentidentifier,da,Date.now()-v);});if(u.lti&&c('UFIConfig').showLiveTypingInUFI)this.liveTypingSubscription=new (c('UFITypingSubscriptionController'))(u.targetfbid,function(da){var ea=c('UFIConfig').liveTypingForEveryone?da.friendCount+da.otherCount:da.friendCount;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').friendTyping(r.ftentidentifier,!!ea));});var w=null;if(s.featuredcommentlists&&s.featuredcommentlists.comments&&s.featuredcommentlists.comments[r.ftentidentifier]){w=s.featuredcommentlists.comments[r.ftentidentifier];this.$UFIController5.featuredCommentLists[r.ftentidentifier]=new (c('UFIFeaturedToplevelCommentList'))(r.ftentidentifier,w.values,s.comments);}else{var x=s.commentlists.comments,y=x[r.ftentidentifier];w=y[this.orderingMode];}this.ranges={};this.replyRanges={};this.commentcounts={};this.commentcounts[r.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new (c('UFIRange'))(w.range.offset,w.range.length);this.$UFIController5.oldRange={offset:w.range.offset,length:this.comments&&this.comments.length||0};var z=void 0,aa=void 0,ba=void 0;if(s.commentlists.replies)for(z=0;z<w.values.length;z++){aa=w.values[z];ba=s.commentlists.replies[aa];if(ba){this.commentcounts[aa]=this.getReplyCommentList(aa).getCommentCount();this.replaceReplyRange(aa,new (c('UFIRange'))(ba.range.offset,ba.range.length));}}if(s.featuredcommentlists)if(s.featuredcommentlists.replies)for(z=0;z<w.values.length;z++){aa=w.values[z];ba=s.featuredcommentlists.replies[aa];if(ba){this.$UFIController5.featuredCommentLists[aa]=new (c('UFIFeaturedReplyCommentList'))(r.ftentidentifier,aa,ba.values,s.comments);this.commentcounts[aa]=this.getReplyCommentList(aa).getCommentCount();this.replaceReplyRange(aa,c('UFIRange').combine(new (c('UFIRange'))(ba.range.offset,ba.range.length),this.replyRanges[aa]));}}this.$UFIController13=null;this.$UFIController14=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(da,ea){var fa=ea.updates;if(r.ftentidentifier in fa){this.$UFIController5.payloadSource=ea.payloadSource;this.fetchAndUpdate(this.$UFIController5.payloadSource);}}.bind(this)),c('UFICentralUpdates').subscribe('feedback-id-changed',function(da,ea){var fa=r.ftentidentifier,ga=ea.updates;if(fa in ga){this.$UFIController4=babelHelpers['extends']({},r,{ftentidentifier:ga[fa]});r=this.$UFIController4;}}.bind(this)),c('UFICentralUpdates').subscribe('instance-updated',function(da,ea){var fa=ea.updates;if(r.instanceid in fa){var ga=fa[r.instanceid];if(ga.editcommentid||ga.inlineShare){this.$UFIController5.payloadSource=ea.payloadSource;if(this.canRenderHeader())this.renderHeader(this.$UFIController5.feedback);this.render();}}}.bind(this)),c('UFICentralUpdates').subscribe('actor-changed',function(da,ea){this.$UFIController15();}.bind(this))];this.pageletDestroySubscription=c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController10();this.$UFIController9();}.bind(this));this.ufiUIPageClearedSubscription=c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController10();this.$UFIController9();}.bind(this));this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController16();}.bind(this));c('UFICentralUpdates').handleUpdate(k.INITIAL_SERVER,s);if(r.viewas)this.viewasUFICleanSubscription=c('Arbiter').subscribe('pre_page_transition',function(da,ea){if(r.viewas!==new (c('URI'))(ea.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(r.ftentidentifier);c('UFIToplevelStreamedCommentList').resetCommentListForFeedbackTargetID(r.ftentidentifier);}});if(this.$UFIController6()){var ca=null;if(s.comments&&s.comments.length>0)ca=s.comments[s.comments.length-1].fbid;c('UFILiveStreamingComments').start(r.ftentidentifier,u.commentcount,ca);}if(!r.lazyFetch&&!this.canRenderHeader())this.$UFIController17(u);if(r.isFluentWithContent)c('UFIVideoPlayerRegistry').registerUFIController(this.root,function(da){da.addListener('updateStatus',function(ea){this.$UFIController5.videoTimeOffset=Math.floor(ea.position);}.bind(this));}.bind(this));this.$UFIController3('construct',k.INITIAL_SERVER);}p.prototype.$UFIController10=function(){var q=this.$UFIController11();if(q)c('ReactDOM').unmountComponentAtNode(q);c('ReactDOM').unmountComponentAtNode(this.root);};p.prototype.unitTestOnlySetFeedbackIntoState=function(q){this.$UFIController5.feedback=q;};p.prototype.$UFIController7=function(){if(!this.$UFIController18){this.$UFIController19=new (c('UFIDispatcher'))();this.$UFIController20={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController19),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController19)};this.$UFIController18=new (c('SubscriptionsHandler'))();this.$UFIController18.addSubscriptions(this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.CANCEL,function(){return this.$UFIController15();}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_LIKE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentLike(q.comment.id,q.like,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.CHANGE_REACTION,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentReaction(q.comment.id,q.reactionType,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_PIN,function(q){return c('UFIUserActions').changeCommentPin(q.comment.id);}),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(r){return (r.show(function(){c('UFIUserActions').removeComment(q.comment.id,{source:this.$UFIController4.source,oneclick:false,target:q.target});q.onConfirm();}.bind(this)));}.bind(this),'UFIController');}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EDIT,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',true);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',q.comment.id);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TRANSLATE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').translateComment(q.comment,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').setHideAsSpam(q.comment.id,q.is_spam,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,function(q){return c('UFIUserActions').banUser(q.comment,q.ownerid,q.is_banned,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EMBED,function(q){var r=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',q.comment.id).getURI();new (c('AsyncRequest'))(r).send();}),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.SHOW_CONSTITUENT_TITLE,function(q){c('UFIUserActions').showConstituentTitle(q.comment);}),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.HIDE_CONSTITUENT_TITLE,function(q){c('UFIUserActions').hideConstituentTitle(q.comment);}),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').typingChange(this.$UFIController4.ftentidentifier,q.state);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFINewCommentNotifier').onNewComment(this.$UFIController21(),this.$UFIController4,q.comment,q.target,q.replyCommentID,q.timestamp,this.$UFIController5.videoTimeOffset);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,function(q){var r=q.comment,s=q.commentData,t=q.target;this.$UFIController5.viewerHasInteractedWithComments=true;if(!s.visibleValue&&!s.attachedPhoto&&!s.attachedVideo&&!s.attachedSticker){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(u){return (u.show(function(){return (c('UFIUserActions').removeComment(r.id,{source:this.$UFIController4.source,oneclick:false,target:t}));}.bind(this)));}.bind(this),'UFIController');}else c('UFIUserActions').editComment(r.id,s.visibleValue,s.encodedValue,{source:this.$UFIController4.source,target:t,attachedPhoto:s.attachedPhoto,attachedVideo:s.attachedVideo,attachedSticker:s.attachedSticker});c('UFIInstanceState').updateStateField(this.$UFIController4.instanceid,'locallycomposed',r.id,true);this.$UFIController15();}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,function(q){return c('UFIUserActions').removePreview(q.comment,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,function(q){return c('UFIRetryActions').retrySubmit(q.comment,{source:this.$UFIController4.source});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController22(q.commentID,q.direction,new (c('UFIRange'))(q.nextRange.offset,q.nextRange.length));this.render();this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.TOGGLE_REPLIES,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController5.viewerHasInteractedWithComments=true;var r=q.commentID,s=this.$UFIController5.repliesExpandedMap[r];if(s){delete this.$UFIController5.isActiveLoading[r];this.$UFIController5.repliesExpandedMap[r]=false;this.render();}else{this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+r,initiatorComment:null};this.$UFIController22(r,l.BOTTOM,this.$UFIController23(r));this.render();this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.SHOW_REPLIES,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+q.commentID,initiatorComment:q.initiatorComment};this.$UFIController22(q.commentID,l.BOTTOM,this.$UFIController23(q.commentID));this.render();this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.COMMENTS_ARRIVED,function(q){this.$UFIController5.payloadSource=q.source;this.$UFIController5.showLoadingUFI=false;this.$UFIController5.isActiveLoading={};this.$UFIController5.commentIDToFocusOnMount=q.source===k.USER_ACTION?this.$UFIController24(q.newOffset,q.newLength):null;this.$UFIController5.oldRange={offset:q.newOffset,length:q.newLength};this.render();if(q.source==k.ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController4.ftentidentifier,Date.now());}}.bind(this)));}};p.prototype.$UFIController8=function(){this.$UFIController25=[c('UFISharedDispatcher').register(function(q){switch(q.type){case c('UFIActionTypes').INSTANCE.TOGGLE_COMMENTS:if(q.instanceID!==this.$UFIController4.instanceid)return;if(!this.$UFIController4.disableinlinetoggle){this.$UFIController5.payloadSource=k.COLLAPSE_ACTION;this.$UFIController5.isHidden=!this.$UFIController5.isHidden;if(!this.$UFIController5.isHidden)this.$UFIController5.viewerHasInteractedWithComments=true;this.render();}break;case c('UFIActionTypes').INSTANCE.CHANGE_ORDER_MODE:if(q.instanceID!==this.$UFIController4.instanceid)return;this.$UFIController5.payloadSource=k.USER_ACTION;this.orderingMode=q.mode;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.viewerHasInteractedWithComments=true;this.render();this.fetchAndUpdate(this.$UFIController5.payloadSource);break;}}.bind(this))];};p.prototype.getStores=function(){return this.$UFIController20;};p.prototype.$UFIController23=function(q){var r=this.commentcounts[q],s=Math.min(r,this.$UFIController4.pagesize);return new (c('UFIRange'))(r-s,s);};p.prototype.$UFIController22=function(q,r,s){this.$UFIController5.viewerHasInteractedWithComments=true;var t=q!==this.$UFIController4.ftentidentifier;this.$UFIController5.isActiveLoading[q]=r;if(t){this.$UFIController5.repliesExpandedMap[q]=true;}else this.$UFIController5.hasPagedToplevel=true;if(q==this.$UFIController4.ftentidentifier){var u=this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0;this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]=u+1;this.getRange().updateRequestedRange(s.offset,s.length);}else{var v=this.$UFIController5.replyPagerClickCounts[q]||0;this.$UFIController5.replyPagerClickCounts[q]=v+1;this.replyRanges[q].updateRequestedRange(s.offset,s.length);}};p.prototype.$UFIController6=function(){if(this.$UFIController4.livevideographqlcomments)return false;if(!this.$UFIController4.islivestreaming)return false;return true;};p.prototype.$UFIController21=function(){if(!this.$UFIController26)this.$UFIController26=c('Parent').byTag(this.root,'form');return this.$UFIController26;};p.prototype.$UFIController15=function(){c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',false);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',null);};p.prototype.$UFIController27=function(){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.requestedInitialComments=true;var q=this.getToplevelCommentList().getCommentCount(),r=Math.min(q,this.$UFIController4.numLazyComments);c('forEachObject')(this.ranges,function(s){return s.updateRequestedRange(q-r,r);});this.fetchAndUpdate(this.$UFIController5.payloadSource);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController4.ftentidentifier,function(s){if(this.canRenderHeader()){this.renderHeader(s);}else this.$UFIController17(s);}.bind(this));};p.prototype.$UFIController17=function(q){if(this.shouldShowCommentOrderingModeSelector(q))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(r){c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelector.react').__setRef('UFIController'),onOrderChanged:this.onCommentOrderingModeSelectorChange,feedback:q}),r);}.bind(this));};p.prototype.canRenderHeader=function(){var q=this.$UFIController11();return !!q;};p.prototype.renderHeader=function(q){if(!this.canRenderHeader())return;var r=this.$UFIController4.hasReactions&&this.$UFIController4.feedbackMode==='none'&&q.displayreactions&&this.shouldShowCommentOrderingModeSelector(q)&&(!this.$UFIController4.lazyFetch||this.$UFIController5.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('UFIActionLinks.react'),{root:this.root,contextArgs:this.$UFIController4,feedbacktarget:q,showCommentOrderingModeSelector:r})),this.$UFIController11());};p.prototype.render=function(){var q=this.$UFIController5.payloadSource;this.$UFIController1('render',q);if(this.$UFIController5.showLoadingUFI){c('ReactDOM').render(this.$UFIController28(),this.root);this.$UFIController3('render',q);return;}var r=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'inlineShare')||{},s=this.comments.length||!c('isEmpty')((this.$UFIController5.feedback.reactionsentences||this.$UFIController5.feedback.likesentences).current);if((s&&o(q)||r.toggling)&&this.$UFIController4.feedbackMode!==m.NEVER){this.$UFIController5.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController4.disableCSSHiding&&this.$UFIController5.isHidden){this.$UFIController3('render',q);c('ReactDOM').unmountComponentAtNode(this.root);return;}if(this.$UFIController4.lazyFetch&&!this.$UFIController5.requestedInitialComments&&!r.active){c('ReactDOM').render(this.$UFIController28(),this.root);this.$UFIController3('render',q);this.$UFIController27();return;}var t=this.getRange();if(this.$UFIController13===null)this.$UFIController13=t.getOffset()+t.getLength()-1;var u=this.$UFIController5.feedback.replysocialsentencemaxreplies||-1,v={};v[this.$UFIController4.ftentidentifier]=new (c('UFIRange'))(t.offset,t.length).updateRequestedRange(t.requestedOffset,t.requestedLength);for(var w in this.replyRanges)v[w]=new (c('UFIRange'))(this.replyRanges[w].offset,this.replyRanges[w].length).updateRequestedRange(this.replyRanges[w].requestedOffset,this.replyRanges[w].requestedLength);var x=babelHelpers['extends']({},this.$UFIController5.defaultRepliesExpandedMap,this.$UFIController5.repliesExpandedMap),y=!!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier],z=this.$UFIController4.islivestreaming?true:this.getToplevelCommentList().getClientHasAll()&&t.offset===0&&t.length===this.getToplevelCommentList().getCommentCount(),aa=this.$UFIController4.mayLogVPVs&&this.orderingMode===c('UFIConstants').UFICommentOrderingMode.FILTERED,ba=this.$UFIController29(q),ca=this.$UFIController5.viewerHasInteractedWithComments,da=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,contextArgs:this.$UFIController4,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController5.deletedCounts,availableComments:this.comments,source:this.$UFIController4.source,ranges:v,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController13,replySocialSentenceMaxReplies:u,orderingMode:this.orderingMode,hideOrderingModeSelector:y,commentPermalinks:this.$UFIController5.commentPermalinks,canAddCommentMap:this.$UFIController5.canAddCommentMap,canReplyMap:this.$UFIController5.canReplyMap,focusReply:ba,inlineShare:r,isActiveLoading:this.$UFIController5.isActiveLoading,repliesExpandedMap:x,hasPagedToplevel:this.$UFIController5.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController5.commentIDToFocusOnMount,hideToplevelPager:z,shouldLogVPVs:aa,viewerHasInteractedWithComments:ca}));c('ReactDOM').render(da,this.root);c('LiveTimer').updateTimeStamps();if(this.$UFIController21())c('Arbiter').inform(c('UFIUIEvents').Changed,{form:this.$UFIController21()});if(q!=k.INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController5.focusedReplyComposer=null;this.$UFIController3('render',q);};p.prototype.$UFIController29=function(q){if(q===k.INITIAL_SERVER&&this.$UFIController5.feedback.permalinkcommentid){var r='replycomposer-'+this.$UFIController5.feedback.permalinkcommentid;return {replyID:r};}else if(this.$UFIController5.focusedReplyComposer)return this.$UFIController5.focusedReplyComposer;return null;};p.prototype.$UFIController24=function(q,r){var s=this.$UFIController5.oldRange;if(s.offset!=q||s.length!=r){var t=q<s.offset?s.length:0;if(t<r)return this.comments[t].id;}return this.$UFIController5.commentIDToFocusOnMount;};p.prototype.$UFIController30=function(q,r,s){if(r.id===q.permalinkcommentid)return true;if(s>1)return true;if(s>0&&r.interestingReplyOffset===undefined)return true;var t=r.author===q.viewerid;if(t&&s==1)return true;return false;};p.prototype.getNewRange=function(q,r,s){if(r.islivestreaming){return new (c('UFIRange'))(0,r.feedcarded?4:50);}else return n(this.getRange(),this.commentcounts[r.ftentidentifier],s,q);};p.prototype.getNewReplyRange=function(q,r,s,t){var u=r.id;if(this.replyRanges[u]){return n(this.getReplyRange(u),this.commentcounts[u],t,q);}else if(r.interestingReplyOffset!==undefined){return new (c('UFIRange'))(r.interestingReplyOffset,1);}else{var v=s.isranked?0:Math.min(t,2);return new (c('UFIRange'))(0,v);}};p.prototype.fetchAndUpdateWithLogs=function(q){!(q===this.$UFIController5.payloadSource)?j(0):void 0;this.$UFIController31(q,true);};p.prototype.fetchAndUpdate=function(q){!(q===this.$UFIController5.payloadSource)?j(0):void 0;this.$UFIController31(q,false);};p.prototype.$UFIController31=function(q,r){c('UFIFetcher').fetchNewFeedbackTarget(this.$UFIController4.ftentidentifier).done(function(s){this.$UFIController5.feedback=s;if(o(q))this.render();if(this.canRenderHeader())this.renderHeader(s);if(!this.$UFIController5.isHidden)this.fetchAllCommentsAndRender(q,r);}.bind(this));};p.prototype.fetchAllCommentsAndRender=function(q,r){this.fetchAllComments(q,r).done(function(){this.$UFIController19.dispatch(c('UFIStoryAction').commentsArrived(this.getRange().getOffset(),this.comments.length,q));}.bind(this));};p.prototype.fetchAllComments=function(q,r){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(q,r).then(function(s){var t=c('UFICommentFilters').getAuthors(s);if(!this.$UFIController5.feedback.isthreaded||!s.length)return t;return this.fetchAllReplyIDsForComments(s,q,r).then(function(u){return t.concat(u);});}.bind(this)).then(function(s){return (c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController5.feedback).concat(s));}.bind(this));}.bind(this)).then(function(s){return c('UFIFetcher').fetchShortProfiles(s);}).then(function(s){this.authorProfiles=s;}.bind(this));};p.prototype.fetchCommentsForFeedbackTarget=function(q,r){var s=this.getToplevelCommentList().getCommentCount(),t=this.getNewRange(q,this.$UFIController4,s),u={numPagerClicks:r?this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext,feedbackSource:this.$UFIController4.source};return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),t,u).then(function(v){this.replaceRange(t);this.comments=v;this.commentcounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.$UFIController5.deletedCounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getDeletedCount();this.$UFIController5.canAddCommentMap[this.$UFIController4.ftentidentifier]=!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier];v.forEach(function(w){this.$UFIController5.canReplyMap[w.id]=w.cancomment;this.$UFIController5.commentPermalinks[w.id]=this.getToplevelCommentList().getPermalinkForComment(w.id);}.bind(this));return v;}.bind(this));};p.prototype.fetchRepliesForComment=function(q,r,s){var t=q.id,u=this.getReplyCommentList(t).getCommentCount(),v=this.getNewReplyRange(r,q,this.$UFIController5.feedback,u),w={numPagerClicks:s?this.$UFIController5.replyPagerClickCounts[t]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext};return c('UFIFetcher').fetchComments(this.getReplyCommentList(t),v,w).then(function(x){this.replaceReplyRange(t,v);this.repliesMap[t]=x;this.commentcounts[t]=this.getReplyCommentList(t).getCommentCount();this.$UFIController5.deletedCounts[t]=this.getReplyCommentList(t).getDeletedCount();this.$UFIController5.canAddCommentMap[t]=!this.$UFIController5.featuredCommentLists[t];this.$UFIController5.defaultRepliesExpandedMap[t]=this.$UFIController30(this.$UFIController5.feedback,q,x.length);x.forEach(function(y){this.$UFIController5.canReplyMap[y.id]=y.cancomment;this.$UFIController5.commentPermalinks[y.id]=this.getReplyCommentList(t).getPermalinkForComment(y.id);}.bind(this));return x;}.bind(this));};p.prototype.fetchAllReplyIDsForComments=function(q,r,s){return new (c('Promise').all)(q.map(function(t){return this.fetchRepliesForComment(t,r,s).then(function(u){return c('UFICommentFilters').getAuthors(u);});}.bind(this))).then(function(t){return c('flattenArray')(t);});};p.prototype.getToplevelCommentList=function(){var q=this.$UFIController4;if(this.$UFIController5.featuredCommentLists[q.ftentidentifier])return this.$UFIController5.featuredCommentLists[q.ftentidentifier];if(q.islivestreaming)return c('UFIToplevelStreamedCommentList').getCommentList(q.ftentidentifier);return c('UFIToplevelPagedCommentList').getCommentList(q.ftentidentifier,this.orderingMode);};p.prototype.getReplyCommentList=function(q){if(q in this.$UFIController5.featuredCommentLists)return this.$UFIController5.featuredCommentLists[q];return c('UFIReplyCommentList').getCommentList(this.$UFIController4.ftentidentifier,q,this.orderingMode);};p.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var q=this.getToplevelCommentList().getCommentCount(),r=Math.min(q,this.$UFIController4.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new (c('UFIRange'))(q-r,r);}return this.ranges[this.orderingMode];};p.prototype.replaceRange=function(q){this.ranges[this.orderingMode]=q;};p.prototype.getReplyRange=function(q){if(!(q in this.replyRanges))this.replyRanges[q]=new (c('UFIRange'))();return this.replyRanges[q];};p.prototype.replaceReplyRange=function(q,r){this.replyRanges[q]=r;};p.prototype.$UFIController9=function(){this.$UFIController32();this.$UFIController33();this.$UFIController34();this.$UFIController35();this.$UFIController36();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();};p.prototype.$UFIController16=function(){this.$UFIController34();};p.prototype.$UFIController36=function(){var q=this.$UFIController4;c('UFILiveStreamingComments').stop(q.ftentidentifier);};p.prototype.$UFIController32=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(q){return q&&c('UFICentralUpdates').unsubscribe(q);});};p.prototype.$UFIController33=function(){var q=[this.pageletDestroySubscription,this.viewasUFICleanSubscription,this.ufiUIPageClearedSubscription];q.forEach(function(r){try{r&&c('Arbiter').unsubscribe(r);}catch(s){}});this.pageletDestroySubscription=null;this.viewasUFICleanSubscription=null;this.ufiUIPageClearedSubscription=null;};p.prototype.$UFIController34=function(){var q=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription,this.liveCommentLikeSubscription,this.liveTypingSubscription];q.forEach(function(r){return r&&r.unsubscribe();});};p.prototype.$UFIController35=function(){if(this.$UFIController18){this.$UFIController18.release();this.$UFIController18=null;}this.$UFIController25.forEach(function(q){return c('UFISharedDispatcher').unregister(q);});};p.prototype.$UFIController28=function(){var q=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'inlineShare'),r=this.$UFIController4;return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,id:this.$UFIController4.ftentidentifier,contextArgs:r,commentCounts:this.commentcounts,inlineShare:q,loadingComments:true})));};p.prototype.shouldShowCommentOrderingModeSelector=function(q){var r=this.getToplevelCommentList().getCommentCount()||q.commentcount||0;if(q.orderingmodes&&r>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier]){return true;}else return false;};f.exports=p;},null);
__d("XActorSelectorNuxSeenWriteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIActorSelector.react',['csx','fbt','ActorSelector.react','ActorSelectorNuxTypes','Arbiter','AsyncRequest','Parent','React','ReactDOM','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIUserActions','XActorSelectorNuxSeenWriteController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='ufi_actor_selector_nux_disabled_event',l=c('React').createClass({displayName:'UFIActorSelector',propTypes:{actorIDs:j.array.isRequired,ftEntIdentifier:j.string.isRequired,isTimeline:j.bool,loading:j.bool,nuxEnabled:j.bool,settingsURI:j.string},getInitialState:function(){return {loading:false,nuxEnabled:this.props.nuxEnabled,nuxHoverContext:null,selectedActorID:null};},render:function(){return (c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,loading:this.props.loading||this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onShowNux:this._onShowNux,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('UFICentralUpdates').subscribe('feedback-updated',function(n,o){if(this.props.ftEntIdentifier in o.updates)this._updateSelectedActorIDFromFeedbackTarget();}.bind(this)),c('Arbiter').subscribe(k,function(){this.setState({nuxEnabled:false});}.bind(this)));var m=c('Parent').bySelector(c('ReactDOM').findDOMNode(this),"._5pcr");if(m)this.setState({nuxHoverContext:m});},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){c('UFIFeedbackTargets').getFeedbackTarget(this.props.ftEntIdentifier,function(m){this.setState({loading:false,selectedActorID:m.actorforpost});}.bind(this));},_getNUXBody:function(){return i._("Like, comment or share as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(m){return i._("Liking and commenting as {actorName}",[i.param('actorName',m)]);},_onChange:function(m){this.setState({loading:true});c('UFIUserActions').changeActor(this.props.ftEntIdentifier,m.value);},_onCompleteNux:function(){var m=this.props.isTimeline?c('ActorSelectorNuxTypes').UFI_TIMELINE:c('ActorSelectorNuxTypes').UFI,n=c('XActorSelectorNuxSeenWriteController').getURIBuilder().setEnum('nux_type',m).getURI();new (c('AsyncRequest'))().setURI(n).send();},_onShowNux:function(){c('Arbiter').inform(k);}});f.exports=l;},null);
__d('ReactTransitionEvents',['ExecutionEnvironment','getVendorPrefixedEventName'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=[];function i(){var m=c('getVendorPrefixedEventName')('animationend'),n=c('getVendorPrefixedEventName')('transitionend');if(m)h.push(m);if(n)h.push(n);}if(c('ExecutionEnvironment').canUseDOM)i();function j(m,n,o){m.addEventListener(n,o,false);}function k(m,n,o){m.removeEventListener(n,o,false);}var l={addEndEventListener:function(m,n){if(h.length===0){window.setTimeout(n,0);return;}h.forEach(function(o){j(m,o,n);});},removeEndEventListener:function(m,n){if(h.length===0)return;h.forEach(function(o){k(m,o,n);});}};f.exports=l;},null);
__d('ReactCSSTransitionGroupChild',['React','ReactDOM','CSSCore','ReactTransitionEvents','onlyChild'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=17,i=c('React').createClass({displayName:'ReactCSSTransitionGroupChild',propTypes:{name:c('React').PropTypes.oneOfType([c('React').PropTypes.string,c('React').PropTypes.shape({enter:c('React').PropTypes.string,leave:c('React').PropTypes.string,active:c('React').PropTypes.string}),c('React').PropTypes.shape({enter:c('React').PropTypes.string,enterActive:c('React').PropTypes.string,leave:c('React').PropTypes.string,leaveActive:c('React').PropTypes.string,appear:c('React').PropTypes.string,appearActive:c('React').PropTypes.string})]).isRequired,appear:c('React').PropTypes.bool,enter:c('React').PropTypes.bool,leave:c('React').PropTypes.bool,appearTimeout:c('React').PropTypes.number,enterTimeout:c('React').PropTypes.number,leaveTimeout:c('React').PropTypes.number},transition:function(j,k,l){var m=c('ReactDOM').findDOMNode(this);if(!m){if(k)k();return;}var n=this.props.name[j]||this.props.name+'-'+j,o=this.props.name[j+'Active']||n+'-active',p=null,q=function(r){if(r&&r.target!==m)return;clearTimeout(p);c('CSSCore').removeClass(m,n);c('CSSCore').removeClass(m,o);c('ReactTransitionEvents').removeEndEventListener(m,q);if(k)k();};c('CSSCore').addClass(m,n);this.queueClass(o);if(l){p=setTimeout(q,l);this.transitionTimeouts.push(p);}else c('ReactTransitionEvents').addEndEventListener(m,q);},queueClass:function(j){this.classNameQueue.push(j);if(!this.timeout)this.timeout=setTimeout(this.flushClassNameQueue,h);},flushClassNameQueue:function(){if(this.isMounted())this.classNameQueue.forEach(c('CSSCore').addClass.bind(c('CSSCore'),c('ReactDOM').findDOMNode(this)));this.classNameQueue.length=0;this.timeout=null;},componentWillMount:function(){this.classNameQueue=[];this.transitionTimeouts=[];},componentWillUnmount:function(){if(this.timeout)clearTimeout(this.timeout);this.transitionTimeouts.forEach(function(j){clearTimeout(j);});},componentWillAppear:function(j){if(this.props.appear){this.transition('appear',j,this.props.appearTimeout);}else j();},componentWillEnter:function(j){if(this.props.enter){this.transition('enter',j,this.props.enterTimeout);}else j();},componentWillLeave:function(j){if(this.props.leave){this.transition('leave',j,this.props.leaveTimeout);}else j();},render:function(){return c('onlyChild')(this.props.children);}});f.exports=i;},null);
__d('ReactTransitionChildMapping',['flattenChildren'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getChildMapping:function(i,j){if(!i)return i;return c('flattenChildren')(i);},mergeChildMappings:function(i,j){i=i||{};j=j||{};function k(s){if(j.hasOwnProperty(s)){return j[s];}else return i[s];}var l={},m=[];for(var n in i)if(j.hasOwnProperty(n)){if(m.length){l[n]=m;m=[];}}else m.push(n);var o,p={};for(var q in j){if(l.hasOwnProperty(q))for(o=0;o<l[q].length;o++){var r=l[q][o];p[l[q][o]]=k(r);}p[q]=k(q);}for(o=0;o<m.length;o++)p[m[o]]=k(m[o]);return p;}};f.exports=h;},null);
__d('ReactTransitionGroup',['React','ReactInstanceMap','ReactTransitionChildMapping','emptyFunction'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactTransitionGroup',propTypes:{component:c('React').PropTypes.any,childFactory:c('React').PropTypes.func},getDefaultProps:function(){return {component:'span',childFactory:c('emptyFunction').thatReturnsArgument};},getInitialState:function(){return {children:c('ReactTransitionChildMapping').getChildMapping(this.props.children)};},componentWillMount:function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[];},componentDidMount:function(){var i=this.state.children;for(var j in i)if(i[j])this.performAppear(j);},componentWillReceiveProps:function(i){var j;j=c('ReactTransitionChildMapping').getChildMapping(i.children);var k=this.state.children;this.setState({children:c('ReactTransitionChildMapping').mergeChildMappings(k,j)});var l;for(l in j){var m=k&&k.hasOwnProperty(l);if(j[l]&&!m&&!this.currentlyTransitioningKeys[l])this.keysToEnter.push(l);}for(l in k){var n=j&&j.hasOwnProperty(l);if(k[l]&&!n&&!this.currentlyTransitioningKeys[l])this.keysToLeave.push(l);}},componentDidUpdate:function(){var i=this.keysToEnter;this.keysToEnter=[];i.forEach(this.performEnter);var j=this.keysToLeave;this.keysToLeave=[];j.forEach(this.performLeave);},performAppear:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillAppear){j.componentWillAppear(this._handleDoneAppearing.bind(this,i));}else this._handleDoneAppearing(i);},_handleDoneAppearing:function(i){var j=this.refs[i];if(j.componentDidAppear)j.componentDidAppear();delete this.currentlyTransitioningKeys[i];var k;k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(!k||!k.hasOwnProperty(i))this.performLeave(i);},performEnter:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillEnter){j.componentWillEnter(this._handleDoneEntering.bind(this,i));}else this._handleDoneEntering(i);},_handleDoneEntering:function(i){var j=this.refs[i];if(j.componentDidEnter)j.componentDidEnter();delete this.currentlyTransitioningKeys[i];var k;k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(!k||!k.hasOwnProperty(i))this.performLeave(i);},performLeave:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillLeave){j.componentWillLeave(this._handleDoneLeaving.bind(this,i));}else this._handleDoneLeaving(i);},_handleDoneLeaving:function(i){var j=this.refs[i];if(j.componentDidLeave)j.componentDidLeave();delete this.currentlyTransitioningKeys[i];var k;k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(k&&k.hasOwnProperty(i)){this.performEnter(i);}else this.setState(function(l){var m=Object.assign({},l.children);delete m[i];return {children:m};});},render:function(){var i=[];for(var j in this.state.children){var k=this.state.children[j];if(k)i.push(c('React').cloneElement(this.props.childFactory(k),{ref:j,key:j}));}return c('React').createElement(this.props.component,this.props,i);}});f.exports=h;},null);
__d('ReactCSSTransitionGroup',['React','ReactTransitionGroup','ReactCSSTransitionGroupChild'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k='transition'+j+'Timeout',l='transition'+j;return function(m){if(m[l])if(m[k]==null){return new Error(k+' wasn\'t supplied to ReactCSSTransitionGroup: '+'this can cause unreliable animations and won\'t be supported in '+'a future version of React. See '+'https://fb.me/react-animation-transition-group-timeout for more '+'information.');}else if(typeof m[k]!=='number')return new Error(k+' must be a number (in milliseconds)');};}var i=c('React').createClass({displayName:'ReactCSSTransitionGroup',propTypes:{transitionName:c('ReactCSSTransitionGroupChild').propTypes.name,transitionAppear:c('React').PropTypes.bool,transitionEnter:c('React').PropTypes.bool,transitionLeave:c('React').PropTypes.bool,transitionAppearTimeout:h('Appear'),transitionEnterTimeout:h('Enter'),transitionLeaveTimeout:h('Leave')},getDefaultProps:function(){return {transitionAppear:false,transitionEnter:true,transitionLeave:true};},_wrapChild:function(j){return c('React').createElement(c('ReactCSSTransitionGroupChild'),{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},j);},render:function(){return c('React').createElement(c('ReactTransitionGroup'),Object.assign({},this.props,{childFactory:this._wrapChild}));}});f.exports=i;},null);
__d('BlueBarFixedBehaviorController',['Arbiter','Bootloader'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={init:function(h){if(!('getBoundingClientRect' in h))return;var i=void 0,j=document.documentElement;function k(){var l=h.getBoundingClientRect(),m=l.top,n=Math.round(m)-j.clientTop<=0;if(i!==n){i=n;c('Arbiter').inform('bluebarFixedBehaviorController/isfixed',i,c('Arbiter').BEHAVIOR_STATE);}}k();c('Bootloader').loadModules(["Event"],function(l){l.listen(window,'scroll',k);},'BlueBarFixedBehaviorController');}};},null);
__d('FeedLoadEventLogger',['Arbiter','BanzaiLogger','ErrorSignal','ErrorUtils','LitestandMessages','PageletEventConstsJS','URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=['substream_','more_pager_pagelet_','pagelet_composer','pagelet_navigation','pagelet_rhc_footer'],i=[c('PageletEventConstsJS').ARRIVE_END,c('PageletEventConstsJS').DISPLAY_END,c('PageletEventConstsJS').ONLOAD_END],j=['pre_page_transition','page_transition'],k=[c('LitestandMessages').NEWSFEED_LOAD,c('LitestandMessages').STORIES_REQUESTED,c('LitestandMessages').STORIES_INSERTED,c('LitestandMessages').NEWER_STORIES_REQUESTED,c('LitestandMessages').NEWER_STORIES_INSERTED,c('LitestandMessages').STREAM_LOAD_ERROR,c('LitestandMessages').STREAM_LOAD_RETRY,c('LitestandMessages').DUPLICATE_CURSOR_ERROR],l=false;function m(q){return q&&(q.getPath()==='/'||q.getPath()==='/home.php');}function n(q){c('BanzaiLogger').log('WebFeedLoadLoggerConfig',q);}function o(q){if(!q)return null;if(q.indexOf('more_pager_pagelet_')===0)return 'more_pager_pagelet_n';if(q.indexOf('substream_')===0&&q!=='substream_0'&&q!=='substream_1')return 'substream_n';return q;}var p={init:function(){if(l)return;c('Arbiter').subscribe('BigPipe/init',function(q,r){if(!r||!r.arbiter)return;r.arbiter.subscribe('pagelet_event',function(s,t){if(t&&m(c('URI').getNextURI())&&i.indexOf(t.event)>=0&&h.some(function(u){return t.id.indexOf(u)===0;}))n({event:'pagelet',pagelet_id:o(t.id),pagelet_event_type:t.event,pagelet_phase:t.phase.toString()});});});c('Arbiter').subscribe(j,function(q,r){if(r){var s=r.to||r.uri;if(m(s))n({event:'page_transition',transition_event_type:q});}});c('Arbiter').subscribe(k,function(q,r){var s=null,t=null;if(q===c('LitestandMessages').STREAM_LOAD_ERROR){s=r;}else if(q===c('LitestandMessages').DUPLICATE_CURSOR_ERROR)t=r;n({event:'stream_load',stream_event_type:q,stream_cursor:t,stream_substream_id:o(r&&r.substream_id),error_name:s&&s.name,error_message:s&&s.message,error_stack:s&&s.stack});});c('ErrorUtils').addListener(function(q){if(q&&m(c('URI').getNextURI())){c('ErrorSignal').logJSError('feedloaderror',{error:q.name||q.message,extra:q});n({event:'js_error',error_name:q.name,error_message:q.message,error_stack:q.stack});}});l=true;}};f.exports=p;},null);
__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['csx','cx','invariant','ReactComposerAttachmentType','ReactComposerEvents','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerX6=l.root;this.$ReactFeedComposerX2=l.composerID;this.$ReactFeedComposerX10=l.targetID;this.$ReactFeedComposerX3=l.composerType;this.$ReactFeedComposerX5=l.friendListID;this.$ReactFeedComposerX7=l.sectionID;this.$ReactFeedComposerX1=false;this.$ReactFeedComposerX4=c('DOM').find(this.$ReactFeedComposerX6,'form');this.$ReactFeedComposerX11=c('DOM').find(this.$ReactFeedComposerX6,"._3en1");this.$ReactFeedComposerX9=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX6,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX11,'keydown',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX4,'success',this.$ReactFeedComposerX13.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX14.bind(this)));var m=c('DOM').find(this.$ReactFeedComposerX6,"._4d6h"),n=c('DOM').scry(m,'input[name="composer_photo[]"]')[0];if(n){this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(n,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(n,'change',this.$ReactFeedComposerX12.bind(this)));if(n.files&&n.files.length>0)this.$ReactFeedComposerX12();}this.$ReactFeedComposerX8=c('DOM').scry(this.$ReactFeedComposerX6,"._4-h7");this.$ReactFeedComposerX8.forEach(function(o){return this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)));}.bind(this));if(l.jsModules&&l.jsModules.composerFocus&&l.gks&&l.gks.focusExperiment){l.jsModules.composerFocus.handler(c('$')('feedx_container'),this.$ReactFeedComposerX2);}else if(l.gks&&l.gks.shouldBlurOnFocus)l.gks.shouldBlurOnFocus.handler(c('$')('feedx_container'),this.$ReactFeedComposerX2);c('Run').onLeave(this.$ReactFeedComposerX14.bind(this));}k.prototype.$ReactFeedComposerX15=function(l){var m=l.getTarget(),n=null;while(m){if(m.nodeType===1&&m.nodeName==='A'){n=m;break;}m=m.parentNode;}!(n!==null)?j(0):void 0;var o=c('CSS').hasClass(n,"._5qtn");if(o)return;this.$ReactFeedComposerX8.forEach(function(r){return c('CSS').removeClass(r,"_5qtn");});c('CSS').addClass(n,"_5qtn");var p=c('DOM').find(this.$ReactFeedComposerX6,"._559p"),q=c('DOM').find(this.$ReactFeedComposerX6,"._559q");switch(n.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(q);c('CSS').show(p);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:c('CSS').show(q);c('CSS').hide(p);break;}};k.prototype.$ReactFeedComposerX12=function(l){if(this.$ReactFeedComposerX1)return;this.$ReactFeedComposerX1=true;var m=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX10).setEnum('composer_type',this.$ReactFeedComposerX3).setString('friend_list_id',this.$ReactFeedComposerX5).setString('section_id',this.$ReactFeedComposerX7).getURI();new (c('AsyncRequest'))(m).send();var n=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(n).send();};k.prototype.$ReactFeedComposerX14=function(){this.$ReactFeedComposerX9.release();};k.prototype.$ReactFeedComposerX13=function(){this.$ReactFeedComposerX11.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX2);this.$ReactFeedComposerX14();};f.exports=k;},null);
__d('ReactComposerFocusMask.react',['cx','fbt','ix','Event','Image.react','Keys','React','ReactCSSTransitionGroup','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=300,m=200,n=c('React').createClass({displayName:'ReactComposerFocusMask',_subscriptions:c('SubscriptionsHandler'),propTypes:{onDismiss:k.func},getInitialState:function(){return {shown:false};},componentDidMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(document.body,'keydown',function(o){if(o.keyCode===c('Keys').ESC)this.props.onDismiss&&this.props.onDismiss();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){var o=this.state.shown?c('React').createElement('div',{className:"_l3q",onClick:this.props.onDismiss},c('React').createElement(c('Image.react'),{alt:i._("Close"),className:"_1lrh",src:j('/images/video/channel_view/close.png')})):null;return (c('React').createElement(c('ReactCSSTransitionGroup'),{component:'div',transitionName:'fbReactComposerFeedXFocusMask-fade',transitionAppear:false,transitionEnter:true,transitionLeave:true,transitionEnterTimeout:l,transitionLeaveTimeout:m},o));},show:function(){this.setState({shown:true});},hide:function(){this.setState({shown:false});}});f.exports=n;},null);
__d('ReactComposerFocus',['cx','ReactComposerEvents','ReactComposerFocusMask.react','Arbiter','CSS','DOM','Event','React','ReactDOM','Run','SubscriptionsHandler','getActiveElement','throttle'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=300,j=-400,k={composerID:'',mask:null,container:HTMLElement,subscriptions:c('SubscriptionsHandler'),scrollEventListener:c('Event'),handler:function(l,m){k.container=l;k.composerID=m;k.subscriptions=new (c('SubscriptionsHandler'))();k.subscriptions.addSubscriptions(c('Event').listen(k.container,'click',this._showMask.bind(this)));this._subscribeComposerEvents(k.composerID);c('Run').onLeave(this._cleanup.bind(this));},_subscribeComposerEvents:function(){var l=c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+k.composerID,this._hideMask.bind(this)),m=c('Arbiter').subscribe(c('ReactComposerEvents').COMPOSER_RESET+k.composerID,function(n,o){if(o&&o.newComposerID){k.composerID=o.newComposerID;this._subscribeComposerEvents();l.remove&&l.remove();m.remove&&m.remove();}}.bind(this));k.subscriptions.addSubscriptions(l,m);},_initFocusMask:function(){var l=c('DOM').create('div');k.mask=c('ReactDOM').render(c('React').createElement(c('ReactComposerFocusMask.react'),{onDismiss:this._hideMask}),l);c('DOM').appendContent(document.body,l);},_cleanup:function(){this._hideMask();k.subscriptions.release();},_showMask:function(){if(!k.mask){this._initFocusMask();setTimeout(this._showMask.bind(this),0);return;}c('CSS').addClass(k.container,"_xng");k.mask&&k.mask.show&&k.mask.show();k.scrollEventListener=c('Event').listen(window,'scroll',c('throttle')(this._handleScroll.bind(this),i));window.dispatchEvent(new (c('Event'))('resize'));},_hideMask:function(){c('CSS').removeClass(k.container,"_xng");k.mask&&k.mask.hide&&k.mask.hide();k.scrollEventListener&&k.scrollEventListener.remove&&k.scrollEventListener.remove();k.scrollEventListener=null;},_handleScroll:function(){var l=k.container.getBoundingClientRect().bottom;if(l<j){this._hideMask();c('getActiveElement')().blur();}},preload:function(){}};f.exports=k;},null);